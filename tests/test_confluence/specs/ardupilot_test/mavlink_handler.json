{
  "schema": "stunir.spec.v1",
  "module": "mavlink_handler",
  "description": "Simple MAVLink heartbeat message handler",
  "functions": [
    {
      "name": "parse_heartbeat",
      "params": [
        {
          "name": "buffer",
          "type": "byte[]"
        },
        {
          "name": "len",
          "type": "u8"
        }
      ],
      "returns": "i32",
      "body": [
        {
          "type": "var_decl",
          "var_name": "msg_type",
          "var_type": "u8",
          "init": "buffer[0]"
        },
        {
          "type": "var_decl",
          "var_name": "result",
          "var_type": "i32",
          "init": "0"
        },
        {
          "type": "return",
          "value": "result"
        }
      ]
    },
    {
      "name": "send_heartbeat",
      "params": [
        {
          "name": "sys_id",
          "type": "u8"
        },
        {
          "name": "comp_id",
          "type": "u8"
        }
      ],
      "returns": "i32",
      "body": [
        {
          "type": "var_decl",
          "var_name": "status",
          "var_type": "i32",
          "init": "1"
        },
        {
          "type": "return",
          "value": "status"
        }
      ]
    }
  ]
}