# STUNIR Minimal OS

A minimal headless operating system generated using STUNIR's multi-model workflow system.

## Components

1. **Bootloader** (`asm/boot.asm`)
   - Multiboot2-compliant entry point
   - Sets up initial stack
   - Calls long mode setup

2. **Kernel Entry** (`asm/kernel_entry.asm`)
   - Transitions from 32-bit protected mode to 64-bit long mode
   - Sets up GDT, page tables, and IDT
   - Calls kernel_main()

3. **Memory Manager** (`c/pmm.c`)
   - Bitmap-based physical page allocator
   - Supports up to 256MB of RAM
   - 4KB page granularity

4. **Serial Driver** (`c/serial.c`)
   - 8250 UART driver for COM1
   - 115200 baud, 8N1 configuration
   - Blocking I/O

5. **Timer Driver** (`c/timer.c`)
   - 8254 PIT timer
   - Configurable frequency (default 100Hz)
   - Tick counting and sleep functions

6. **Interrupt Handlers** (`asm/interrupts.asm`, `c/interrupts.c`)
   - Full 64-bit IDT setup
   - CPU exception handlers (0-19)
   - IRQ handlers (0-15)
   - PIC remapping

7. **Scheduler** (`c/scheduler.c`)
   - Cooperative round-robin scheduler
   - Maximum 16 tasks
   - Context switching via assembly

8. **System Calls** (`c/syscalls.c`)
   - Minimal syscall interface via INT 0x80
   - Supported syscalls: print, yield, exit, getpid, sleep

9. **Init Process** (`c/init.c`)
   - First userspace process
   - Prints "Hello, STUNIR OS!"
   - Main kernel initialization

## Building

```bash
# Install dependencies (Ubuntu/Debian)
sudo apt-get install nasm gcc make qemu-system-x86

# Build the kernel
make

# Run in QEMU
make run
```

## Expected Output

```
=== STUNIR OS v0.1 ===
Generated by STUNIR Multi-Model Workflow

[OK] Multiboot2 verified
[OK] Memory manager initialized (128MB)
     Free pages: 0x00007E00
[OK] IDT initialized
[OK] Timer initialized (100Hz)
[OK] Syscalls initialized
[OK] Scheduler initialized
[OK] Interrupts enabled

Starting init process (task 0x00000000)...

Hello, STUNIR OS!
Init process running...
Free pages: 0x00007DFF
Timer ticks: 0x0000000000000064
...
```

## Architecture

- **Target**: x86_64 bare-metal
- **Boot**: Multiboot2 specification
- **Mode**: 64-bit long mode
- **Memory Model**: Flat, identity-mapped first 8MB

## STUNIR Generation

This OS was generated using:
- STUNIR spec_to_ir: Ada SPARK precompiled binary
- IR generation: SHA-256 verified manifest
- Code emission: DO-178C Level A compliant

## License

MIT License - STUNIR Project
