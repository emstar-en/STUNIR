{
  "schema": "stunir.spec.v1",
  "module": "control_flow_test",
  "description": "Test suite for v0.6.1 single-level nesting support",
  "target": {
    "architecture": "x86",
    "format": "c",
    "standard": "c99"
  },
  "functions": [
    {
      "name": "test_if_then",
      "description": "Test if with then block only",
      "params": [
        {"name": "x", "type": "i32"}
      ],
      "returns": "i32",
      "body": [
        {"type": "var_decl", "var_name": "result", "var_type": "i32", "init": "0"},
        {"type": "if", "condition": "x > 10", "then": [
          {"type": "assign", "target": "result", "value": "x * 2"},
          {"type": "assign", "target": "result", "value": "result + 1"}
        ]},
        {"type": "return", "value": "result"}
      ]
    },
    {
      "name": "test_if_else",
      "description": "Test if with then and else blocks",
      "params": [
        {"name": "x", "type": "i32"}
      ],
      "returns": "i32",
      "body": [
        {"type": "var_decl", "var_name": "result", "var_type": "i32", "init": "0"},
        {"type": "if", "condition": "x > 0", "then": [
          {"type": "assign", "target": "result", "value": "x + 10"}
        ], "else": [
          {"type": "assign", "target": "result", "value": "-1"}
        ]},
        {"type": "return", "value": "result"}
      ]
    },
    {
      "name": "test_while_loop",
      "description": "Test while loop with body",
      "params": [
        {"name": "n", "type": "i32"}
      ],
      "returns": "i32",
      "body": [
        {"type": "var_decl", "var_name": "sum", "var_type": "i32", "init": "0"},
        {"type": "var_decl", "var_name": "i", "var_type": "i32", "init": "0"},
        {"type": "while", "condition": "i < n", "body": [
          {"type": "assign", "target": "sum", "value": "sum + i"},
          {"type": "assign", "target": "i", "value": "i + 1"}
        ]},
        {"type": "return", "value": "sum"}
      ]
    },
    {
      "name": "test_for_loop",
      "description": "Test for loop with body",
      "params": [
        {"name": "max", "type": "i32"}
      ],
      "returns": "i32",
      "body": [
        {"type": "var_decl", "var_name": "total", "var_type": "i32", "init": "0"},
        {"type": "for", "init": "i = 0", "condition": "i < max", "increment": "i++", "body": [
          {"type": "assign", "target": "total", "value": "total + (i * 2)"}
        ]},
        {"type": "return", "value": "total"}
      ]
    },
    {
      "name": "test_multiple_if",
      "description": "Test multiple sequential if statements",
      "params": [
        {"name": "a", "type": "i32"},
        {"name": "b", "type": "i32"}
      ],
      "returns": "i32",
      "body": [
        {"type": "var_decl", "var_name": "result", "var_type": "i32", "init": "0"},
        {"type": "if", "condition": "a > 0", "then": [
          {"type": "assign", "target": "result", "value": "result + a"}
        ]},
        {"type": "if", "condition": "b > 0", "then": [
          {"type": "assign", "target": "result", "value": "result + b"}
        ]},
        {"type": "return", "value": "result"}
      ]
    },
    {
      "name": "test_complex_condition",
      "description": "Test if/else with complex conditions and multiple statements",
      "params": [
        {"name": "x", "type": "i32"},
        {"name": "y", "type": "i32"}
      ],
      "returns": "i32",
      "body": [
        {"type": "var_decl", "var_name": "a", "var_type": "i32", "init": "0"},
        {"type": "var_decl", "var_name": "b", "var_type": "i32", "init": "0"},
        {"type": "if", "condition": "x > y", "then": [
          {"type": "assign", "target": "a", "value": "x"},
          {"type": "assign", "target": "b", "value": "y"},
          {"type": "assign", "target": "a", "value": "a - b"}
        ], "else": [
          {"type": "assign", "target": "a", "value": "y"},
          {"type": "assign", "target": "b", "value": "x"},
          {"type": "assign", "target": "a", "value": "a - b"}
        ]},
        {"type": "return", "value": "a"}
      ]
    }
  ]
}
