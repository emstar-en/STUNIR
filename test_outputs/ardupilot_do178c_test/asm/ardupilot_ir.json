{"ir_epoch":1770194597,"ir_exports":["ap_math_crc","ap_math_vector2"],"ir_functions":[{"body":[{"init":"0","type":"var_decl","var_name":"n_rem","var_type":"u16"},{"init":"0","type":"var_decl","var_name":"cnt","var_type":"u8"},{"body":[{"condition":"cnt & 1","else":[{"target":"n_rem","type":"assign","value":"n_rem ^ (data[cnt >> 1] >> 8)"}],"then":[{"target":"n_rem","type":"assign","value":"n_rem ^ (data[cnt >> 1] & 0x00FF)"}],"type":"if"},{"init":"8","type":"var_decl","var_name":"n_bit","var_type":"u8"},{"body":[{"condition":"n_rem & 0x8000","else":[{"target":"n_rem","type":"assign","value":"n_rem << 1"}],"then":[{"target":"n_rem","type":"assign","value":"(n_rem << 1) ^ 0x3000"}],"type":"if"},{"target":"n_bit","type":"assign","value":"n_bit - 1"}],"condition":"n_bit > 0","type":"while"},{"target":"cnt","type":"assign","value":"cnt + 1"}],"condition":"cnt < 16","type":"while"},{"type":"return","value":"(n_rem >> 12) & 0xF"}],"name":"crc_crc4","params":[{"description":"Array of 8 uint16_t values (16 bytes total)","name":"data","type":"u16[]"}],"returns":"u16"},{"body":[{"init":"0x0","type":"var_decl","var_name":"crc","var_type":"u16"},{"body":[{"init":"(crc ^ *p) & 0xFF","type":"var_decl","var_name":"i","var_type":"u16"},{"target":"crc","type":"assign","value":"(crc8_table[i] ^ (crc << 8)) & 0xFF"},{"target":"p","type":"assign","value":"p + 1"},{"target":"len","type":"assign","value":"len - 1"}],"condition":"len > 0","type":"while"},{"type":"return","value":"crc & 0xFF"}],"name":"crc_crc8","params":[{"description":"Input data buffer","name":"p","type":"u8[]"},{"description":"Length of data","name":"len","type":"u8"}],"returns":"u8"},{"body":[{"type":"return","value":"crc8_dvb(crc, a, 0xD5)"}],"name":"crc8_dvb_s2","params":[{"name":"crc","type":"u8"},{"name":"a","type":"u8"}],"returns":"u8"},{"body":[{"init":"0","type":"var_decl","var_name":"i","var_type":"u8"},{"target":"crc","type":"assign","value":"crc ^ a"},{"body":[{"condition":"crc & 0x80","else":[{"target":"crc","type":"assign","value":"crc << 1"}],"then":[{"target":"crc","type":"assign","value":"(crc << 1) ^ seed"}],"type":"if"},{"target":"i","type":"assign","value":"i + 1"}],"condition":"i < 8","type":"while"},{"type":"return","value":"crc"}],"name":"crc8_dvb","params":[{"name":"crc","type":"u8"},{"name":"a","type":"u8"},{"description":"Polynomial seed","name":"seed","type":"u8"}],"returns":"u8"},{"body":[{"init":"0","type":"var_decl","var_name":"i","var_type":"u32"},{"body":[{"target":"crc","type":"assign","value":"(crc << 8) ^ crc16tab[((crc >> 8) ^ *buf) & 0x00FF]"},{"target":"buf","type":"assign","value":"buf + 1"},{"target":"i","type":"assign","value":"i + 1"}],"condition":"i < len","type":"while"},{"type":"return","value":"crc"}],"name":"crc16_ccitt","params":[{"description":"Input buffer","name":"buf","type":"u8[]"},{"description":"Buffer length","name":"len","type":"u32"},{"description":"Initial CRC value","name":"crc","type":"u16"}],"returns":"u16"},{"body":[{"init":"0","type":"var_decl","var_name":"c0","var_type":"u16"},{"init":"0","type":"var_decl","var_name":"c1","var_type":"u16"},{"init":"0","type":"var_decl","var_name":"i","var_type":"u32"},{"body":[{"target":"c0","type":"assign","value":"(c0 + buffer[i]) % 255"},{"target":"c1","type":"assign","value":"(c1 + c0) % 255"},{"target":"i","type":"assign","value":"i + 1"}],"condition":"i < len","type":"while"},{"type":"return","value":"(c1 << 8) | c0"}],"name":"crc_fletcher16","params":[{"name":"buffer","type":"u8[]"},{"name":"len","type":"u32"}],"returns":"u16"},{"body":[{"type":"return","value":"x*x + y*y"}],"name":"vector2_length_squared","params":[{"name":"x","type":"f32"},{"name":"y","type":"f32"}],"returns":"f32"},{"body":[{"type":"return","value":"sqrt(x*x + y*y)"}],"name":"vector2_length","params":[{"name":"x","type":"f32"},{"name":"y","type":"f32"}],"returns":"f32"},{"body":[{"init":"vector2_length(x, y)","type":"var_decl","var_name":"len","var_type":"f32"},{"condition":"len > max_length && len > 0","then":[{"target":"x","type":"assign","value":"x * (max_length / len)"},{"target":"y","type":"assign","value":"y * (max_length / len)"},{"type":"return","value":"true"}],"type":"if"},{"type":"return","value":"false"}],"name":"vector2_limit_length","params":[{"direction":"inout","name":"x","type":"f32"},{"direction":"inout","name":"y","type":"f32"},{"name":"max_length","type":"f32"}],"returns":"bool"},{"body":[{"type":"return","value":"x1*x2 + y1*y2"}],"name":"vector2_dot_product","params":[{"name":"x1","type":"f32"},{"name":"y1","type":"f32"},{"name":"x2","type":"f32"},{"name":"y2","type":"f32"}],"returns":"f32"},{"body":[{"type":"return","value":"x1*y2 - y1*x2"}],"name":"vector2_cross_product","params":[{"name":"x1","type":"f32"},{"name":"y1","type":"f32"},{"name":"x2","type":"f32"},{"name":"y2","type":"f32"}],"returns":"f32"},{"body":[{"init":"vector2_length(x1, y1) * vector2_length(x2, y2)","type":"var_decl","var_name":"len","var_type":"f32"},{"condition":"len <= 0","then":[{"type":"return","value":"0.0"}],"type":"if"},{"init":"vector2_dot_product(x1, y1, x2, y2) / len","type":"var_decl","var_name":"cosv","var_type":"f32"},{"condition":"cosv >= 1.0","then":[{"type":"return","value":"0.0"}],"type":"if"},{"condition":"cosv <= -1.0","then":[{"type":"return","value":"3.14159265"}],"type":"if"},{"type":"return","value":"acos(cosv)"}],"name":"vector2_angle_between","params":[{"name":"x1","type":"f32"},{"name":"y1","type":"f32"},{"name":"x2","type":"f32"},{"name":"y2","type":"f32"}],"returns":"f32"},{"body":[{"init":"vector2_length(x, y)","type":"var_decl","var_name":"len","var_type":"f32"},{"condition":"len > 0","then":[{"target":"x","type":"assign","value":"x / len"},{"target":"y","type":"assign","value":"y / len"}],"type":"if"}],"name":"vector2_normalize","params":[{"direction":"inout","name":"x","type":"f32"},{"direction":"inout","name":"y","type":"f32"}],"returns":"void"},{"body":[{"init":"seg1_end_x - seg1_start_x","type":"var_decl","var_name":"r1_x","var_type":"f32"},{"init":"seg1_end_y - seg1_start_y","type":"var_decl","var_name":"r1_y","var_type":"f32"},{"init":"seg2_end_x - seg2_start_x","type":"var_decl","var_name":"r2_x","var_type":"f32"},{"init":"seg2_end_y - seg2_start_y","type":"var_decl","var_name":"r2_y","var_type":"f32"},{"init":"r1_x * r2_y - r1_y * r2_x","type":"var_decl","var_name":"r1xr2","var_type":"f32"},{"condition":"r1xr2 == 0","then":[{"type":"return","value":"false"}],"type":"if"},{"init":"seg2_start_x - seg1_start_x","type":"var_decl","var_name":"ss2_ss1_x","var_type":"f32"},{"init":"seg2_start_y - seg1_start_y","type":"var_decl","var_name":"ss2_ss1_y","var_type":"f32"},{"init":"(ss2_ss1_x * r2_y - ss2_ss1_y * r2_x) / r1xr2","type":"var_decl","var_name":"t","var_type":"f32"},{"init":"(ss2_ss1_x * r1_y - ss2_ss1_y * r1_x) / r1xr2","type":"var_decl","var_name":"u","var_type":"f32"},{"condition":"u >= 0 && u <= 1 && t >= 0 && t <= 1","then":[{"target":"out_x","type":"assign","value":"seg1_start_x + r1_x * t"},{"target":"out_y","type":"assign","value":"seg1_start_y + r1_y * t"},{"type":"return","value":"true"}],"type":"if"},{"type":"return","value":"false"}],"name":"vector2_segment_intersection","params":[{"name":"seg1_start_x","type":"f32"},{"name":"seg1_start_y","type":"f32"},{"name":"seg1_end_x","type":"f32"},{"name":"seg1_end_y","type":"f32"},{"name":"seg2_start_x","type":"f32"},{"name":"seg2_start_y","type":"f32"},{"name":"seg2_end_x","type":"f32"},{"name":"seg2_end_y","type":"f32"},{"direction":"out","name":"out_x","type":"f32"},{"direction":"out","name":"out_y","type":"f32"}],"returns":"bool"}],"ir_imports":[],"ir_module":"ap_math_crc","ir_spec_hash":"5674ae52a4b3afed30026ba3051a9d36a5c8d615f010291029bfddcd38664e70","ir_types":[],"schema":"stunir.ir.v1"}
