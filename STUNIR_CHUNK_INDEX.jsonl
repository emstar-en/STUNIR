{"chunk_id": "AI_START_HERE.md::chunk::0000", "path": "AI_START_HERE.md", "source_git_sha": "b4f21e376d648f57934124cdb9a5365b3dc4f450", "heading": "AI_START_HERE", "text": "# AI_START_HERE\n\nThis file is a stable navigation index for the STUNIR repository.\nIt exists to keep humans and AI agents from getting stuck in low-signal loops.\n", "chunk_sha256": "971b3d91b892ddf3e6f47532c53ed30d13885fc097a5ae153a2cd751aa718efc"}
{"chunk_id": "AI_START_HERE.md::chunk::0001", "path": "AI_START_HERE.md", "source_git_sha": "b4f21e376d648f57934124cdb9a5365b3dc4f450", "heading": "Canonical reading order", "text": "## Canonical reading order\n\nRead these in order:\n\n- `ENTRYPOINT.md`\n- `docs/verification.md`\n- `docs/toolchain_contracts.md`\n- `docs/receipt_storage_policy.md`\n- `contracts/target_requirements.json`\n- `schemas/stunir_receipt_predicate_v1.schema.json`\n- `schemas/stunir_statement_wrapper_v1.schema.json`\n- `tools/verify_build.py`\n- `tools/spec_to_ir.py`\n- `tools/spec_to_ir_files.py`\n- `scripts/build.sh`\n- `scripts/verify.sh`\n- `spec/stunir_machine_plan.json`\n- `asm/spec_ir.txt`\n", "chunk_sha256": "b9fc1c7a9eab191ec735c17b7de8fc82895fb53fddde4504cdff8a29fa604559"}
{"chunk_id": "AI_START_HERE.md::chunk::0002", "path": "AI_START_HERE.md", "source_git_sha": "b4f21e376d648f57934124cdb9a5365b3dc4f450", "heading": "Repo map (what lives where)", "text": "## Repo map (what lives where)\n\n- `docs/`: narrative docs (verification, toolchain contracts, receipt policy)\n- `schemas/`: JSON schemas for statements/receipts\n- `contracts/`: toolchain contracts (identity + determinism probes)\n- `tools/`: implementation utilities\n- `scripts/`: build/verify entrypoints\n- `spec/`: spec deltas / patch sets + machine plan JSON\n- `asm/`: materialization artifacts (includes IR summary)\n- `build/`, `receipts/`: build outputs (often not committed by default)\n", "chunk_sha256": "d1e388274905ca121bb61f0a1f90cf9c0a0706564a00caae868a7d4ba6833dad"}
{"chunk_id": "AI_START_HERE.md::chunk::0003", "path": "AI_START_HERE.md", "source_git_sha": "b4f21e376d648f57934124cdb9a5365b3dc4f450", "heading": "Anti-loop rules", "text": "## Anti-loop rules\n\n1. Treat `build/` and `receipts/` as outputs unless a doc explicitly says otherwise.\n2. If a README is a placeholder, do not recurse from it; return to `ENTRYPOINT.md` or `docs/`.\n3. Prefer `docs/verification.md` + `schemas/` + `contracts/` over enumerating every test vector.\n", "chunk_sha256": "12c650bbb84de4bec4c409c0dccf5ea6cec6dc09a1eadbcd7e4aa83187243d6d"}
{"chunk_id": "AI_START_HERE.md::chunk::0004", "path": "AI_START_HERE.md", "source_git_sha": "b4f21e376d648f57934124cdb9a5365b3dc4f450", "heading": "Link conventions", "text": "## Link conventions\n\n- Prefer repo-relative links (e.g. `docs/verification.md`) over GitHub UI links.\n- When linking to a directory, link to `README.md` explicitly if it exists.\n", "chunk_sha256": "437e293fe5c903e575294f103527f3964f4eff2bf7fefa3b87fe1acbbd394736"}
{"chunk_id": "ENTRYPOINT.md::chunk::0000", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "STUNIR Pack Entry Point (v0)", "text": "### STUNIR Pack Entry Point (v0)\nThis file is the **first thing** a tool or model SHOULD read when consuming a STUNIR bundle as a STUNIR pack.\n", "chunk_sha256": "53774a21b9ce18a802b06c216f6a9c5c3befd890704d901cb7020f98626366db"}
{"chunk_id": "ENTRYPOINT.md::chunk::0001", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "1) What to look for", "text": "#### 1) What to look for\nA STUNIR pack is a **deterministic container + commitment** rooted at a directory that contains:\n- `objects/sha256/` (content-addressed blobs, REQUIRED)\n- one of:\n  - `root_attestation.dcbor` (preferred bootstrap, REQUIRED if available), or\n  - `root_attestation.txt` (fallback bootstrap for minimal environments)\n\nIf these are absent, you are not looking at a conforming STUNIR pack.\n\nBack-compat note:\n- A pack MAY additionally include `pack_manifest.dcbor` as a legacy alias.\n", "chunk_sha256": "17b35b0a840e9f3356b75b59ffab36a353abac7c95affdfc4addbdded86f3a77"}
{"chunk_id": "ENTRYPOINT.md::chunk::0002", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "2) Authority rule (integrity boundary)", "text": "#### 2) Authority rule (integrity boundary)\n- The **root attestation** is authoritative for pack contents.\n- Only blobs referenced by digest in the root attestation are in the integrity boundary.\n- Any file not referenced by digest MUST be ignored for integrity purposes.\n\nBootstrap selection:\n- If `root_attestation.dcbor` is present, consumers SHOULD treat it as authoritative.\n- Otherwise, consumers MAY use `root_attestation.txt`.\n\nDigest mapping rule:\n- For any `sha256:` referenced by the root attestation, the blob bytes MUST exist at `objects/sha256/<hex>`.\n", "chunk_sha256": "13981ca165b5169be79dcdbad5dc2ac4e8410348c8d89d3f84a6fb7f896a1fa0"}
{"chunk_id": "ENTRYPOINT.md::chunk::0003", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "3) What STUNIR is trying to achieve", "text": "#### 3) What STUNIR is trying to achieve\nSTUNIR aims to turn a human-authored spec into a canonical **Intermediate Reference (IR)** and then (optionally) further derived products, while emitting **attestation artifacts** that bind each step to hashes.\n\nIn v0, the portable audit spine is:\n- upstream **inputs** (often the spec),\n- the canonical **IR**,\n- the **attestation artifact bundle** (step receipts and related evidence),\n- a **root attestation** that inventories and commits to the above.\n\nDownstream runtime outputs (code/binaries/test outputs) are typically **materialized to user-chosen paths** and are not assumed to be baked into the pack.\n", "chunk_sha256": "8bc0d4e5e3ad885560329d4e9be0880b8b61d68ee9e0a0693c2c427be26d4d92"}
{"chunk_id": "ENTRYPOINT.md::chunk::0004", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "4) Inclusion vs materialization", "text": "#### 4) Inclusion vs materialization\n- **Included** means the exact bytes are stored under `objects/sha256/` and referenced by digest in the root attestation.\n- **Materialized** means bytes are written to some workspace path chosen by the user/model.\n\nPaths are UX; digests define identity.\n", "chunk_sha256": "57a22b7d41c5d87baf0915c88a9eb84d0c6f1652887844a82f75067f4c3b1e8d"}
{"chunk_id": "ENTRYPOINT.md::chunk::0005", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "5) Minimal verification checklist", "text": "#### 5) Minimal verification checklist\nA verifier MUST:\n1. Decode the root attestation (`root_attestation.dcbor` preferred; else `root_attestation.txt`).\n2. Validate required fields for the chosen encoding.\n3. For every referenced digest, recompute SHA-256 over `objects/sha256/<hex>` and compare.\n4. Confirm there is exactly one IR referenced via `ir.digest`.\n5. Confirm every receipt referenced via `receipts[].digest` exists and matches its digest.\n6. If `inputs` are present, confirm each referenced input exists and matches its digest.\n", "chunk_sha256": "b7ad592fd7042f281d42920c701ef799372ded313d3bde6c9fc96c58050a6f01"}
{"chunk_id": "ENTRYPOINT.md::chunk::0006", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "6) Where the detailed rules live", "text": "#### 6) Where the detailed rules live\n- Pack overview: `stunir_pack_spec_v0.md`\n- Root attestation (dCBOR): `stunir_pack_root_attestation_v0.md`\n- Root attestation (text fallback): `stunir_pack_root_attestation_text_v0.md`\n- Materialization: `stunir_pack_materialization_v0.md`\n- Deterministic archiving: `stunir_pack_archiving_v0.md`\n- Security considerations: `stunir_pack_security_v0.md`\n", "chunk_sha256": "d49b6bc8fd52ccf90ead6de3937bd69d8d26728ae6898155df4248c576ea21d5"}
{"chunk_id": "ENTRYPOINT.md::chunk::0007", "path": "ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "7) Model/agent operating guidance (non-normative)", "text": "#### 7) Model/agent operating guidance (non-normative)\nWhen working interactively:\n- Ask the user what they want to produce (IR only, code, runtime outputs) and where to put materialized files.\n- Treat any requested filesystem destinations as untrusted input.\n- Prefer emitting/retaining attestation artifacts as the portable audit record.\n", "chunk_sha256": "9d4d7a098cf443d9d8848e0ec873fc56e5eabff8f877ec45bcb43c2bf44a9c18"}
{"chunk_id": "README.md::chunk::0000", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "STUNIR", "text": "# STUNIR\n\n**STUNIR = Standardization Theorem + Unique Normals + Intermediate Reference**\n\nSTUNIR is a **model-facing, deterministic generation harness** for turning a human-authored **spec** into:\n- a canonical **Intermediate Reference (IR)** (a canonical meaning object / referent; it is also an “intermediate representation” in the usual compiler sense)\n- one or more **runtime outputs** (hosted and/or compiled)\n- a **receipt bundle** (machine-checkable proofs/attestations) that binds the entire pipeline\n\nSTUNIR is designed for workflows where:\n- Humans author *specs* (and occasionally review proofs).\n- Models propose and orchestrate.\n- **Only deterministic tooling is trusted** to produce IR, artifacts, and receipts.\n\nSTUNIR is not meant to be a human-operated CLI product. Humans typically do **not** interact with a STUNIR pack directly.\n", "chunk_sha256": "fb645d4182f8ad428a054da1bd8d46270ce7775dec332d50743616e47d3b9bba"}
{"chunk_id": "README.md::chunk::0001", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Where to start", "text": "## Where to start\nIf you want to understand “how STUNIR works”, start with:\n- `scripts/build.sh` (the concrete deterministic pipeline)\n- `scripts/verify.sh` (the small checker)\n- `docs/verification.md` (local vs DSSE verification model)\n\nIf you are looking for the **pack/container** interchange format (used when shipping bundles between environments), start with:\n- `ENTRYPOINT.md`\n- `stunir_pack_spec_v0.md`\n", "chunk_sha256": "a2eb971211ad07130e7dfadcb38f3231ecabd754e9512a4af2f19919458fb706"}
{"chunk_id": "README.md::chunk::0002", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Why the name matters (ST / UN / IR)", "text": "## Why the name matters (ST / UN / IR)\nSTUNIR exists because “model-written code” becomes practical only when the **model is not the authority**. Models can propose plans and edits; deterministic tooling must be the sole producer of commitments.\n", "chunk_sha256": "986337271e3a3375ef7200f10a21a2417fc2c3b13f545a75a9fb020913cbdbb8"}
{"chunk_id": "README.md::chunk::0003", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "ST — Standardization Theorem (operational meaning in STUNIR)", "text": "### ST — Standardization Theorem (operational meaning in STUNIR)\nIn STUNIR, “ST” is used in the practical/engineering sense: a **standardized, deterministic sequence of steps** from inputs → IR → outputs, so the process is replayable or at least re-checkable.\n\nThis repo encodes that sequence explicitly (see `scripts/build.sh`).\n", "chunk_sha256": "b8b3f50c33e3ddb31ca33e2b011199f82c4c42a21121fcd7c57bbc08a38d6194"}
{"chunk_id": "README.md::chunk::0004", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "UN — Unique Normals (what we use today)", "text": "### UN — Unique Normals (what we use today)\nA full Church–Rosser / confluence story across the entire pipeline is valuable but expensive.\n\nFor the current stage, STUNIR uses **Unique Normal Forms** as the efficient determinism/equivalence layer:\n- canonicalization produces a stable normal form\n- commitments/hashes bind artifacts to those normal forms\n- verification stays cheap (re-hash + compare)\n\nConcretely, this repo normalizes JSON into canonical bytes (sorted keys, stable separators), so “same meaning” ⇒ “same bytes” ⇒ “same sha256” (see `tools/spec_to_ir_files.py`).\n", "chunk_sha256": "c759692d62dcea88dfa39c443dff62dbc3ae992c6b48ffb455b4d2c4ef4f2a68"}
{"chunk_id": "README.md::chunk::0005", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "IR — Intermediate Reference", "text": "### IR — Intermediate Reference\nIR is treated as the canonical *referent* that everything else is checked against:\n- spec → IR (canonicalization / compilation)\n- IR → outputs (generation)\n- outputs → IR (verification / reconstruction / equivalence checks, where applicable)\n\n“Reference” is intentional: the IR is what receipts bind and what verifiers check, regardless of how humans authored the spec.\n", "chunk_sha256": "9452b64ec7fb0e1c9886da126415c84a58e0e7948e35092fb23ae85e9e267975"}
{"chunk_id": "README.md::chunk::0006", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Origin / motivation (why this exists)", "text": "## Origin / motivation (why this exists)\nThis harness came from a practical problem:\n- A program design was already known, but hand-coding it was too slow/inefficient.\n- Writing the same output in multiple languages multiplies that cost.\n\nSo the workflow became:\n1. Use NLP prompts to get a model to propose a **spec**.\n2. Deterministically compile the spec into a canonical IR.\n3. Generate one or more language outputs from the IR.\n4. Cross-check via normal forms/receipts so determinism and auditability are built in.\n\nThe “paranoid” endgame is a more fully axiomatic Church–Rosser/confluence-grade system. STUNIR is the efficient route: **Unique Normals now**, stronger proof machinery later.\n", "chunk_sha256": "68a9410549a73dbe1d6f17cbb62a27604c4e0dbd819fae1a60c8add73b61c0e9"}
{"chunk_id": "README.md::chunk::0007", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "What STUNIR is (and is not)", "text": "## What STUNIR is (and is not)\n", "chunk_sha256": "61c6895f9fe9d10a29b2ba9304e7706f583199ab6e63cb5f778b8a1a1d05adfa"}
{"chunk_id": "README.md::chunk::0008", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "STUNIR is", "text": "### STUNIR is\n- A repeatable way to compile **spec → IR → artifacts** under strict determinism controls.\n- A receipt system that makes outputs auditable and replayable.\n- A structure for treating models as **untrusted planners** and the toolchain as the **sole producer** of commitments.\n", "chunk_sha256": "da3be6e528b594fa90a9ddf222db87ba4d833a8435ca9fde4db53dbb47959ede"}
{"chunk_id": "README.md::chunk::0009", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "STUNIR is not", "text": "### STUNIR is not\n- A deployment platform.\n- A “run these commands” developer UX.\n- A promise that every supported language is equally turnkey as a runtime *today*.\n\nSTUNIR’s contract is: **if an artifact exists, it is receipt-bound**.\n", "chunk_sha256": "921d05e0d8b25ddf63270e0daa3c8e79440bf03f0de936afcabeea8639293529"}
{"chunk_id": "README.md::chunk::0010", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Core idea: shackle models to a deterministic toolchain", "text": "## Core idea: shackle models to a deterministic toolchain\nA model may:\n- choose targets\n- propose edits\n- propose plans\n\n…but it must not be the authority for:\n- what the IR “means”\n- what artifacts “are”\n- whether a build “counts”\n\nInstead, the deterministic toolchain produces:\n- canonical IR commitments\n- artifacts\n- receipts\n\nVerification is also deterministic. Models can present the raw proof, but the proof is generated by a deterministic process.\n", "chunk_sha256": "af327646da5f9edf235f29b20261ec5cc823e020a7905fb7d2fe00398c5cc1dd"}
{"chunk_id": "README.md::chunk::0011", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Packs and attestation artifacts (distribution vs workspace)", "text": "## Packs and attestation artifacts (distribution vs workspace)\nSTUNIR frequently needs to move results across machines (CI → auditor laptop, orchestrator → consumer, etc.). For that purpose, STUNIR defines a **pack**: a deterministic container + commitment that can be verified offline.\n\nTerminology used in this repo:\n- **Attestation artifacts**: the umbrella category for emitted evidence objects (step receipts, root attestation, envelopes, provenance/SBOM objects, etc.).\n- **Receipt**: a step-scoped evidence object emitted by the harness.\n- **Root attestation**: the bootstrap “shopping list” that inventories pack contents by digest.\n", "chunk_sha256": "7da68da8dde2cd3bf6911c9f1c76ce8eb74043379ada6d6851087c279e630849"}
{"chunk_id": "README.md::chunk::0012", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Pack bootstrap: root attestation", "text": "### Pack bootstrap: root attestation\nPack v0 is rooted at:\n- `root_attestation.dcbor` (preferred; canonical dCBOR)\n\nTo support highly constrained environments, pack v0 also defines an equivalent minimal-toolchain encoding:\n- `root_attestation.txt` (line-oriented; designed for shell/PowerShell parsing)\n\nIf both are present, they must be equivalent and consumers should treat `root_attestation.dcbor` as authoritative.\n\nSee:\n- `ENTRYPOINT.md`\n- `stunir_pack_spec_v0.md`\n- `stunir_pack_root_attestation_v0.md`\n- `stunir_pack_root_attestation_text_v0.md`\n", "chunk_sha256": "ea88475e54c7494f96bd53ef66e9027416e66923fffc3801511bbb6a65b9edee"}
{"chunk_id": "README.md::chunk::0013", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Inclusion vs materialization", "text": "### Inclusion vs materialization\nSTUNIR distinguishes:\n- **Included**: bytes are stored under `objects/sha256/` and referenced by digest in the root attestation.\n- **Materialized**: bytes are written to user-chosen paths in a workspace.\n\nPaths are UX; digests define identity.\n\n(See `stunir_pack_materialization_v0.md`.)\n", "chunk_sha256": "095265d0af5654219b80f38bc71177727f46f7f3a4e60c02c2e0d7fe431c8ef5"}
{"chunk_id": "README.md::chunk::0014", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Verification (small checkers, multiple toolchain levels)", "text": "## Verification (small checkers, multiple toolchain levels)\nThis repo supports two verification layers (see `docs/verification.md`):\n1. **Local verification** (default) — verify the receipts/manifests produced by `scripts/build.sh` in your working tree.\n2. **DSSE verification** — verify a DSSE v1 envelope containing an in-toto Statement payload.\n\nSTUNIR also aims to make integrity verification possible in constrained environments. Practically, that means **verification profiles** (see `docs/verification_profiles.md`):\n", "chunk_sha256": "3db91fd8dcf368fbeb9a08368fe742f2915e3e3a1d2cf67e85db0d80cc8bac35"}
{"chunk_id": "README.md::chunk::0015", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Profile 1: Full verification (Python)", "text": "### Profile 1: Full verification (Python)\n- Uses the repo’s Python tools.\n- Performs canonicalization checks, receipt integrity checks, IR manifest checks, etc.\n", "chunk_sha256": "926acc3def49015d9f186da22897c5507e192d2a73bf047daccd4151b1cd78b0"}
{"chunk_id": "README.md::chunk::0016", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Profile 2: Portable verifier binary (no Python)", "text": "### Profile 2: Portable verifier binary (no Python)\n- A single `stunir-verify` executable (concept) that verifies `root_attestation.dcbor` and referenced objects.\n- Intended for environments that allow running a standalone binary but prohibit Python.\n", "chunk_sha256": "f99f1380d949f2986734f82dd1b86d2e9973bc5830bf829b6c164a026de1c5ce"}
{"chunk_id": "README.md::chunk::0017", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Profile 3: Minimal verification (no Python, no custom binaries)", "text": "### Profile 3: Minimal verification (no Python, no custom binaries)\n- Uses `root_attestation.txt` and OS-provided hashing tools.\n- Intended for environments that forbid Python and forbid installing custom binaries.\n\nScripts provided:\n- `scripts/verify_minimal.sh`\n- `scripts/verify_minimal.ps1`\n- `scripts/verify_minimal.cmd`\n", "chunk_sha256": "b708d675ca258d4263da5291e5f8b7b29c9732fa66faf7155debea47ff7de1d5"}
{"chunk_id": "README.md::chunk::0018", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Mechanics (how this repo works)", "text": "## Mechanics (how this repo works)\nThis section is intentionally concrete. If you want to understand “how STUNIR works”, start with `scripts/build.sh`.\n", "chunk_sha256": "21984f12dc36a071b77d939c33ebeeaba7c806d89a6f1fdb29822d272625a431"}
{"chunk_id": "README.md::chunk::0019", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Determinism baseline", "text": "### Determinism baseline\n`scripts/build.sh` sets determinism-oriented defaults:\n- `LC_ALL=C`, `LANG=C`, `TZ=UTC`\n- `PYTHONHASHSEED=0`\n- `umask 022`\n", "chunk_sha256": "c964ec0efaad7c7b9de905dd7aaa503a040a7a5abca60ae35539e2587e3b497d"}
{"chunk_id": "README.md::chunk::0020", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Epoch selection", "text": "### Epoch selection\n`tools/epoch.py` chooses a single `selected_epoch` in priority order:\n1. `STUNIR_BUILD_EPOCH`\n2. `SOURCE_DATE_EPOCH`\n3. `GIT_COMMIT_EPOCH` (derived from `git log -1 --format=%ct` when available)\n4. else `CURRENT_TIME`\n\nThe choice is written to `build/epoch.json`. In strict mode, `scripts/build.sh` can forbid `CURRENT_TIME` (see `STUNIR_REQUIRE_DETERMINISTIC_EPOCH`).\n", "chunk_sha256": "6243fa81c31fd37a65ec65580da3e756bd80940caa94be228007b6c99868ffb1"}
{"chunk_id": "README.md::chunk::0021", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "IR emission (current)", "text": "### IR emission (current)\nThis repo currently emits IR in two complementary forms:\n\n1. **IR summary**: `asm/spec_ir.txt` via `tools/spec_to_ir.py`\n- a deterministic manifest-style summary of spec JSON files (file + sha256 + optional id/name)\n\n2. **Normalized IR files**: `asm/ir/**.dcbor` via `tools/spec_to_ir_files.py`\n- each `spec/**.json` is normalized into deterministic CBOR bytes (dCBOR-style map ordering)\n- the encoder uses canonical map key ordering and a configurable float policy\n- a manifest `receipts/ir_manifest.json` is written containing sha256 for each IR file (and epoch metadata when available)\n- optional bundle output: `asm/ir_bundle.bin` with `receipts/ir_bundle_manifest.json`\n", "chunk_sha256": "399b3dbe5a9fde8caa28b47acc4c159d80dd5831becaecdbc306e783e438a5fd"}
{"chunk_id": "README.md::chunk::0022", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "dCBOR float policy", "text": "#### dCBOR float policy\n`tools/dcbor.py` supports an explicit float encoding policy enum. This matters because floats can have multiple valid CBOR encodings.\n\nPolicies:\n- `forbid_floats` — reject any float values.\n- `float64_fixed` — encode floats always as IEEE-754 float64 (deterministic, not \"shortest form\").\n- `dcbor_shortest` — dCBOR-style numeric reduction and shortest-width float encoding.\n\nConfiguration:\n- Environment: `STUNIR_CBOR_FLOAT_POLICY` (default: `float64_fixed`)\n- CLI: `tools/spec_to_ir_files.py --float-policy ` (overrides env)\n\nNote: In `dcbor_shortest`, numeric reduction means values like `1.0` encode as the integer `1`, and both `0.0` and `-0.0` encode as integer `0` (consistent with the dCBOR draft rules for negative zero and integer reduction).\n", "chunk_sha256": "edd41063321f1312e63fbc9fd3e593115035cef48f8b513bbac6a434467030da"}
{"chunk_id": "README.md::chunk::0023", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Provenance commitment", "text": "### Provenance commitment\nAfter IR emission, `tools/gen_provenance.py` computes deterministic digests of directories:\n- `spec_digest` = sha256 over sorted `(relpath + bytes)` traversal of `spec/`\n- `asm_digest` = sha256 over sorted `(relpath + bytes)` traversal of `asm/`\n\nIt writes:\n- `build/provenance.json`\n- `build/provenance.h` (tiny header used by runtime tooling)\n", "chunk_sha256": "790b8804a96c74e2e07b657570bcf83196442341637773ac2fc9bdd55decce93"}
{"chunk_id": "README.md::chunk::0024", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Receipt emission", "text": "### Receipt emission\n`tools/record_receipt.py` writes machine-checkable receipts that bind:\n- target path + sha256\n- build epoch + epoch manifest\n- input files and directory digests\n- tool identity (path + sha256) and argv\n\nIt also computes `receipt_core_id_sha256`, intended to exclude platform noise so receipts are stable.\n", "chunk_sha256": "a4d2572a424e78ffdf38b91b1602fbb4162f73ea050d62c765c874475a5ca157"}
{"chunk_id": "README.md::chunk::0025", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Optional native tool build", "text": "### Optional native tool build\nIf a C compiler exists, `scripts/build.sh` builds `tools/prov_emit.c` into `bin/prov_emit` and records a receipt.\n\nIf the toolchain is missing, a receipt still records the skip/requirement status.\n", "chunk_sha256": "fc6fc278d761967548fd70108abdb0f0e33f672c3fda6effdf2e9185005fa9c7"}
{"chunk_id": "README.md::chunk::0026", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Verification (small checker)", "text": "### Verification (small checker)\n`scripts/verify.sh` runs:\n- `python3 -B tools/verify_build.py --repo . --strict`\n\n`tools/verify_build.py` verifies, when present:\n- `build/provenance.json` matches recomputed digests of `spec/` and `asm/`\n- `build/provenance.h` is reproducible\n- `receipts/spec_ir.json` sha256 matches `asm/spec_ir.txt`\n- `receipts/ir_manifest.json` matches the `asm/ir/**.dcbor` set and sha256s (exact set in `--strict` mode)\n- `receipts/prov_emit.json` sha256 matches `bin/prov_emit` when status is `BINARY_EMITTED`\n- receipt epochs match `build/epoch.json`\n", "chunk_sha256": "458fececd134d6de68b334b4befbb61d68d38e85ade3eb75ec7dc790dddd8e7b"}
{"chunk_id": "README.md::chunk::0027", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Pipeline (conceptual)", "text": "## Pipeline (conceptual)\nInputs:\n- **Spec** (human-authored)\n- **STUNIR Pack** (this repository + its deterministic tooling)\n- **Build Epoch** (explicit time pin / determinism control)\n- **Target Selection** (what to generate)\n\nOutputs:\n- **IR commitment** (canonical, hash-addressed meaning)\n- **Artifacts** (hosted runtimes, compiled runtimes, raw language modules)\n- **Receipts** (proof bundle binding inputs → tools → outputs)\n", "chunk_sha256": "2f0081972dc769342427eac95458690fec8f667145b7490b4c397276ef4e2a41"}
{"chunk_id": "README.md::chunk::0028", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Output taxonomy (stable even as language support grows)", "text": "## Output taxonomy (stable even as language support grows)\nInstead of maintaining a brittle “list of languages,” STUNIR describes outputs by **execution mode** and **role**.\n", "chunk_sha256": "b5905bc29f14f8cd024c4317abbd4d5fa347b70eaab3ad4c0d554537350da6b8"}
{"chunk_id": "README.md::chunk::0029", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Execution modes", "text": "### Execution modes\n", "chunk_sha256": "ff70c77ba79f944bf397fb0ad2f2188fabeecd2007ab8f334da6d34b697f3a1a"}
{"chunk_id": "README.md::chunk::0030", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "1) Hosted runtimes (mass-market)", "text": "#### 1) Hosted runtimes (mass-market)\nA **hosted runtime** output is a complete runnable project whose execution engine is an existing runtime/VM already present in the environment.\n\nIf the host runtime is installed, this output functions like an “assembled runtime.”\n\nExamples:\n- Python\n- Node.js\n- JVM\n- .NET\n- Ruby\n- PHP\n\nReceipt expectations (hosted):\n- host runtime fingerprint (name/version/platform)\n- dependency closure digest (lockfile/resolved set)\n- entrypoint + generated sources digests\n- determinism controls (epoch, env guards)\n", "chunk_sha256": "6ba96a0db482e10ad336bedce89cb20ad10c8a504008bcf8265cfecea4739bce"}
{"chunk_id": "README.md::chunk::0031", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "2) Compiled runtimes (direct-to-environment)", "text": "#### 2) Compiled runtimes (direct-to-environment)\nA **compiled runtime** output produces a low-level artifact intended for execution without a language VM (or via a minimal platform runtime like a WASM engine).\n\nExamples:\n- Assembly (default) → native artifacts via assembler/linker\n- WASM → portable modules (optionally WASI)\n\nReceipt expectations (compiled):\n- toolchain identity (assembler/linker/compiler) + flags\n- target ABI/triple + platform assumptions\n- produced artifact hashes\n", "chunk_sha256": "45c3d8aa9e41de1143d75edaa7c2d9e4326c1fef22e20460155bc82a8a2b4e12"}
{"chunk_id": "README.md::chunk::0032", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "3) Raw outputs (language artifacts)", "text": "#### 3) Raw outputs (language artifacts)\nA **raw output** is a language-facing artifact intended for interoperability, embedding, verification, or downstream compilation.\n\nRaw outputs may be:\n- general-purpose source (e.g., C variants, Rust, Go, Haskell, Erlang/Elixir, Lisp)\n- logic/constraint modules (e.g., Prolog, Datalog, ASP, MiniZinc)\n- proof/safety gate inputs (e.g., SMT-LIB)\n\nReceipt expectations (solver/prover-backed raw modules):\n- solver identity + flags + determinism settings (threads/seed)\n- input module hash + data hash\n- output certificate/model/trace hash (when available)\n", "chunk_sha256": "42e60cc33c330018e3e8a8c051ba53f51e0bc8db9c617d35449e08a995443be4"}
{"chunk_id": "README.md::chunk::0033", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Roles (how a target is used)", "text": "### Roles (how a target is used)\nA single language can appear in multiple roles depending on how STUNIR uses it.\n- **Host Runtime Role** (Python/Node/JVM/.NET/Ruby/PHP)\n  - the language runtime/VM is the execution engine\n- **Backend Compiler Role** (C/Rust/Go/Haskell/Erlang/Elixir/…)\n  - the language toolchain produces a distributable runtime (native/WASM/BEAM/etc.)\n- **Logic/Constraint Role** (Datalog/ASP/MiniZinc/Prolog)\n  - the artifact expresses rules/constraints/search, executed by an embedded engine or a pinned external solver\n- **Proof/Safety Gate Role** (SMT)\n  - the artifact proves/checks properties; outputs are pass/fail plus checkable side artifacts when available\n", "chunk_sha256": "9e722e7dab7f68bbbd02de3b5dcfbc93680e5e6b97444f7d66d94775c2343108"}
{"chunk_id": "README.md::chunk::0034", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Promotion workflow (staging → compiled distribution)", "text": "## Promotion workflow (staging → compiled distribution)\nSTUNIR supports a partner-friendly two-stage deployment model:\n\n1) **Stage using hosted runtimes** (fast iteration)\n- generate a hosted runtime project (e.g., Python/Node)\n- partners integrate and test live on their preferred hosting platform\n\n2) **Promote to compiled runtimes** (broad distribution)\n- promote from the same IR commitment\n- generate compiled deliverables (Assembly/WASM) for target machines\n- ship artifacts together with receipts for verification and replay\n", "chunk_sha256": "386f3ae878b92d37cfc278bb8dc67a0c036371a701d097f02841086f31c4f955"}
{"chunk_id": "README.md::chunk::0035", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Live modification policy (important)", "text": "### Live modification policy (important)\nIf a partner modifies hosted runtime code during staging, treat that change as either:\n- a **receipt-tracked input** (overlay/patch/spec update that becomes part of spec/IR inputs), or\n- a **local experiment** (not expected to match promoted compiled outputs until reconciled)\n\nSTUNIR does not attempt to “own” what happens beyond the point where deterministic verification completes.\n", "chunk_sha256": "220c9c68aea3d6141603cea4063470645938b9aeb14c5b5287d838df99811a95"}
{"chunk_id": "README.md::chunk::0036", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Receipts: what they are supposed to prove", "text": "## Receipts: what they are supposed to prove\nA receipt bundle is meant to make the generation pipeline **checkable by a small deterministic verifier**.\n\nAt minimum, receipts should bind:\n- the **exact inputs** (spec + pack + target selection + epoch)\n- the **exact tools** used (versions, digests, flags)\n- the **exact outputs** (artifact hashes)\n\nStronger receipt bundles may additionally include:\n- canonicalization traces\n- solver/prover side artifacts (models, unsat cores, certificates)\n- deterministic replay logs\n\nA verifier should be able to recompute commitments and confirm that the receipt bundle matches, without trusting a model.\n", "chunk_sha256": "d30ca287d6cbaadcb83e6f26e27fdc776bac0dc3af8ce284ac7a1b34cadf7b52"}
{"chunk_id": "README.md::chunk::0037", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Integration contract (for orchestrators)", "text": "## Integration contract (for orchestrators)\nSTUNIR is intended to be called by an orchestrator (often a model under constraints) that:\n- provides a spec\n- selects targets\n- ensures determinism inputs (epoch / environment constraints)\n- triggers deterministic generation and deterministic verification\n\nThe orchestrator is responsible for:\n- ensuring the STUNIR pack itself is pinned by digest\n- ensuring tool invocations are policy-compliant (e.g., single-threaded, pinned versions)\n\nSTUNIR is responsible for:\n- canonical IR generation\n- artifact generation\n- receipt emission\n- deterministic verification outputs\n", "chunk_sha256": "c1e0ba624ecb4ea2e02336f2ffd11d2bbfca9d3658b22d8b371d1548be1094b4"}
{"chunk_id": "README.md::chunk::0038", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Repository conventions", "text": "## Repository conventions\nThis repository may evolve, but STUNIR packs typically include:\n- `spec/` — example or reference specs (optional)\n- `tools/` — deterministic compilers/normalizers/receipt emitters\n- `receipts/` — receipt schema, examples, and emitted receipt bundles\n- `build/` — build outputs and intermediate commitments\n- `asm/` / `wasm/` — compiled runtime outputs (when applicable)\n- `schemas/` — JSON Schema / format definitions for targets, receipts, and IR\n", "chunk_sha256": "06546420f50a6c7ae6d0205f2c50b8da686585a24f076302299bf6a0f3d4124f"}
{"chunk_id": "README.md::chunk::0039", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Design principles", "text": "## Design principles\n- **Determinism-first**: outputs must be reproducible under the same inputs.\n- **Canonical meaning**: IR has a unique normal form suitable for hashing and equivalence.\n- **Small verifiers**: verification should be simpler than generation.\n- **Models are untrusted**: models can propose; tools commit.\n- **Extensible targets**: add languages by declaring mode + role, not by rewriting the worldview.\n", "chunk_sha256": "06919eef6bb49ac73a845d78eb1e323aa12294a389b135774084fc3bbea928c6"}
{"chunk_id": "README.md::chunk::0040", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Target descriptor (optional)", "text": "## Target descriptor (optional)\nTo avoid hardcoding language lists, targets can be described with a small descriptor object.\n\nAt minimum:\n- `mode`: `hosted | compiled | raw`\n- `role`: `host_runtime | backend_compiler | logic_constraint | proof_safety`\n\n(See `schemas/` in this repo if present.)\n", "chunk_sha256": "f3a98711f3c68fa32e0c21b94c8465f6896beda7e29af248a700e6f2bc7d9994"}
{"chunk_id": "README.md::chunk::0041", "path": "README.md", "source_git_sha": "4ae88f72e112b6cd9c42660cecfbf0beb94ce779", "heading": "Editing policy (do not delete meaning)", "text": "## Editing policy (do not delete meaning)\nThis README is part of the harness contract. When updating it:\n- do not silently delete naming/rationale/mechanics sections\n- prefer additive edits or explicit deprecations\n- if content is superseded, mark it as such rather than removing it\n", "chunk_sha256": "f3044170eb44a09097a54e02fc4a1d2f31a4f65409a717fe48d8d9683f0607ed"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0000", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "99644462d5743f3725dbe778e682fca91cb0c238", "heading": "STUNIR_REFERENCE_AUDIT", "text": "# STUNIR_REFERENCE_AUDIT\n\nRepo: `emstar-en/STUNIR`\nBranch: `main`\nGenerated: `2025-12-24T04:30:25Z`\n", "chunk_sha256": "f3d6b89a84a5ade99565947c69214ffa0a0b125a99fea59893cb14783df2b14d"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0001", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "99644462d5743f3725dbe778e682fca91cb0c238", "heading": "Summary", "text": "## Summary\n\n- Markdown files scanned: **19**\n- Total repo files indexed: **123**\n- Broken repo-relative links: **0**\n- Suspicious links (placeholder targets): **0**\n", "chunk_sha256": "2dbbd6551071df54c304878ec156989883482ec902e003ba7b8accef9088d46d"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0002", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "99644462d5743f3725dbe778e682fca91cb0c238", "heading": "Placeholder-ish targets", "text": "## Placeholder-ish targets\n\n- `asm/README.txt`\n- `spec/README.txt`\n", "chunk_sha256": "ab586a2c4dfab9c0f547ac8bf7090232894c3fcaacdfdd2bf0f2cf3b28ab3d80"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0003", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "99644462d5743f3725dbe778e682fca91cb0c238", "heading": "Broken repo-relative links", "text": "## Broken repo-relative links\n\nNo broken repo-relative links were detected in the scanned markdown set.\n", "chunk_sha256": "5b0f432abdd074f7d8b3ad0b931028e97a8b22132fc242236d1b4693a53be256"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0004", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "99644462d5743f3725dbe778e682fca91cb0c238", "heading": "Suspicious links", "text": "## Suspicious links\n\nNo suspicious links were detected.\n", "chunk_sha256": "4ef55466eb47cd3ec71716211d6450db6768e3f0a48a5a7742a018976fdc3871"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0005", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "99644462d5743f3725dbe778e682fca91cb0c238", "heading": "Recommended actions", "text": "## Recommended actions\n\n1. Add `AI_START_HERE.md` at repo root.\n2. Ensure `ENTRYPOINT.md` links to `AI_START_HERE.md`.\n3. Ensure placeholder READMEs link back to `ENTRYPOINT.md` (and optionally `AI_START_HERE.md`).\n4. Normalize markdown links to be repo-relative.\n", "chunk_sha256": "ed5bec9e6a05bc15903b9b5e1b51dc64f6ac12baf97dba6c4c8b8bb5fa69acf3"}
{"chunk_id": "STUNIR_REFERENCE_RULES.md::chunk::0000", "path": "STUNIR_REFERENCE_RULES.md", "source_git_sha": "f83de3d321124c4baa7b86c65d813ec69a64d4ff", "heading": "STUNIR_REFERENCE_RULES", "text": "# STUNIR_REFERENCE_RULES\n\nThis file describes how repository documents should reference other repository documents.\nIt is intended to reduce navigation ambiguity for humans and AI agents.\n", "chunk_sha256": "9f7d4a54aa48999344d4047694436feab5b86b4f5b457f3dc00eba6975ebf2d3"}
{"chunk_id": "STUNIR_REFERENCE_RULES.md::chunk::0001", "path": "STUNIR_REFERENCE_RULES.md", "source_git_sha": "f83de3d321124c4baa7b86c65d813ec69a64d4ff", "heading": "Rules", "text": "## Rules\n\n1. Use repo-relative paths in markdown links.\n2. Do not link to per-run output artifacts under `build/` and `receipts/` unless referencing fixtures.\n3. If a directory is referenced, prefer an explicit `README.md` target.\n4. Avoid placeholder READMEs that have no outbound references; they should point back to `ENTRYPOINT.md` and `AI_START_HERE.md`.\n5. Keep at least one stable root entrypoint (`ENTRYPOINT.md`) and one stable navigation index (`AI_START_HERE.md`).\n", "chunk_sha256": "7848d890fe4a33e3214e3ebab48b72934ea0a5500249133baa5b554b7b37d308"}
{"chunk_id": "STUNIR_REFERENCE_RULES.md::chunk::0002", "path": "STUNIR_REFERENCE_RULES.md", "source_git_sha": "f83de3d321124c4baa7b86c65d813ec69a64d4ff", "heading": "Recommended minimum cross-links", "text": "## Recommended minimum cross-links\n\n- `ENTRYPOINT.md` should link to `AI_START_HERE.md`.\n- Placeholder files should link back to `ENTRYPOINT.md`.\n", "chunk_sha256": "02ecd888ad265e95f4d6fd4a31ffbf8ee3fdcb4f5dbdf7fe524c3d732b3d62c4"}
{"chunk_id": "docs/bundle_A_notes.md::chunk::0000", "path": "docs/bundle_A_notes.md", "source_git_sha": "54a9b529b5c81b0fe1609aab05adf249eab956b7", "heading": "Bundle A: Go / Rust / Java compiled-target contracts", "text": "# Bundle A: Go / Rust / Java compiled-target contracts\n\nThis bundle adds compiled-target contracts and test vectors for:\n\n- Go (`go_toolchain`)\n- Rust (`cargo`)\n- Java (`javac`)\n\nThe contracts are designed to be safe for probing:\n\n- no third-party dependencies\n- no network access required\n- outputs are concrete files whose sha256 can be compared across repeated runs\n\nIf you want a stronger Rust determinism story across machines/paths, the next step is adding path remapping (e.g., `--remap-path-prefix`) via a crate-local config approach.\n", "chunk_sha256": "5acd206d0cbb6f3e7bf6f52df48f0719c3957f86f63932d259c38037b025ef9c"}
{"chunk_id": "docs/bundle_B_notes.md::chunk::0000", "path": "docs/bundle_B_notes.md", "source_git_sha": "7d1e37801d34a9eaa5001cda6b4bef2fff631431", "heading": "Bundle B: Hosted runtime breadth (Lua/Ruby/PHP/R/Julia)", "text": "# Bundle B: Hosted runtime breadth (Lua/Ruby/PHP/R/Julia)\n\nThis bundle adds hosted-runtime contracts + deterministic test vectors for:\n\n- Lua (`lua_runtime`)\n- Ruby (`ruby_runtime`)\n- PHP (`php_runtime`)\n- R (`r_runtime` via `Rscript`)\n- Julia (`julia_runtime`)\n\nAll probes are designed to be safe:\n\n- no network access\n- no third-party dependencies\n- deterministic output artifacts (file digests compared across repeated runs)\n\nIf you later want package-manager coverage (e.g., `bundler`, `composer`, `renv`, `Pkg`), add them as separate optional contracts so policy can require them per target.\n", "chunk_sha256": "a333d8b72676e0e1a39b8ddbaba4fda11b6fee044872f16d756a01d28cf76fd4"}
{"chunk_id": "docs/bundle_C_notes.md::chunk::0000", "path": "docs/bundle_C_notes.md", "source_git_sha": "df58a8a072d333eb5f72bd2b538ebbdb11b56c7f", "heading": "Bundle C: Solver/5GL targets + stdout/stderr output artifacts", "text": "# Bundle C: Solver/5GL targets + stdout/stderr output artifacts\n\nThis bundle does two things:\n\n1) Extends `tools/probe_dependency.py` so dependency probes can treat **stdout/stderr as output artifacts**.\n\n- In any contract test, set `outputs` to include `@stdout` and/or `@stderr`.\n- These pseudo-outputs are hashed exactly like file outputs (sha256 of the stream bytes).\n\nAlso adds invariant types usable in contract tests:\n\n- `stdout_nonempty`, `stdout_empty`\n- `stderr_nonempty`, `stderr_empty`\n\n2) Adds three solver-oriented contracts + test vectors:\n\n- `z3_solver` (SMT)\n- `clingo` (ASP)\n- `minizinc` (constraint modeling)\n\nTargets:\n\n- `smt` → Z3\n- `asp` → clingo\n- `minizinc` → MiniZinc\n\nNote: These contracts intentionally avoid downloads/installs and use tiny, no-deps test vectors.\n", "chunk_sha256": "ff68f4a20d403c60e2759da488d8cf6d5ae57ad57e989903e274de23ae6899f5"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0000", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "STUNIR Dead-End Handling Contract (DEHC) v1", "text": "# STUNIR Dead-End Handling Contract (DEHC) v1\n\nSTUNIR is determinism-first: models can propose, but deterministic tooling must be the sole producer of commitments.\n\nThis document defines a general rule for \"dead ends\" encountered during deterministic builds, canonicalization, packing, verification, or toolchain probing.\n", "chunk_sha256": "df2a1c6616487653bf36bc8e19d6d0079af6e273722ab5b748a323e471f6d6d4"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0001", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Core rule", "text": "## Core rule\n**If there exists a deterministic, attestable way to proceed, STUNIR should allow it.**\n\nCorollaries:\n- **No silent meaning changes.** If proceeding requires changing semantics, it must be explicit and attestable.\n- **No silent policy weakening.** If proceeding requires relaxing a policy, that relaxation must be explicit and attestable.\n- **Prefer deterministic tool-driven selection over model-driven search.**\n", "chunk_sha256": "610a4db40a72f276c297415019c813062d01cd8be8b71ada63273a9622552317"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0002", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Definitions", "text": "## Definitions\n- **Dead end:** A build step cannot complete under the requested policy/constraints (e.g., tool missing; policy forbids an input feature; representation edge).\n- **Resolution path:** A well-defined alternative that permits progress.\n- **Attestable:** The choice of resolution is recorded in receipts/manifests so that a verifier can confirm what happened.\n- **Semantic class:** Whether the resolution preserves meaning or changes it.\n", "chunk_sha256": "49d46dce2882e8de90605eb3241b63af7f844d56a259a9f05b985b89d5089adc"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0003", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Resolution ladder (preferred order)", "text": "## Resolution ladder (preferred order)\nWhen a dead end occurs, STUNIR should choose (or require the orchestrator to choose) a resolution from this ladder.\n", "chunk_sha256": "668a9f668d616c8d58a7f5db28ff467e42d52cf3338bc120980e2985c1d5e926"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0004", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R1 — Same meaning, different representation (preferred)", "text": "### R1 — Same meaning, different representation (preferred)\nProceed by selecting an alternative representation that preserves the intended meaning.\n\nExamples:\n- Encoding policy change that preserves the same JSON object model (e.g., `dcbor_shortest` → `float64_fixed`).\n- Switching a canonicalization format that is proven equivalent (e.g., two encodings of the same root attestation).\n", "chunk_sha256": "8d269fccc7b0e8a3264921334bd73242bd3e66ed7d51ad9078d3d01aa2d5e6e6"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0005", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R2 — Deterministic auto-selection (tool-driven)", "text": "### R2 — Deterministic auto-selection (tool-driven)\nProceed by selecting from a set of allowed representations using a deterministic rule derived solely from:\n- the inputs (bytes)\n- the declared build policy\n- the tool version / tool digest\n\nThe decision rule itself must be stable and verifiable.\n", "chunk_sha256": "479992b0690a4e61ce30bba29cf869ced8a87e42e3df7232ae5b08b9ea78de1a"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0006", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R3 — Explicit semantic downgrade (allowed, but must be labeled)", "text": "### R3 — Explicit semantic downgrade (allowed, but must be labeled)\nProceed by switching to a less-structured meaning.\n\nExample:\n- \"Treat this file as opaque bytes\" instead of \"parse JSON and canonicalize\".\n\nThis is **allowed only** when it is:\n- explicitly requested (flag/policy)\n- clearly labeled in the manifest/receipt\n- bound by digest so verifiers can reproduce it\n", "chunk_sha256": "09efe46fca3109e5d1e66fbc23ee7311c13a1c094a2ce0cc2e3142ad52be2f32"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0007", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R4 — Refuse (hard fail)", "text": "### R4 — Refuse (hard fail)\nIf no deterministic, attestable resolution exists within policy, the step must fail.\n", "chunk_sha256": "90e9c9992c2fee0b042a2024150c8af36e9f1f20fad3ac3236deefa5089c1598"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0008", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "What must be attested", "text": "## What must be attested\nWhenever a resolution is used (R1–R3), emit a **Decision Record** (machine-readable) and bind it in receipts.\n\nA Decision Record MUST capture:\n- **schema/version** of the Decision Record\n- **step** (what operation was being performed)\n- **requested** mode/policy\n- **selected** mode/policy\n- **resolution_class** (`R1 | R2 | R3`)\n- **reason_code** (stable enum)\n- **inputs_digest** (what the decision was based on)\n- **tool_identity** (path + sha256 digest, and optionally version output)\n- **constraints** (e.g., verification profile, determinism toggles)\n\nA Decision Record SHOULD capture:\n- **rejection evidence** for the losing option(s) (e.g., error code/message hash)\n- **deterministic decision rule id** (for R2)\n", "chunk_sha256": "b380faaab4702e72de757985ecccb23f4302824d6c0edd7563d6648da1022bdc"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0009", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Stable reason codes", "text": "## Stable reason codes\nReason codes should be stable, short, and machine-checkable.\n\nSuggested core codes:\n- `POLICY_FORBIDS_FEATURE`\n- `ENCODING_RANGE_LIMIT`\n- `TOOLCHAIN_MISSING`\n- `TOOLCHAIN_NONDETERMINISTIC`\n- `PROFILE_CONSTRAINT`\n- `INPUT_PARSE_FAILED`\n- `EQUIVALENCE_UNAVAILABLE`\n", "chunk_sha256": "5fabec3b8e88e294bfb7ac7ecb3b35da1f4bd417fcef8e1ad0c38b521d78c565"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0010", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Verifier expectations", "text": "## Verifier expectations\nA verifier SHOULD be able to:\n- recompute digests of inputs used in the decision\n- check that the selected mode/policy matches the emitted artifacts\n- confirm that the decision is consistent with the declared build policy\n\nIf a verifier cannot validate the equivalence claim (e.g., R1 equivalence not proven in that profile), it must treat the decision as:\n- either **not acceptable** under that verification profile, or\n- acceptable only if an explicit policy allows it\n", "chunk_sha256": "dd8e1cbb69e9626866369e0a31c40e9cbf89a3652435a3c3019cd02661c60f69"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0011", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Guidance for tool authors", "text": "## Guidance for tool authors\n", "chunk_sha256": "f4ab7f59d45f6b49f7860869b1881db3d271de430c83030d6f2e92df7f0dc506"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0012", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Strict-by-default with explicit escape hatches", "text": "### Strict-by-default with explicit escape hatches\nTool behavior should follow this pattern:\n\n1) **Reject on policy violations** (default).\n2) **Provide explicit, attestable alternatives** (flags/policies) for R1–R3.\n3) **Avoid catch-all fallbacks** that turn errors into different semantics.\n", "chunk_sha256": "c7a1fe7f2e0c9d0cfab71726df3c26e9e3e84944ded97026694739c25d4e3bf5"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0013", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Example: IR emission for JSON specs", "text": "### Example: IR emission for JSON specs\nRecommended behavior for a JSON→IR normalizer:\n- If JSON decoding fails: allow explicit \"opaque bytes\" mode (R3) OR fail.\n- If JSON decoding succeeds but canonicalization/encoding fails: fail by default, or allow a deterministic R1/R2 alternative.\n", "chunk_sha256": "55644459110abc1e81d5b55c8f4f63d54f6e02b5c9a2bf9e5dab1a47f638dfdc"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0014", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Example: float policy in deterministic CBOR", "text": "### Example: float policy in deterministic CBOR\n- `forbid_floats`: hard fail if floats are present.\n- `dcbor_shortest`: if numeric reduction would require an integer outside CBOR int/uint range, do **not** fail; encode as float (R1) and attest the reason (`ENCODING_RANGE_LIMIT`) if you want this surfaced.\n- `float64_fixed`: deterministic baseline.\n", "chunk_sha256": "76541a1e80f1594d5a6666e5129242e231598e038db5ac02263f053985bd34ce"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0015", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Orchestrator guidance (models as planners)", "text": "## Orchestrator guidance (models as planners)\nOrchestrators may attempt multiple plans, but STUNIR prefers that fallback behavior be:\n- tool-defined (deterministic), or\n- explicitly user-policy-defined\n\nIf orchestrators do perform retries, they SHOULD:\n- record failure receipts (optional but recommended)\n- ensure the final successful build is fully receipt-bound\n", "chunk_sha256": "fd38c75a528174258952871db28314c8a743dccd529eccb0bb593f39d208b82a"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0016", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Relationship to packs", "text": "## Relationship to packs\nWhen decisions affect pack contents (e.g., which root attestation encoding is included), the Decision Record MUST be included in the pack inventory so that offline verifiers can explain and validate the path taken.\n", "chunk_sha256": "d2ad8114a78ee84fc1bee15150987f99e744c18e019fd385c0fa9d17c0e10210"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0017", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Compatibility and evolution", "text": "## Compatibility and evolution\n- This contract is additive: new reason codes and optional fields may be introduced.\n- Breaking changes require a schema version bump.\n", "chunk_sha256": "e8524d6e1fd053c87c70d1e7f0dbb4489b79d78374dd7328c7545ea3a40018d2"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0000", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "Receipt storage policy (STUNIR)", "text": "# Receipt storage policy (STUNIR)\n\nSTUNIR emits receipts as **build artifacts**.\n\nBy default, receipts are **not committed**; they are generated, verified, and then treated as per-run outputs (e.g., attached to an artifact/release, or retained locally).\n\nIf a user requests a preserved copy, the orchestrator should offer two commit modes:\n\n- **Snapshot**: copy the current run’s `receipts/` (and typically `build/`) into `fixtures/receipts/<TAG>/` so humans can review/diff/audit what happened.\n- **Golden fixture**: like snapshot, but additionally treated as a regression baseline that CI may compare against under a controlled environment.\n\nThis policy does **not** alter STUNIR’s internal “no versions” conventions. STUNIR outputs (artifacts/receipts) are versioned according to the **spec’s** own versioning rules.\n\nImplementation helper:\n\n- Use `scripts/snapshot_receipts.sh` to create snapshots.\n", "chunk_sha256": "f036bdd63c619f5fa2fec5a28f1870efadc6f5cffe276721ee14413cc1e2a328"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0001", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "Verifying a snapshot later", "text": "## Verifying a snapshot later\n\nA snapshot is only meaningful when verified against the **same repo state** (same commit) and outputs rebuilt with the **same epoch**.\n\nA practical workflow:\n\n```bash\n", "chunk_sha256": "479a2674be11cee6089f41048eb2536190280a878449186bcac00d8dca7ee0a2"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0002", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "1) Checkout the commit that produced the snapshot.", "text": "# 1) Checkout the commit that produced the snapshot.\n", "chunk_sha256": "0ccbb035bf7d46abfca0393dc1ea42ecfbec27ca343bf5d2333123d432c3b08f"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0003", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "2) Restore the snapshot epoch", "text": "# 2) Restore the snapshot epoch\ncp fixtures/receipts/<TAG>/build/epoch.json build/epoch.json\n", "chunk_sha256": "7dd2cfa1e7d618c60afb32800c13bd7bb7c358a80e1485924895fea4c038ff05"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0004", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "3) Rebuild outputs using that epoch (but don't auto-verify using current receipts/)", "text": "# 3) Rebuild outputs using that epoch (but don't auto-verify using current receipts/)\nSTUNIR_PRESERVE_EPOCH=1 STUNIR_VERIFY_AFTER_BUILD=0 ./scripts/build.sh\n", "chunk_sha256": "abfd9e5246a59c4956152f0c892050aef18bd2f3d28d9aafb5d850279d8430a3"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0005", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "4) Verify the snapshot receipts against the rebuilt outputs", "text": "# 4) Verify the snapshot receipts against the rebuilt outputs\n./scripts/verify.sh --root fixtures/receipts/<TAG>\n```\n", "chunk_sha256": "963b612600d3753bb628060c0dcd28f2f9442ff9fdc37dcb7bba26408e35fbb9"}
{"chunk_id": "docs/relayout_report.md::chunk::0000", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "Repo relayout report (generated)", "text": "# Repo relayout report (generated)\n\nGoal: ensure that visible root-level files are human-facing documentation, while keeping CI paths working.\n", "chunk_sha256": "9fa5fae8467283a541adbb3ffe66e1332d1a095206bd6ff863c465fa4fd1f432"}
{"chunk_id": "docs/relayout_report.md::chunk::0001", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "Moves performed", "text": "## Moves performed\n- `ENTRYPOINT.md` → `docs/root/ENTRYPOINT.md`\n- `stunir_pack_archiving_v0.md` → `docs/root/stunir_pack_archiving_v0.md`\n- `stunir_pack_manifest_v0.md` → `docs/root/stunir_pack_manifest_v0.md`\n- `stunir_pack_materialization_v0.md` → `docs/root/stunir_pack_materialization_v0.md`\n- `stunir_pack_root_attestation_text_v0.md` → `docs/root/stunir_pack_root_attestation_text_v0.md`\n- `stunir_pack_root_attestation_v0.md` → `docs/root/stunir_pack_root_attestation_v0.md`\n- `stunir_pack_security_v0.md` → `docs/root/stunir_pack_security_v0.md`\n- `stunir_pack_spec_v0.md` → `docs/root/stunir_pack_spec_v0.md`\n", "chunk_sha256": "c2527572987056ebd1168607bd7ed1e95e547aa52eadb6e3b4b607d29c7128e1"}
{"chunk_id": "docs/relayout_report.md::chunk::0002", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "Added files", "text": "## Added files\n- `docs/policy/dead_end_handling_contract.md`\n- `schemas/stunir_dead_end_decision_v1.schema.json`\n- `docs/examples/dead_end_decision_example_v1.json`\n", "chunk_sha256": "c8aaf158caec8763108cb58072f299553efecac725956b4924f41c8198659e80"}
{"chunk_id": "docs/relayout_report.md::chunk::0003", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "References updated (best-effort)", "text": "## References updated (best-effort)\n- No reference updates were necessary.\n", "chunk_sha256": "46d990535171f733931e44a307d7829d8b88665239e48e6e569c1b0612173574"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0000", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "STUNIR Pack Entry Point (v0)", "text": "### STUNIR Pack Entry Point (v0)\nThis file is the **first thing** a tool or model SHOULD read when consuming a STUNIR bundle as a STUNIR pack.\n", "chunk_sha256": "53774a21b9ce18a802b06c216f6a9c5c3befd890704d901cb7020f98626366db"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0001", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "1) What to look for", "text": "#### 1) What to look for\nA STUNIR pack is a **deterministic container + commitment** rooted at a directory that contains:\n- `objects/sha256/` (content-addressed blobs, REQUIRED)\n- one of:\n  - `root_attestation.dcbor` (preferred bootstrap, REQUIRED if available), or\n  - `root_attestation.txt` (fallback bootstrap for minimal environments)\n\nIf these are absent, you are not looking at a conforming STUNIR pack.\n\nBack-compat note:\n- A pack MAY additionally include `pack_manifest.dcbor` as a legacy alias.\n", "chunk_sha256": "17b35b0a840e9f3356b75b59ffab36a353abac7c95affdfc4addbdded86f3a77"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0002", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "2) Authority rule (integrity boundary)", "text": "#### 2) Authority rule (integrity boundary)\n- The **root attestation** is authoritative for pack contents.\n- Only blobs referenced by digest in the root attestation are in the integrity boundary.\n- Any file not referenced by digest MUST be ignored for integrity purposes.\n\nBootstrap selection:\n- If `root_attestation.dcbor` is present, consumers SHOULD treat it as authoritative.\n- Otherwise, consumers MAY use `root_attestation.txt`.\n\nDigest mapping rule:\n- For any `sha256:` referenced by the root attestation, the blob bytes MUST exist at `objects/sha256/<hex>`.\n", "chunk_sha256": "13981ca165b5169be79dcdbad5dc2ac4e8410348c8d89d3f84a6fb7f896a1fa0"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0003", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "3) What STUNIR is trying to achieve", "text": "#### 3) What STUNIR is trying to achieve\nSTUNIR aims to turn a human-authored spec into a canonical **Intermediate Reference (IR)** and then (optionally) further derived products, while emitting **attestation artifacts** that bind each step to hashes.\n\nIn v0, the portable audit spine is:\n- upstream **inputs** (often the spec),\n- the canonical **IR**,\n- the **attestation artifact bundle** (step receipts and related evidence),\n- a **root attestation** that inventories and commits to the above.\n\nDownstream runtime outputs (code/binaries/test outputs) are typically **materialized to user-chosen paths** and are not assumed to be baked into the pack.\n", "chunk_sha256": "8bc0d4e5e3ad885560329d4e9be0880b8b61d68ee9e0a0693c2c427be26d4d92"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0004", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "4) Inclusion vs materialization", "text": "#### 4) Inclusion vs materialization\n- **Included** means the exact bytes are stored under `objects/sha256/` and referenced by digest in the root attestation.\n- **Materialized** means bytes are written to some workspace path chosen by the user/model.\n\nPaths are UX; digests define identity.\n", "chunk_sha256": "57a22b7d41c5d87baf0915c88a9eb84d0c6f1652887844a82f75067f4c3b1e8d"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0005", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "5) Minimal verification checklist", "text": "#### 5) Minimal verification checklist\nA verifier MUST:\n1. Decode the root attestation (`root_attestation.dcbor` preferred; else `root_attestation.txt`).\n2. Validate required fields for the chosen encoding.\n3. For every referenced digest, recompute SHA-256 over `objects/sha256/<hex>` and compare.\n4. Confirm there is exactly one IR referenced via `ir.digest`.\n5. Confirm every receipt referenced via `receipts[].digest` exists and matches its digest.\n6. If `inputs` are present, confirm each referenced input exists and matches its digest.\n", "chunk_sha256": "b7ad592fd7042f281d42920c701ef799372ded313d3bde6c9fc96c58050a6f01"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0006", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "6) Where the detailed rules live", "text": "#### 6) Where the detailed rules live\n- Pack overview: `stunir_pack_spec_v0.md`\n- Root attestation (dCBOR): `stunir_pack_root_attestation_v0.md`\n- Root attestation (text fallback): `stunir_pack_root_attestation_text_v0.md`\n- Materialization: `stunir_pack_materialization_v0.md`\n- Deterministic archiving: `stunir_pack_archiving_v0.md`\n- Security considerations: `stunir_pack_security_v0.md`\n", "chunk_sha256": "d49b6bc8fd52ccf90ead6de3937bd69d8d26728ae6898155df4248c576ea21d5"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0007", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "7) Model/agent operating guidance (non-normative)", "text": "#### 7) Model/agent operating guidance (non-normative)\nWhen working interactively:\n- Ask the user what they want to produce (IR only, code, runtime outputs) and where to put materialized files.\n- Treat any requested filesystem destinations as untrusted input.\n- Prefer emitting/retaining attestation artifacts as the portable audit record.\n", "chunk_sha256": "9d4d7a098cf443d9d8848e0ec873fc56e5eabff8f877ec45bcb43c2bf44a9c18"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0000", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "STUNIR Pack v0 — Deterministic Archiving Guidance", "text": "### STUNIR Pack v0 — Deterministic Archiving Guidance\nThis document defines recommendations for producing stable archive bytes for a STUNIR pack directory.\n", "chunk_sha256": "f08dfa0673d90dfac04209b20c7ac78df5dd4c888258bc373d625c6b373dc7aa"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0001", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "1. General requirements", "text": "#### 1. General requirements\nWhen producing an archive from a pack directory:\n- Archive entries MUST be sorted lexicographically by path.\n- Paths MUST be relative (no leading `/`).\n- Paths MUST NOT contain `..` segments.\n- File bytes MUST be identical to the directory representation.\n", "chunk_sha256": "b9884785e6e5b363cd170a6e3c16d5bf12d4f0bd236215ff2feb577fd26a3ed3"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0002", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "2. Zip guidance", "text": "#### 2. Zip guidance\nZip is widely supported but has multiple metadata footguns.\n\nRecommendations:\n- Set every entry’s timestamp to the pack `epoch` (or to 0 if unspecified).\n- Normalize permissions (e.g., `0644` for files, `0755` for dirs) unless permissions are explicitly part of the artifact bytes.\n- Exclude extra fields that capture host metadata.\n- Ensure deterministic compression (or use `STORE` / no compression).\n\nIf you must use a command-line zipper, prefer options that strip extra attributes (tool-dependent).\n", "chunk_sha256": "f0eed9f1df213c69dd2d75f5291f2228856a87b4675409c32f033a58fabf7644"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0003", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "3. Tar guidance (often easier)", "text": "#### 3. Tar guidance (often easier)\nFor deterministic tar:\n- Use a fixed sort order.\n- Set `mtime` to the pack `epoch` for every entry.\n- Set `uid=0`, `gid=0`, `uname=\"\"`, `gname=\"\"`.\n- Avoid PAX headers that leak timestamps.\n- Prefer uncompressed tar for maximal determinism; if compressing, ensure compressor settings are fixed.\n", "chunk_sha256": "f5f36bac2f84919ec0bcb508ebdcc54e7fa121dcd4984a0203c72a3705c41ddc"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0004", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "4. Canonical archive recommendation", "text": "#### 4. Canonical archive recommendation\nIf you need a single normative “canonical archive format” for byte-identical distribution, pick ONE of:\n- uncompressed tar with strict metadata normalization, or\n- zip with STORE and strict metadata normalization.\n\nThen define the canonical archive’s digest as an optional additional artifact in the root attestation (do not replace root-attestation-based verification).\n", "chunk_sha256": "d7f8dd8b4d6749de9c3369b724a95a93bbeb8bc79a2baa4ce1a62bd7d9cbf03e"}
{"chunk_id": "docs/root/stunir_pack_manifest_v0.md::chunk::0000", "path": "docs/root/stunir_pack_manifest_v0.md", "source_git_sha": "4084167d0d4689c2049152af46c72c48beaa64d2", "heading": "STUNIR Pack Manifest v0 \u0014 (Deprecated)", "text": "### STUNIR Pack Manifest v0 \u0014 (Deprecated)\n\nThis document is retained for backwards compatibility with earlier drafts that used `pack_manifest.dcbor` as the bootstrap object.\n\nCurrent v0 direction:\n- The preferred bootstrap object is `root_attestation.dcbor`.\n- A minimal-toolchain fallback is `root_attestation.txt`.\n\nThe canonical schemas are defined in:\n- `stunir_pack_root_attestation_v0.md` (dCBOR)\n- `stunir_pack_root_attestation_text_v0.md` (text)\n\nConsumers SHOULD prefer `root_attestation.dcbor` when present.\n", "chunk_sha256": "20d907795ac1bc2fb31b8ad2b4ec530e110372da64be0348e4797968a379db6d"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0000", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "STUNIR Pack v0 — Materialization (Writing Outputs to User-Chosen Paths)", "text": "### STUNIR Pack v0 — Materialization (Writing Outputs to User-Chosen Paths)\n", "chunk_sha256": "8492dc3f542075bf7fb852ba46664c85ce69ce3331e3ce4dc7710d916623aee6"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0001", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "0. Purpose", "text": "#### 0. Purpose\nThis document clarifies how STUNIR can “go all the way to runtime” while keeping the **pack** deterministic.\n\nKey principle:\n- **Digests define identity. Paths are UX.**\n", "chunk_sha256": "ba82537b61d635f948dd36bd97275ca5e0fb9d8657e81d5ca921755facb9c99c"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0002", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "1. Definitions", "text": "#### 1. Definitions\n- **Included blob:** present under `objects/sha256/` and referenced by the root attestation.\n- **Materialized file:** written into some workspace path chosen by the user/model.\n", "chunk_sha256": "2c356735d20dbc6032d7692478cb492130b2d9b45278f8fc7f318439145cdb92"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0003", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "2. Typical STUNIR usage", "text": "#### 2. Typical STUNIR usage\nSTUNIR commonly:\n- commits to **inputs + IR + attestation artifacts** (portable audit evidence), and\n- materializes downstream outputs to user-chosen paths.\n\nIn many workflows, users keep step receipts as the audit record; auditors who care about inputs (e.g., the spec) will naturally examine upstream artifacts.\n", "chunk_sha256": "bbe5eb17e8b45b9bd8dfa575a98bcd284549079b94455e834621e59158a8ddf5"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0004", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "3. Materialization as a pure operation", "text": "#### 3. Materialization as a pure operation\nGiven a mapping `(digest -> destination_path)`, materialization is:\n1. locate blob bytes by `digest` in the object store,\n2. write exact bytes to `destination_path`.\n\nThis is a pure copy. Any permissions/exec bits are a policy decision and should be recorded in receipts if it matters.\n", "chunk_sha256": "8fcb84f3101cdbf6956eb55c4e438902a0000dac4156712271ef7646813f28ab"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0005", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "4. Recording materialization without contaminating core IDs", "text": "#### 4. Recording materialization without contaminating core IDs\nPaths are often absolute, host-specific, user-specific, or ephemeral.\n\nIf you need auditability, emit a **materialization receipt**:\n- It SHOULD record the list of `(digest, destination_path, mode)`.\n- Its **core identifier** SHOULD be computed from digest lists and normalized policy fields, excluding absolute paths.\n- The full receipt MAY include paths in a non-core section.\n", "chunk_sha256": "ed0d7857d69e41c2c04cd4ea35132e1f2f9bbe99d44aa4a489ae2dfae10ddf91"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0006", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "5. Recommended constraints", "text": "#### 5. Recommended constraints\n- Destination paths MUST be treated as untrusted input.\n- Tools MUST prevent path traversal when materializing from an archive.\n- If a pack is used as input to execution, do not implicitly execute included artifacts; require an explicit user/model instruction.\n", "chunk_sha256": "af46ff8f24fbfb18788704bf6521ee53182d09901ffd2d955ffda62bee2d1759"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0000", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "STUNIR Pack Root Attestation Text v0 \u0014 Schema (`root_attestation.txt`)", "text": "### STUNIR Pack Root Attestation Text v0 \u0014 Schema (`root_attestation.txt`)\n", "chunk_sha256": "b7b6aa5d3a21e43628932d10bc9737d29739d1593e6ffd628528f0779eb84edf"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0001", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "0. Purpose", "text": "#### 0. Purpose\nThis document defines a minimal-toolchain encoding of the pack root attestation intended for environments where:\n- Python cannot be used, and\n- custom verifier binaries cannot be installed.\n\nThe format is line-oriented and designed to be parsed with:\n- POSIX shell + awk/sed, and\n- Windows PowerShell.\n\nThis encoding provides **offline integrity** of pack contents via SHA-256 digests.\nAuthenticity requires a signature mechanism (optional) as described below.\n", "chunk_sha256": "28711b2e817ec152504fafdaa7950aa690f5d30562e7eb5f366d2c6fe5a55617"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0002", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "1. File location and encoding", "text": "#### 1. File location and encoding\n- File name: `root_attestation.txt`\n- Encoding: UTF-8\n- Newlines: `\n` (verifiers SHOULD accept `\n`)\n", "chunk_sha256": "a7612f501f2eda3467a7dfe1449963d4f75b2f6076b982070ad4648ddba7a642"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0003", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "2. Version line (required)", "text": "#### 2. Version line (required)\nThe first non-empty, non-comment line MUST be exactly:\n- `stunir.pack.root_attestation_text.v0`\n", "chunk_sha256": "850e03dbb7876c04d8a0bf53dbef184005996c97cca93b1cd9896b0741fd269e"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0004", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "3. Comments and whitespace", "text": "#### 3. Comments and whitespace\n- Lines beginning with `#` are comments and MUST be ignored.\n- Empty lines MUST be ignored.\n- Fields are separated by one or more ASCII spaces.\n", "chunk_sha256": "5fe74e9bbae77e2b7ed2cb2a83fb6cc68b3ed72bb2280f75f74a165295b205ca"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0005", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4. Record lines", "text": "#### 4. Record lines\nEach non-comment record line begins with a `record_type` token.\n\nSupported `record_type` values:\n- `epoch`\n- `ir`\n- `input`\n- `receipt`\n- `artifact`\n\nTokens after the required positional fields MAY include additional `key=value` tokens.\n", "chunk_sha256": "5a6cfcace0eab4accfc97a25e9f7976ef56e00c31678db07de5712db613f944f"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0006", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.1 `epoch` record", "text": "##### 4.1 `epoch` record\nFormat:\n- `epoch <value>`\n\n`<value>` is opaque to the minimal verifier.\n", "chunk_sha256": "c6d066872d0d8ae7f32c2f46a72cc9b2dbac47d466d8596a28c1944e05833ae0"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0007", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.2 `ir` record (exactly one required)", "text": "##### 4.2 `ir` record (exactly one required)\nFormat:\n- `ir <digest> <media_type> [key=value ...]`\n\nConstraints:\n- There MUST be exactly one `ir` record.\n", "chunk_sha256": "d8a71761b365b0b6935327241b0dbe3cb70916a5fc630774f2d2830b81237504"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0008", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.3 `input` record (optional)", "text": "##### 4.3 `input` record (optional)\nFormat:\n- `input <digest> <media_type> kind=<kind> [key=value ...]`\n", "chunk_sha256": "c1c95e83411ca9d79600e3c631de9f201005eacdeea4fe9ffb7057253f69e430"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0009", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.4 `receipt` record (0+)", "text": "##### 4.4 `receipt` record (0+)\nFormat:\n- `receipt <digest> <media_type> [purpose=<purpose>] [key=value ...]`\n", "chunk_sha256": "019bbd0766517112bcfc216cd0ab46f52ed5fd6996728411e321275b816e233f"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0010", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.5 `artifact` record (0+)", "text": "##### 4.5 `artifact` record (0+)\nFormat:\n- `artifact <digest> <media_type> kind=<kind> [logical_path=<relpath>] [key=value ...]`\n\nConstraints:\n- `logical_path` MUST be a relative path with no `..` segments and no leading `/`.\n", "chunk_sha256": "0a2ce04002dd9a2290672e1bb6a27d8369c70f6cf1012b69cf34a5707d0eccf5"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0011", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "5. Digest format", "text": "#### 5. Digest format\n`<digest>` MUST be:\n- `sha256:<hex>` where `<hex>` is 64 lowercase hex characters.\n", "chunk_sha256": "96d1ab9336096ec9b9e91ef1431ad4357d4e750b676d999e609437a15b28c5cb"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0012", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "6. Object store mapping", "text": "#### 6. Object store mapping\nFor any `sha256:<hex>` referenced by any record:\n- the corresponding blob bytes MUST exist at `objects/sha256/<hex>`.\n", "chunk_sha256": "13e63603ea0382c7d85370d51a3f3154fb24991882f09c60667868b4489b554a"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0013", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "7. Optional signature", "text": "#### 7. Optional signature\nA pack MAY include:\n- `root_attestation.txt.sig`\n\nSignature format is deployment-specific.\nRecommended default for minimal environments:\n- OpenSSL-compatible signature over the exact `root_attestation.txt` bytes.\n\nMinimal verifiers MAY verify the signature if a trusted public key is provided.\n", "chunk_sha256": "600ccaf150a7e41e91c5132e499cbd0da99421a6872b2c2b661558462a6f40cc"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0000", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "STUNIR Pack Root Attestation v0 \u0014 Schema (dCBOR)", "text": "### STUNIR Pack Root Attestation v0 \u0014 Schema (dCBOR)\n", "chunk_sha256": "e897a2614e7acc981f6d21e84bd598f120c4223e1f6afcc8f04c22d9ec6d45fa"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0001", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "0. Encoding", "text": "#### 0. Encoding\n`root_attestation.dcbor` MUST be canonical dCBOR.\n\nA minimal-toolchain text encoding is specified separately in:\n- `stunir_pack_root_attestation_text_v0.md`\n", "chunk_sha256": "c96c70763ef461c397302bfce6ab3b7ee0d827cdba4db02620d20ce882bb373a"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0002", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "1. Top-level object", "text": "#### 1. Top-level object\nThe root attestation is a CBOR map.\n\nRequired keys:\n- `attestation_version` (text) \u0014 MUST equal `\"stunir.pack.root_attestation.v0\"`\n- `ir` (map) \u0014 IR descriptor\n- `receipts` (array) \u0014 zero or more receipt descriptors\n\nOptional keys:\n- `inputs` (array) \u0014 zero or more input descriptors (recommended for upstream audit)\n- `epoch` (int or text)\n- `policies` (map)\n- `toolchain` (map)\n- `artifacts` (array)\n- `extensions` (map)\n", "chunk_sha256": "53fe8f7aa20c97405e643277cb13a5a28659ce93d1155c47959fca1a84681c74"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0003", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "2. Digest string format", "text": "#### 2. Digest string format\nA digest is a text string of the form:\n- `\"sha256:<hex>\"` where `<hex>` is lowercase hex.\n", "chunk_sha256": "f352bbe35ef91f29a27954307bfe44a5d04d5873cb133c8a829f6b594594f578"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0004", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "3. IR descriptor", "text": "#### 3. IR descriptor\n`ir` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n", "chunk_sha256": "3631e57235baa4dce9c8f419fce83bd45f945574e41492665725b4dbf1456943"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0005", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "4. Input descriptor", "text": "#### 4. Input descriptor\nEach entry in `inputs` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n- `kind` (text)\n", "chunk_sha256": "f35ba70a63a507738ca45932ac79b5e12aacc8a8f5611e29f113b28da7953360"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0006", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "5. Receipt descriptor", "text": "#### 5. Receipt descriptor\nEach entry in `receipts` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n\nOptional:\n- `purpose` (text)\n- `signature` (map)\n", "chunk_sha256": "cb9a5b176ff6b4b682fad9d55f72ae4bd0e775f6c41d76089dcd1841dc240a91"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0007", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "6. Artifact descriptor", "text": "#### 6. Artifact descriptor\nEach entry in `artifacts` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n- `kind` (text)\n\nOptional:\n- `logical_path` (text)\n- `source_ir` (text)\n", "chunk_sha256": "189cdb33454ea1cf40adb4e91e5ee5f8f56874ab08bbaa47a4d0d3e7d45cc624"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0008", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "7. Object store mapping rule", "text": "#### 7. Object store mapping rule\nFor any digest `sha256:<hex>`, the corresponding blob MUST be present at:\n- `objects/sha256/<hex>`\n", "chunk_sha256": "e60d683d4e555623745a942072fcfffdec966aceaf9778fe6c2e06e609c5340f"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0009", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "8. Canonical pack identifier (recommended)", "text": "#### 8. Canonical pack identifier (recommended)\nA consumer MAY define:\n$$\text{pack_id} = \text{SHA256}(\text{bytes}(root_attestation.dcbor))$$\n", "chunk_sha256": "ef28e9f2d05a91251c0ab8f48513030a4c278f6f631b8e1905cb996b75c5e2f1"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0000", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "STUNIR Pack v0 \u0014 Security Considerations", "text": "### STUNIR Pack v0 \u0014 Security Considerations\n", "chunk_sha256": "2d3122a8e8173a0d58ea1fda5a98beeeed9f97f57ee6159f872d8c5b1996e33a"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0001", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "1. Threats addressed by the pack format", "text": "#### 1. Threats addressed by the pack format\nThe pack format primarily defends against:\n- **Tampering**: modifying IR/attestation artifacts/artifacts without detection.\n- **Substitution**: swapping one artifact for another with a different digest.\n- **Mix-and-match**: combining parts from different packs to confuse provenance.\n- **Archive attacks**: path traversal (`../`), absolute paths, duplicate entries.\n\nThe pack format does not, by itself, defend against:\n- compromised hash functions,\n- malicious tools that intentionally produce \nbad but deterministic\n outputs,\n- consumers who skip verification.\n", "chunk_sha256": "3d846adf7a11a959b0edfee588667b29a2343be67958132cb31ff71f663215f6"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0002", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "2. Mandatory verifier behaviors", "text": "#### 2. Mandatory verifier behaviors\nA verifier MUST:\n- recompute digests for every referenced blob,\n- ignore non-root-attestation files for integrity purposes,\n- reject archive entries with unsafe paths,\n- reject duplicate archive entries that map to the same unpack path,\n- treat missing referenced objects as an error.\n", "chunk_sha256": "294310fe22517f77fe7a2033484b5d172fc7eb406dcfbea370a6693456c41772"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0003", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "3. Root attestation encodings", "text": "#### 3. Root attestation encodings\nA pack may provide its root attestation as:\n- `root_attestation.dcbor` (preferred), and/or\n- `root_attestation.txt` (minimal-toolchain fallback).\n\nIf both are present, they MUST be equivalent.\n", "chunk_sha256": "3e0a9e596debb36b22bc15ae1ed80dd8ec3b72ef771a0d8c7a9f451de7926b26"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0004", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "4. Receipts and signatures", "text": "#### 4. Receipts and signatures\nReceipts MAY be signed.\n- If signatures are present, verifiers SHOULD validate them.\n- If signatures are not present, receipts still provide *tamper evidence* when their digests are bound in the root attestation, but not *authenticity*.\n\nAuthenticity is typically added via:\n- offline signing keys,\n- signatures over the root attestation bytes (dCBOR or text),\n- Sigstore/Cosign signatures over the root attestation digest,\n- or TUF distribution metadata.\n", "chunk_sha256": "a890e29aff633e8ddacd134f823c749c32c315921ed4735def2ad9725b176349"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0005", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "5. Rollback / freeze / update security", "text": "#### 5. Rollback / freeze / update security\nIf packs are distributed via an update system, implement protections against:\n- rollback to older vulnerable packs,\n- freeze attacks (withholding updates),\n- malicious mirrors.\n\nTUF is a common solution for these classes of threats.\n", "chunk_sha256": "70b73cb822fd40373fc554c22c67ea0cc4a29c2f41885069c122f2b3c6138bd4"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0006", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "6. Privacy", "text": "#### 6. Privacy\nIf receipts embed hostnames, usernames, absolute paths, or environment details, they may leak sensitive information.\n- The pack profile SHOULD prefer receipts that exclude unnecessary host-specific data.\n- If platform/audit details are needed, store them as optional, non-core receipt fields.\n", "chunk_sha256": "46a474b933590a0d4529c611e76097111485a640306c79a7f4d1a8970b43aa2f"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0000", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "STUNIR Pack v0 (Directory or Archive) \u0014 Specification", "text": "### STUNIR Pack v0 (Directory or Archive) \u0014 Specification\n", "chunk_sha256": "8b30fb34ebf3c15bcb02265b3817131c38df093f5b14424f6d75a968605346cf"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0001", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "0. Status and scope", "text": "#### 0. Status and scope\nThis document defines the **STUNIR Pack v0** interchange format.\n\nA **STUNIR pack** is the unit a model (or other consumer) ingests as a **deterministic container + commitment** for:\n- a canonical **Intermediate Reference (IR)**,\n- an **attestation bundle** binding pipeline steps to digests,\n- (optionally) the relevant **inputs** (e.g., the spec) needed to audit upstream.\n\nA pack MAY also include other blobs, but **v0 does not assume that downstream runtime outputs are baked into the pack**.\n\nA pack may be represented as:\n- a **directory tree**, or\n- an **archive** of that tree (e.g., a `.zip`).\n", "chunk_sha256": "8f4146f88a437604e5454833983df2ed53e0a21c5a1f142ac982b67303621b84"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0002", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "1. Terminology", "text": "#### 1. Terminology\n- **Blob**: a byte string.\n- **Digest**: a cryptographic hash identifier of a blob.\n- **sha256 digest**: `sha256:<hex>` where `<hex>` is lowercase hex of 32-byte SHA-256.\n- **Object store**: directory mapping digests to blobs.\n- **Root attestation**: the canonical bootstrap artifact that inventories pack contents by digest.\n- **Attestation artifact**: any emitted evidence object (e.g., step receipts, root attestation, provenance/SBOM objects, DSSE envelopes).\n- **Receipt**: a step-scoped evidence object emitted by the STUNIR harness.\n\nNormative keywords: **MUST**, **SHOULD**, **MAY**.\n", "chunk_sha256": "235b45907c6cc6228d4f048fe7a06a121384878381fe4002b4a3be839abaff79"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0003", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "2. High-level invariants", "text": "#### 2. High-level invariants\nA conforming STUNIR pack:\n1. **MUST be self-describing** via its root attestation.\n2. **MUST be locally verifiable** without network access.\n3. **MUST bind all included integrity-boundary content** by digest in the root attestation.\n", "chunk_sha256": "c312778717531f95028201446ce97fc7fc5013bb82d1c3ccdb4a568330fe9e23"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0004", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "3. Directory layout", "text": "#### 3. Directory layout\nA STUNIR pack directory MUST have:\n- `objects/sha256/` (REQUIRED)\n- one of:\n  - `root_attestation.dcbor` (REQUIRED for the canonical encoding), or\n  - `root_attestation.txt` (REQUIRED for minimal-toolchain environments)\n\nA pack SHOULD include `root_attestation.dcbor`.\nA pack MAY include both encodings.\n\nBack-compat note:\n- `pack_manifest.dcbor` MAY be present as a legacy alias.\n", "chunk_sha256": "411f086bea6992aae22ff324f15d9bdf95b2fd16c6830597862f4a0f6e9b19b8"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0005", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "4. Object store", "text": "#### 4. Object store\nAll included integrity-boundary content MUST be stored as digest-addressed blobs:\n- Path form: `objects/sha256/<hex>`\n- File bytes MUST be exactly the blob bytes.\n\nThe root attestation MUST reference blobs by digest (not by path). Paths are not part of the security boundary.\n", "chunk_sha256": "eb3a879defe13a4ffbfbc4685040669a2db4a3c9c60e5b9e06fa797248210b0e"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0006", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5. Root attestation encodings", "text": "#### 5. Root attestation encodings\nv0 supports two equivalent encodings of the root attestation:\n", "chunk_sha256": "779a051a8b2e60288066d2ee6729b7934893cd5d81da7a47acbfe5f8692c5aa2"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0007", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5.1 Canonical encoding: dCBOR", "text": "##### 5.1 Canonical encoding: dCBOR\n- File: `root_attestation.dcbor`\n- Spec: `stunir_pack_root_attestation_v0.md`\n\nThis is the preferred encoding for strict determinism and compactness.\n", "chunk_sha256": "f1e9559c9ccc875aa475c5a5264dee9ca26fb849a882ba3668a76c73ebaaa206"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0008", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5.2 Minimal-toolchain encoding: text", "text": "##### 5.2 Minimal-toolchain encoding: text\n- File: `root_attestation.txt`\n- Spec: `stunir_pack_root_attestation_text_v0.md`\n\nThis encoding exists to support environments that cannot run Python and cannot install custom binaries. It is intentionally parseable with:\n- POSIX shell + awk/sed + `sha256sum`/`shasum`/`openssl`, and\n- Windows PowerShell (`Get-FileHash`) or cmd (`certutil`).\n", "chunk_sha256": "e1f49965f687ce8a806950605f0b56a47cddac7373239df9ca147c9750e0ba3d"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0009", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5.3 Equivalence rule", "text": "##### 5.3 Equivalence rule\nIf both `root_attestation.dcbor` and `root_attestation.txt` are present:\n- They MUST describe the same inventory and the same `ir.digest`.\n- Consumers SHOULD treat `root_attestation.dcbor` as authoritative.\n", "chunk_sha256": "b3f89b353ad8ea46b005a1646aa9cd9a14905f632c1d21f46bf2fbad651b1e5f"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0010", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "6. Verification requirements", "text": "#### 6. Verification requirements\nA verifier MUST implement:\n1. Decode an available root attestation encoding.\n2. Validate required fields for that encoding.\n3. For every referenced digest, recompute SHA-256 over `objects/sha256/<hex>` and compare.\n4. Confirm there is exactly one canonical IR referenced.\n\nA verifier MAY provide a stronger mode that re-runs the harness and confirms it reproduces the same digests.\n", "chunk_sha256": "5db8ef86ada3500aa8cef864afbec7f9018d9f7cf98b8ed060013968b1aa4d23"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0011", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "7. Archive representation", "text": "#### 7. Archive representation\nA pack MAY be distributed as an archive of the directory tree.\nDeterministic archiving guidance is defined in `stunir_pack_archiving_v0.md`.\n", "chunk_sha256": "a3abd35991f52a2630c4b77d56226117db9ecda89ffbe1140e3c7b53e0a4db85"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0012", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "8. Security boundary notes", "text": "#### 8. Security boundary notes\n- Only blobs referenced by digest in the root attestation are authoritative.\n- Any file not referenced by digest MUST be ignored for integrity purposes.\n\nSecurity considerations are expanded in `stunir_pack_security_v0.md`.\n", "chunk_sha256": "5f223459d9b65cce932afb1364fd58b7002e4a6c9bab7e0e659b22e4944e6823"}
{"chunk_id": "docs/toolchain_contracts.md::chunk::0000", "path": "docs/toolchain_contracts.md", "source_git_sha": "5914c76cbd049667f7d2188b35d4bb0890361540", "heading": "Toolchain contracts (lifted toolchains)", "text": "# Toolchain contracts (lifted toolchains)\n\nThis directory documents how STUNIR \"lifts\" existing toolchains (runtimes, compilers, engines) into trackable and attestable operations.\n", "chunk_sha256": "e4c2179ec9941e3877dc053eeb3ef4e33bb4b1063e5d16005e0b2bf20fdbaf50"}
{"chunk_id": "docs/toolchain_contracts.md::chunk::0001", "path": "docs/toolchain_contracts.md", "source_git_sha": "5914c76cbd049667f7d2188b35d4bb0890361540", "heading": "The pattern", "text": "## The pattern\n\n1. Add a contract JSON in `contracts/*.json`.\n2. Map a target name to required contracts in `contracts/target_requirements.json`.\n3. Add one or more deterministic test vectors in `test_vectors/<lang>/`.\n4. Probe tools to produce acceptance receipts:\n\n- `scripts/ensure_deps.sh` emits:\n  - `receipts/requirements.json`\n  - `receipts/deps/<contract>.json`\n\n5. Verify acceptance receipts satisfy requirements:\n\n- `scripts/verify_deps.sh`\n", "chunk_sha256": "4f89397413b2af075d4b67278fd3f2b583623fc2beaf53ddf42a03ae8848aa35"}
{"chunk_id": "docs/toolchain_contracts.md::chunk::0002", "path": "docs/toolchain_contracts.md", "source_git_sha": "5914c76cbd049667f7d2188b35d4bb0890361540", "heading": "Notes", "text": "## Notes\n\n- Contracts should prefer **file-producing determinism tests** (same inputs => byte-identical outputs).\n- For ecosystems that risk network access during probe (e.g., `dotnet restore`), start with identity-only contracts and strengthen later with offline test vectors.\n", "chunk_sha256": "e09e8002cfe4ce4cab217077cb5e63fb61c8c5c27626d3ae6e1b42162e5fda34"}
{"chunk_id": "docs/verification.md::chunk::0000", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "STUNIR Verification Contract", "text": "# STUNIR Verification Contract\n\nThis repo supports multiple verification profiles.\n", "chunk_sha256": "3bd735fa8cf15a6f71122fd7682efca1e4db45f8b5aee691c250f121bb85e087"}
{"chunk_id": "docs/verification.md::chunk::0001", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "Profile 1: Local verification (Python)", "text": "## Profile 1: Local verification (Python)\n", "chunk_sha256": "f6e7c59a8527b08e57f4c43a5be77733b03a7073f4580ac8f312ad62cbaeca5b"}
{"chunk_id": "docs/verification.md::chunk::0002", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "Run", "text": "### Run\n- `./scripts/build.sh`\n- `./scripts/verify.sh`\n\nLocal verification checks canonical JSON, receipt integrity, IR manifests, and related invariants.\n", "chunk_sha256": "31b7174a3a074e2cf55588429d36927eb4276e2025e1fd8922204057d07afbe9"}
{"chunk_id": "docs/verification.md::chunk::0003", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "Profile 2: Portable verifier binary (no Python)", "text": "## Profile 2: Portable verifier binary (no Python)\nA future/optional `stunir-verify` binary can be used to verify packs in environments where Python is unavailable but a standalone executable is allowed.\n", "chunk_sha256": "5db3862a56636928c4b488e580a1622df3c302a4a595b90c2b352495a533ae87"}
{"chunk_id": "docs/verification.md::chunk::0004", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "Profile 3: Minimal verification (no Python, no custom binaries)", "text": "## Profile 3: Minimal verification (no Python, no custom binaries)\nThis profile is designed for very constrained environments.\n\nRequirements:\n- The pack MUST include `root_attestation.txt`.\n- The pack MUST include `objects/sha256/`.\n- A hashing tool MUST be available:\n  - Linux/macOS: `sha256sum` or `shasum` or `openssl`\n  - Windows PowerShell: `Get-FileHash`\n  - Windows cmd: `certutil`\n", "chunk_sha256": "ce863ce16dd767cc066f96188d08c218efb47adf8c6811cac623593a008c0798"}
{"chunk_id": "docs/verification.md::chunk::0005", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "POSIX-like", "text": "### POSIX-like\nUse `scripts/verify_minimal.sh`.\n", "chunk_sha256": "ee81e4f2aef75967ae1527fb60fedc535b560d02fca327d76cf9b656987f96fe"}
{"chunk_id": "docs/verification.md::chunk::0006", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "Windows PowerShell", "text": "### Windows PowerShell\nUse `scripts/verify_minimal.ps1`.\n", "chunk_sha256": "dcf43a6b37421c1e6ccc2f2ea54edec15b1f7303c2c137877d07b12057e13155"}
{"chunk_id": "docs/verification.md::chunk::0007", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "Windows cmd", "text": "### Windows cmd\nUse `scripts/verify_minimal.cmd`.\n", "chunk_sha256": "f1a60df746b74fbef6c5595d3dd5ebdcd9ecba76b4a658d29cabb1b80035d399"}
{"chunk_id": "docs/verification.md::chunk::0008", "path": "docs/verification.md", "source_git_sha": "b4f38565b8bcef3687e0dbe2108b19e2ef9f66b4", "heading": "Canonical JSON: `stunir-json-c14n-v1`", "text": "## Canonical JSON: `stunir-json-c14n-v1`\n(unchanged)\n\nA JSON byte sequence is canonical iff it is exactly the output of:\n- UTF-8 encoding\n- no floats anywhere (integers only)\n- object keys sorted lexicographically by Unicode codepoint\n- no whitespace (minified)\n- JSON string escaping as produced by Python `json.dumps(..., ensure_ascii=False)`\n\nThe verifier enforces this by parsing JSON and re-serializing with the canonical encoder, then requiring byte equality.\n\nFor local files, the verifier accepts an optional trailing newline.\n", "chunk_sha256": "8ca3653bbf4551243e81c5cbc5fde2577d21618587fc0452da93829f4c921778"}
{"chunk_id": "docs/verification_profiles.md::chunk::0000", "path": "docs/verification_profiles.md", "source_git_sha": "a1a43b45c25e37c75272a3e7665cede0858bcd63", "heading": "STUNIR Verification Profiles (Toolchain Levels)", "text": "### STUNIR Verification Profiles (Toolchain Levels)\n\nSTUNIR aims to make verification possible in constrained environments.\nThis document defines three practical verification profiles.\n", "chunk_sha256": "637c5a2462ad9ea1138744f60ce77793eb95b05350367d061d03e9b2ade57957"}
{"chunk_id": "docs/verification_profiles.md::chunk::0001", "path": "docs/verification_profiles.md", "source_git_sha": "a1a43b45c25e37c75272a3e7665cede0858bcd63", "heading": "Profile 1: Full verification (Python)", "text": "#### Profile 1: Full verification (Python)\nIntended for developer machines and richer CI environments.\n\nCharacteristics:\n- Uses the repo's Python tools.\n- Performs schema checks, canonicalization checks, receipt integrity checks, and may re-run rebuild commands.\n\nPros:\n- Strongest checks.\n\nCons:\n- Requires Python.\n", "chunk_sha256": "9b6fcc12fe719d67babb0b380cc3e75ba47a232e92add06c3817d19675b2a4dd"}
{"chunk_id": "docs/verification_profiles.md::chunk::0002", "path": "docs/verification_profiles.md", "source_git_sha": "a1a43b45c25e37c75272a3e7665cede0858bcd63", "heading": "Profile 2: Portable verifier binary (no Python)", "text": "#### Profile 2: Portable verifier binary (no Python)\nIntended for environments without Python but where running a standalone binary is permitted.\n\nCharacteristics:\n- A single `stunir-verify` executable that:\n  - decodes `root_attestation.dcbor`,\n  - recomputes SHA-256 for referenced objects,\n  - validates structural rules (exactly one IR, etc.),\n  - optionally verifies DSSE/in-toto envelopes.\n\nSuggested implementation languages:\n- Go or Rust.\n\nPros:\n- Works in locked-down CI (no interpreter).\n- Keeps canonical dCBOR as the bootstrap.\n\nCons:\n- Requires distributing a binary.\n", "chunk_sha256": "0dec0eecda76c67f580e8806f13c15d07e91db2c4219e71e803321bf07a4d871"}
{"chunk_id": "docs/verification_profiles.md::chunk::0003", "path": "docs/verification_profiles.md", "source_git_sha": "a1a43b45c25e37c75272a3e7665cede0858bcd63", "heading": "Profile 3: Minimal verification (no Python, no custom binaries)", "text": "#### Profile 3: Minimal verification (no Python, no custom binaries)\nIntended for very constrained environments where only built-in OS tooling is allowed.\n\nThis profile relies on:\n- `root_attestation.txt` (the minimal-toolchain root attestation encoding), and\n- OS-provided hashing tools.\n\nProvided scripts:\n- `scripts/verify_minimal.sh` (POSIX-like)\n- `scripts/verify_minimal.ps1` (Windows PowerShell)\n- `scripts/verify_minimal.cmd` (Windows cmd)\n\nWhat it verifies:\n- Every digest listed in `root_attestation.txt` corresponds to a blob under `objects/sha256/<hex>`.\n- The blob's SHA-256 matches.\n- There is exactly one `ir` record.\n\nWhat it does NOT verify (typically):\n- Deep schema validation of receipt payloads.\n- Rebuild/replay.\n- Signature verification unless the environment has an allowed crypto tool.\n\nRecommendation:\n- If authenticity is required in Profile 3, distribute a public key and enable signature verification of `root_attestation.txt` when possible.\n", "chunk_sha256": "f573bc5c1b1fefe17b5e99387c815f24b89439880a7f93c7a84d02cf8001696a"}
