{"chunk_id": "AI_START_HERE.md::chunk::0000", "path": "AI_START_HERE.md", "source_git_sha": "772a6fcd80597f42a61d7bf2212a8949b887c4ea", "heading": "AI_START_HERE", "text": "# AI_START_HERE\nThis file exists as a stable alias.\n\n**Canonical entrypoint:** `ENTRYPOINT.md`\n\nRationale:\n- Keeping a single source of truth prevents drift.\n- `ENTRYPOINT.md` now includes both (a) the STUNIR Pack entrypoint and (b) the repository navigation index.\n\nIf you are an agent/human trying to orient yourself in this repository, open `ENTRYPOINT.md`.\n", "chunk_sha256": "a45aab9bf3eee165f60564ce4dc4f8741afbb79b10fe4208b501dc00097d52d7"}
{"chunk_id": "ENTRYPOINT.md::chunk::0000", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "STUNIR Pack Entry Point (v0)", "text": "### STUNIR Pack Entry Point (v0)\nThis file is the **first thing** a tool or model SHOULD read when consuming a STUNIR bundle as a STUNIR pack.\n\n", "chunk_sha256": "eb3360673361f68804737f4804c43de6c47e25166b68649b15a06cb1b745a890"}
{"chunk_id": "ENTRYPOINT.md::chunk::0001", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "1) What to look for", "text": "#### 1) What to look for\nA STUNIR pack is a **deterministic container + commitment** rooted at a directory that contains:\n- `objects/sha256/` (content-addressed blobs, REQUIRED)\n- one of:\n- `root_attestation.dcbor` (preferred bootstrap, REQUIRED if available), or\n- `root_attestation.txt` (fallback bootstrap for minimal environments)\n\nIf these are absent, you are not looking at a conforming STUNIR pack.\n\nBack-compat note:\n- A pack MAY additionally include `pack_manifest.dcbor` as a legacy alias.\n\n", "chunk_sha256": "4ba63b657bb6503b19baeaf2a89acdfd0469fe193727e41a75d438aef3821d59"}
{"chunk_id": "ENTRYPOINT.md::chunk::0002", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "2) Authority rule (integrity boundary)", "text": "#### 2) Authority rule (integrity boundary)\n- The **root attestation** is authoritative for pack contents.\n- Only blobs referenced by digest in the root attestation are in the integrity boundary.\n- Any file not referenced by digest MUST be ignored for integrity purposes.\n\nBootstrap selection:\n- If `root_attestation.dcbor` is present, consumers SHOULD treat it as authoritative.\n- Otherwise, consumers MAY use `root_attestation.txt`.\n\nDigest mapping rule:\n- For any `sha256:` referenced by the root attestation, the blob bytes MUST exist at `objects/sha256/`.\n\n", "chunk_sha256": "608cd9248c4baf3cbfe587b784adf907463d1c36caa16e0b5e0c67e563e915b5"}
{"chunk_id": "ENTRYPOINT.md::chunk::0003", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "3) What STUNIR is trying to achieve", "text": "#### 3) What STUNIR is trying to achieve\nSTUNIR aims to turn a human-authored spec into a canonical **Intermediate Reference (IR)** and then (optionally) further derived products, while emitting **attestation artifacts** that bind each step to hashes.\n\nIn v0, the portable audit spine is:\n- upstream **inputs** (often the spec),\n- the canonical **IR**,\n- the **attestation artifact bundle** (step receipts and related evidence),\n- a **root attestation** that inventories and commits to the above.\n\nDownstream runtime outputs (code/binaries/test outputs) are typically **materialized to user-chosen paths** and are not assumed to be baked into the pack.\n\n", "chunk_sha256": "fdc493627f2458ea53edf6cb60b7d2d69a437fe48541f3f7336d2ad288f50890"}
{"chunk_id": "ENTRYPOINT.md::chunk::0004", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "4) Inclusion vs materialization", "text": "#### 4) Inclusion vs materialization\n- **Included** means the exact bytes are stored under `objects/sha256/` and referenced by digest in the root attestation.\n- **Materialized** means bytes are written to some workspace path chosen by the user/model.\n\nPaths are UX; digests define identity.\n\n", "chunk_sha256": "7493e9a2670194c76b237e12463ccde965c5bcb2b068857e062787cce0744c47"}
{"chunk_id": "ENTRYPOINT.md::chunk::0005", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "5) Minimal verification checklist", "text": "#### 5) Minimal verification checklist\nA verifier MUST:\n1. Decode the root attestation (`root_attestation.dcbor` preferred; else `root_attestation.txt`).\n2. Validate required fields for the chosen encoding.\n3. For every referenced digest, recompute SHA-256 over `objects/sha256/` and compare.\n4. Confirm there is exactly one IR referenced via `ir.digest`.\n5. Confirm every receipt referenced via `receipts[].digest` exists and matches its digest.\n6. If `inputs` are present, confirm each referenced input exists and matches its digest.\n\n", "chunk_sha256": "f6ceb44db10488cdc72a042aaab7ca9d09d7b37900954729ff3dedd00c951ec7"}
{"chunk_id": "ENTRYPOINT.md::chunk::0006", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "6) Where the detailed rules live", "text": "#### 6) Where the detailed rules live\n- Pack overview: `stunir_pack_spec_v0.md`\n- Root attestation (dCBOR): `stunir_pack_root_attestation_v0.md`\n- Root attestation (text fallback): `stunir_pack_root_attestation_text_v0.md`\n- Materialization: `stunir_pack_materialization_v0.md`\n- Deterministic archiving: `stunir_pack_archiving_v0.md`\n- Security considerations: `stunir_pack_security_v0.md`\n\n", "chunk_sha256": "6e76058938d96634e53a54d7e324c1814df3ae81f7589d71b81d95b3d886d7b4"}
{"chunk_id": "ENTRYPOINT.md::chunk::0007", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "7) Model/agent operating guidance (non-normative)", "text": "#### 7) Model/agent operating guidance (non-normative)\nWhen working interactively:\n- Ask the user what they want to produce (IR only, code, runtime outputs) and where to put materialized files.\n- Treat any requested filesystem destinations as untrusted input.\n- Prefer emitting/retaining attestation artifacts as the portable audit record.\n\n", "chunk_sha256": "cb0357c14eeed3eb0ca759c3916a19f6f2a4363894528f98af3feebcbe43bb39"}
{"chunk_id": "ENTRYPOINT.md::chunk::0008", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "8) Repository navigation index (non-normative)", "text": "#### 8) Repository navigation index (non-normative)\nThis section is for humans and AI agents browsing the *repository* (not required for pack validation).\n\n", "chunk_sha256": "b0ec75b0e1528cb47d87f55b83e20cd4065ff910b5b568b3d210d40c59e7685e"}
{"chunk_id": "ENTRYPOINT.md::chunk::0009", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "Canonical reading order", "text": "##### Canonical reading order\nRead these in order:\n- `ENTRYPOINT.md`\n- `docs/verification.md`\n- `docs/toolchain_contracts.md`\n- `docs/receipt_storage_policy.md`\n- `contracts/target_requirements.json`\n- `schemas/stunir_receipt_predicate_v1.schema.json`\n- `schemas/stunir_statement_wrapper_v1.schema.json`\n- `tools/verify_build.py`\n- `tools/spec_to_ir.py`\n- `tools/spec_to_ir_files.py`\n- `scripts/build.sh`\n- `scripts/verify.sh`\n- `spec/stunir_machine_plan.json`\n- `asm/spec_ir.txt`\n\n", "chunk_sha256": "b1cfb0a53b0747b642a32a008b04c82080b3cee26348476de12b245797b59e8b"}
{"chunk_id": "ENTRYPOINT.md::chunk::0010", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "Repo map (what lives where)", "text": "##### Repo map (what lives where)\n- `docs/`: narrative docs (verification, toolchain contracts, receipt policy)\n- `schemas/`: JSON schemas for statements/receipts\n- `contracts/`: toolchain contracts (identity + determinism probes)\n- `tools/`: implementation utilities\n- `scripts/`: build/verify entrypoints\n- `spec/`: spec deltas / patch sets + machine plan JSON\n- `asm/`: materialization artifacts (includes IR summary)\n- `build/`, `receipts/`: build outputs (often not committed by default)\n\n", "chunk_sha256": "cf7c85d40f505010153cb5adcc99cebf47e9cda98946a108324ddd871e8a3dcb"}
{"chunk_id": "ENTRYPOINT.md::chunk::0011", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "Anti-loop rules", "text": "##### Anti-loop rules\n1. Treat `build/` and `receipts/` as outputs unless a doc explicitly says otherwise.\n2. If a README is a placeholder, do not recurse from it; return to `ENTRYPOINT.md` or `docs/`.\n3. Prefer `docs/verification.md` + `schemas/` + `contracts/` over enumerating every test vector.\n\n", "chunk_sha256": "3d8d0bf451f7a934ea1d0c254c185889e5b02da64d139338e9be8d4a153fcaf8"}
{"chunk_id": "ENTRYPOINT.md::chunk::0012", "path": "ENTRYPOINT.md", "source_git_sha": "6eeada6ac7ceb9c1c343d17cd9b3a1b249568574", "heading": "Link conventions", "text": "##### Link conventions\n- Prefer repo-relative links (e.g. `docs/verification.md`) over GitHub UI links.\n- When linking to a directory, link to `README.md` explicitly if it exists.\n", "chunk_sha256": "48997abc56c04a41c4da16f190db53bc02103fe2ae08a9c481d860619b4da727"}
{"chunk_id": "STUNIR_EPOCH_AUTODERIVE_README.md::chunk::0000", "path": "STUNIR_EPOCH_AUTODERIVE_README.md", "source_git_sha": "9c20e1b04a124067d29e166400f85355c167869c", "heading": "STUNIR epoch auto-derive overlay", "text": "# STUNIR epoch auto-derive overlay\n\nThis overlay updates STUNIR so the build does **not** require the user to supply an epoch.\n\n", "chunk_sha256": "837ae63aefa88be08e201f4d0c1e57bfd8fd61e450cebf0b0e131921a9781903"}
{"chunk_id": "STUNIR_EPOCH_AUTODERIVE_README.md::chunk::0001", "path": "STUNIR_EPOCH_AUTODERIVE_README.md", "source_git_sha": "9c20e1b04a124067d29e166400f85355c167869c", "heading": "What changes", "text": "## What changes\n\n- `tools/epoch.py`\n  - Removes implicit wall-clock fallback by default.\n  - Adds deterministic epoch derivation from the `spec/` directory digest (\"DERIVED_SPEC_DIGEST_V1\").\n  - Keeps overrides (`STUNIR_BUILD_EPOCH`, `SOURCE_DATE_EPOCH`) as the highest priority.\n\n- `tools/gen_provenance.py`\n  - Fixes the script (the upstream file is truncated) and emits both:\n    - `build/provenance.json`\n    - `build/provenance.h` (consumed by `tools/prov_emit.c`)\n\n- `scripts/build.sh`\n  - Updates messaging to reflect that a deterministic default exists.\n\n- `README.md`\n  - Updates the documented epoch selection semantics.\n\n", "chunk_sha256": "c734de229f7974aa8e217636d495766f1ee4cf05e974e442f19cc40e9864eec7"}
{"chunk_id": "STUNIR_EPOCH_AUTODERIVE_README.md::chunk::0002", "path": "STUNIR_EPOCH_AUTODERIVE_README.md", "source_git_sha": "9c20e1b04a124067d29e166400f85355c167869c", "heading": "How to apply", "text": "## How to apply\n\nExtract this zip at the repository root. It contains replacement files at their correct paths.\n\n", "chunk_sha256": "f46fea85357b835487101146ff93dec7288c27b8813dc9fd768462d2beb36d49"}
{"chunk_id": "STUNIR_EPOCH_AUTODERIVE_README.md::chunk::0003", "path": "STUNIR_EPOCH_AUTODERIVE_README.md", "source_git_sha": "9c20e1b04a124067d29e166400f85355c167869c", "heading": "Notes", "text": "## Notes\n\n- The derived epoch is deterministic per spec digest. It is not intended to represent real time.\n- If you truly want wall-clock behavior for a non-reproducible run, call:\n  - `python3 tools/epoch.py --allow-current-time ...`\n", "chunk_sha256": "53e3172b116975564491d26627b28033bbd45fcf009f6dbb49092e556c0854f7"}
{"chunk_id": "STUNIR_INDEX_README.md::chunk::0000", "path": "STUNIR_INDEX_README.md", "source_git_sha": "b03b054c108bea5047bfcb79cc0b831818375b36", "heading": "STUNIR Index Bundle", "text": "# STUNIR Index Bundle\nThis bundle provides deterministic, model-agnostic indexing of the STUNIR repository to help humans and AI agents navigate without looping.\n", "chunk_sha256": "c6f553a67332556b1ee17b716006fde96457eb0e0dd73fc7310050971f3706e2"}
{"chunk_id": "STUNIR_INDEX_README.md::chunk::0001", "path": "STUNIR_INDEX_README.md", "source_git_sha": "b03b054c108bea5047bfcb79cc0b831818375b36", "heading": "Files", "text": "## Files\n- `STUNIR_REPO_INDEX.json`: per-file metadata for the whole repo (including `test_vectors/`).\n- `STUNIR_CHUNK_INDEX.jsonl`: chunked text for markdown docs (excludes `test_vectors/`, `build/`, `receipts/` by default to avoid noise).\n", "chunk_sha256": "9083e10e2d08a7571a5d1e13fbaea56767c5e523ba2e33efcbaa299f4d3eaed5"}
{"chunk_id": "STUNIR_INDEX_README.md::chunk::0002", "path": "STUNIR_INDEX_README.md", "source_git_sha": "b03b054c108bea5047bfcb79cc0b831818375b36", "heading": "Design notes", "text": "## Design notes\n- `test_vectors/` are included in the repo index so tooling can locate them deterministically, but they are not chunked for semantic search by default.\n- Git blob SHAs in the index come from the repository tree (sha1). If you need sha256 for files, compute it locally during checkout/materialization.\n", "chunk_sha256": "919c09631799aca43003d9593a6426fbc76e9d269768f84ec93c50b9592d78fd"}
{"chunk_id": "STUNIR_INDEX_README.md::chunk::0003", "path": "STUNIR_INDEX_README.md", "source_git_sha": "b03b054c108bea5047bfcb79cc0b831818375b36", "heading": "Typical uses", "text": "## Typical uses\n- Build a vector index externally using `STUNIR_CHUNK_INDEX.jsonl` (stable chunk IDs + sha256).\n- Validate documentation cross-references by using `outbound_repo_links` fields in `STUNIR_REPO_INDEX.json`.\n- Quickly answer: \u201cwhere is X defined?\u201d by scanning `category` + `path`.\nGenerated against branch: `main`.\nGenerated UTC: `2025-12-24T08:44:35Z`.\n", "chunk_sha256": "45fd68752886b24869c43838c87e0270443cd0d0b3ed34e24d7f18ddacb5b9bf"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0000", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "741013c6aee8f350b5f466189bd0cdd72c6833c9", "heading": "STUNIR_REFERENCE_AUDIT", "text": "# STUNIR_REFERENCE_AUDIT\nRepo: `emstar-en/STUNIR`\nBranch: `main`\nGenerated: `2025-12-24T08:44:35Z`\n", "chunk_sha256": "327b5f13d90bdd2fd9b240e95ae90adcf3c03e7a36deb56e7c8929fd5386df25"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0001", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "741013c6aee8f350b5f466189bd0cdd72c6833c9", "heading": "Summary", "text": "## Summary\n- Markdown files scanned: **29**\n- Total repo files indexed: **168**\n- Broken repo-relative links: **0**\n- Suspicious links (placeholder targets): **0**\n", "chunk_sha256": "65cb30a447f7af0b4bc7ff7056e9872db069b6868fe6b0ee84d38b27e3d9a4b6"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0002", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "741013c6aee8f350b5f466189bd0cdd72c6833c9", "heading": "Placeholder-ish targets", "text": "## Placeholder-ish targets\n- `asm/README.txt`\n- `spec/README.txt`\n", "chunk_sha256": "6e9308f21a816666ee71c6837b4541794daba76e9a74d4a9ace06d718f21e5de"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0003", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "741013c6aee8f350b5f466189bd0cdd72c6833c9", "heading": "Broken repo-relative links", "text": "## Broken repo-relative links\nNo broken repo-relative links were detected in the scanned markdown set.\n", "chunk_sha256": "2fb0b34b512b6d49187201bb8eab565c2e517047e3fc53fd12bcb135d787eeb3"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0004", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "741013c6aee8f350b5f466189bd0cdd72c6833c9", "heading": "Suspicious links", "text": "## Suspicious links\nNo suspicious links were detected.\n", "chunk_sha256": "41d4900ee32df7baaefe66a5aa553128d2e25cdb23375ca004b121ce6e7f987f"}
{"chunk_id": "STUNIR_REFERENCE_AUDIT.md::chunk::0005", "path": "STUNIR_REFERENCE_AUDIT.md", "source_git_sha": "741013c6aee8f350b5f466189bd0cdd72c6833c9", "heading": "Recommended actions", "text": "## Recommended actions\n1. Regenerate the index bundle after any repo relayout that moves docs or changes navigation structure.\n2. Keep `AI_START_HERE.md` as a stable alias pointing to `ENTRYPOINT.md` (or vice versa), but ensure the index bundle matches the current reality.\n3. Keep placeholder READMEs pointing back to `ENTRYPOINT.md` to prevent crawl loops.\n", "chunk_sha256": "8d2bddfe09cc3ab8ff15cb4d5104a38c8835e5857c096ecfcf863f9370b9692d"}
{"chunk_id": "STUNIR_REFERENCE_RULES.md::chunk::0000", "path": "STUNIR_REFERENCE_RULES.md", "source_git_sha": "f83de3d321124c4baa7b86c65d813ec69a64d4ff", "heading": "STUNIR_REFERENCE_RULES", "text": "# STUNIR_REFERENCE_RULES\n\nThis file describes how repository documents should reference other repository documents.\nIt is intended to reduce navigation ambiguity for humans and AI agents.\n\n", "chunk_sha256": "6fbd164591e896ffaae43be814d6539ac84ae9dfa01a9bb8a06c6d904ecebad9"}
{"chunk_id": "STUNIR_REFERENCE_RULES.md::chunk::0001", "path": "STUNIR_REFERENCE_RULES.md", "source_git_sha": "f83de3d321124c4baa7b86c65d813ec69a64d4ff", "heading": "Rules", "text": "## Rules\n\n1. Use repo-relative paths in markdown links.\n2. Do not link to per-run output artifacts under `build/` and `receipts/` unless referencing fixtures.\n3. If a directory is referenced, prefer an explicit `README.md` target.\n4. Avoid placeholder READMEs that have no outbound references; they should point back to `ENTRYPOINT.md` and `AI_START_HERE.md`.\n5. Keep at least one stable root entrypoint (`ENTRYPOINT.md`) and one stable navigation index (`AI_START_HERE.md`).\n\n", "chunk_sha256": "577452fce3296bc229d543a2027e1bdb9bdfbad5c6f07470af796908885f22b9"}
{"chunk_id": "STUNIR_REFERENCE_RULES.md::chunk::0002", "path": "STUNIR_REFERENCE_RULES.md", "source_git_sha": "f83de3d321124c4baa7b86c65d813ec69a64d4ff", "heading": "Recommended minimum cross-links", "text": "## Recommended minimum cross-links\n\n- `ENTRYPOINT.md` should link to `AI_START_HERE.md`.\n- Placeholder files should link back to `ENTRYPOINT.md`.\n", "chunk_sha256": "02ecd888ad265e95f4d6fd4a31ffbf8ee3fdcb4f5dbdf7fe524c3d732b3d62c4"}
{"chunk_id": "docs/code_emission.md::chunk::0000", "path": "docs/code_emission.md", "source_git_sha": "93e9292f369ca736a48cc8d08e76b91b164198f2", "heading": "STUNIR Code Emission Contract (v0)", "text": "# STUNIR Code Emission Contract (v0)\n\nThis document specifies the **deterministic IR \u2192 code emission** interface used by STUNIR.\nIt is intended to make emission:\n- deterministic (byte-for-byte where applicable),\n- hermetic (no network, no ambient host data),\n- checkable by digest binding (receipts), not by trusting re-execution.\n\n", "chunk_sha256": "ee9c8ee04a10d202e0e5985784b304cbd8d2c121b520c45e7adbdc059f96f6c6"}
{"chunk_id": "docs/code_emission.md::chunk::0001", "path": "docs/code_emission.md", "source_git_sha": "93e9292f369ca736a48cc8d08e76b91b164198f2", "heading": "1) Determinism contract (normative)", "text": "## 1) Determinism contract (normative)\nEmitters MUST obey:\n- Encoding: UTF-8\n- Newlines: LF (`\\n`)\n- No timestamps in emitted source or receipts (except via an explicit, controlled `emit_epoch` input)\n- No environment-dependent behavior (locale/timezone/randomness) influencing output bytes\n- All iteration order MUST be defined by the IR order (the IR is responsible for canonical ordering)\n\n", "chunk_sha256": "ca64ab986c2ea191317128f621d827c766602fd79def709d37f37a810df9cb38"}
{"chunk_id": "docs/code_emission.md::chunk::0002", "path": "docs/code_emission.md", "source_git_sha": "93e9292f369ca736a48cc8d08e76b91b164198f2", "heading": "2) IR contract", "text": "## 2) IR contract\nThe IR MUST validate against:\n- `schemas/stunir_ir_v1.schema.json`\n\nAdditionally (not expressible in JSON Schema):\n- IR arrays that represent sets MUST already be in canonical order.\n- Unknown fields MUST be rejected by strict emitters.\n\n", "chunk_sha256": "101c324da01a0766274da9fbb1d26fe4cc50cfacb6d57b7b2d168daa79c35b93"}
{"chunk_id": "docs/code_emission.md::chunk::0003", "path": "docs/code_emission.md", "source_git_sha": "93e9292f369ca736a48cc8d08e76b91b164198f2", "heading": "3) Template Pack contract", "text": "## 3) Template Pack contract\nA template pack for language `<lang>` lives at:\n- `templates/<lang>/`\n\nIt MUST contain:\n- `templates/<lang>/TEMPLATE_PACK.json` (machine-readable pack descriptor)\n- `templates/<lang>/templates_manifest.tsv` (digest binding for all files that influence emission)\n\n", "chunk_sha256": "f0d723e2fd6c5d633eb2380a381afb35257616c46e21a5d2ac523e222eb108b0"}
{"chunk_id": "docs/code_emission.md::chunk::0004", "path": "docs/code_emission.md", "source_git_sha": "93e9292f369ca736a48cc8d08e76b91b164198f2", "heading": "3.1 TEMPLATE_PACK.json", "text": "### 3.1 TEMPLATE_PACK.json\n`TEMPLATE_PACK.json` MUST validate against:\n- `schemas/stunir_template_pack_v1.schema.json`\n\n", "chunk_sha256": "91023d319a08f351262de69841cc26ded9f4912926f7a92eba872079b4766a68"}
{"chunk_id": "docs/code_emission.md::chunk::0005", "path": "docs/code_emission.md", "source_git_sha": "93e9292f369ca736a48cc8d08e76b91b164198f2", "heading": "3.2 templates_manifest.tsv (normative)", "text": "### 3.2 templates_manifest.tsv (normative)\nFormat per line:\n\n```\n<sha256hex>\t<relpath>\n```\n\nRules:\n- File encoding: UTF-8\n- Newlines: LF only\n- Sorted lexicographically by `<relpath>` (byte order)\n- `<relpath>` MUST be a **safe relative path**:\n  - MUST NOT be absolute\n  - MUST NOT contain `..` segments\n  - MUST NOT contain NUL\n  - SHOULD NOT begin with `-`\n- The manifest scope is: **all files that influence output bytes** (templates, pack descriptor, any deterministic helper data).\n\n", "chunk_sha256": "13b0d0a8e17537586e2d92afcf2ec0a670b43172ad4e7add67a1ad9055e8ab64"}
{"chunk_id": "docs/code_emission.md::chunk::0006", "path": "docs/code_emission.md", "source_git_sha": "93e9292f369ca736a48cc8d08e76b91b164198f2", "heading": "4) Emit receipt", "text": "## 4) Emit receipt\nEmitters SHOULD write an emission receipt at a stable location (project-specific), with schema:\n- `contracts/receipt_emit_v1.schema.json`\n\nMinimum required bindings:\n- IR digest (`ir_sha256`)\n- Template pack digest (`template_pack_sha256`)\n- Emitter identity evidence (id/path/hash or version-text hash)\n- Output file list (path + sha256)\n\nDesign principle: verification should not require re-running the emitter; it should be possible to verify by digest binding.\n", "chunk_sha256": "2e4a6d112bd017510c66b426f0d42a197a547edf0e8e02b1fa03729c278debd6"}
{"chunk_id": "docs/ir_bundle_v1.md::chunk::0000", "path": "docs/ir_bundle_v1.md", "source_git_sha": "eb4ac44535b326c04b52460a1b030ed161071123", "heading": "STUNIR IR bundle v1 (authoritative)", "text": "# STUNIR IR bundle v1 (authoritative)\n\nThis repository defines **`stunir.ir_bundle.v1`** as the byte-exact \u201cmeaning anchor\u201d for STUNIR.\n\n", "chunk_sha256": "ad06fd22d7d08c631f6b23d48bcc84dd89768d671d8772728a1403416ba71681"}
{"chunk_id": "docs/ir_bundle_v1.md::chunk::0001", "path": "docs/ir_bundle_v1.md", "source_git_sha": "eb4ac44535b326c04b52460a1b030ed161071123", "heading": "What is byte-exact?", "text": "## What is byte-exact?\n\nOnly the **IR bundle bytes** are required to be identical across platforms/engines.\nReceipts/logs/packaging are allowed to vary.\n\n", "chunk_sha256": "ddfb33e5e85219e8cffffe262280913d36a4f9f93e2afee9ffcd8910826d9818"}
{"chunk_id": "docs/ir_bundle_v1.md::chunk::0002", "path": "docs/ir_bundle_v1.md", "source_git_sha": "eb4ac44535b326c04b52460a1b030ed161071123", "heading": "Canonical IR Content (CIR)", "text": "## Canonical IR Content (CIR)\n\nIn v1 (authoritative), CIR is:\n\n- a **JSON array** of **JSON objects** (\"units\")\n- with **floats forbidden** (JSON numbers must be integers)\n- with **all strings NFC-normalized** (keys and values)\n- with **duplicate keys forbidden**, including duplicates introduced by NFC normalization\n\n", "chunk_sha256": "0cdae7c020890adceabe6194a8d0299b3d13d4798120ca35886cf36ae9c071f8"}
{"chunk_id": "docs/ir_bundle_v1.md::chunk::0003", "path": "docs/ir_bundle_v1.md", "source_git_sha": "eb4ac44535b326c04b52460a1b030ed161071123", "heading": "IR bundle bytes", "text": "## IR bundle bytes\n\nThe IR bundle bytes are canonical DCBOR encoding of:\n\n- `[\n    \"stunir.ir_bundle.v1\",\n    cir_units\n  ]`\n\n", "chunk_sha256": "0e01fd80f340b8b20ef26ae125210f35e5c336a178f3b1708260bab63f1d5178"}
{"chunk_id": "docs/ir_bundle_v1.md::chunk::0004", "path": "docs/ir_bundle_v1.md", "source_git_sha": "eb4ac44535b326c04b52460a1b030ed161071123", "heading": "Reference implementation", "text": "## Reference implementation\n\n- `tools/ir_bundle_v1.py` implements:\n  - CIR JSON normalization and validation\n  - canonical DCBOR encoding (RFC 8949 canonical CBOR; definite lengths only)\n  - IR bundle construction and receipt emission\n\n- `tools/build_ir_bundle_v1.py` is a small shim CLI.\n\n", "chunk_sha256": "511fea4032325b2f8196c99b0277b1fbd4af21ff13d1dd49eb8dbd7c3bdd585e"}
{"chunk_id": "docs/ir_bundle_v1.md::chunk::0005", "path": "docs/ir_bundle_v1.md", "source_git_sha": "eb4ac44535b326c04b52460a1b030ed161071123", "heading": "Test vectors", "text": "## Test vectors\n\n`tests/test_ir_bundle_v1_vectors.json` contains a small vector set.\n`tests/test_ir_bundle_v1.py` validates that encoding and hashes match.\n", "chunk_sha256": "da05cccb42212db0954f314e8e317bacd3f68e95b72a4ee47f38629037c74a52"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0000", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "STUNIR Dead-End Handling Contract (DEHC) v1", "text": "# STUNIR Dead-End Handling Contract (DEHC) v1\n\nSTUNIR is determinism-first: models can propose, but deterministic tooling must be the sole producer of commitments.\n\nThis document defines a general rule for \"dead ends\" encountered during deterministic builds, canonicalization, packing, verification, or toolchain probing.\n\n", "chunk_sha256": "1b90b5203e4593225b1c514b5aafd5cbc6592f6590c5b057f41950de1a911351"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0001", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Core rule", "text": "## Core rule\n**If there exists a deterministic, attestable way to proceed, STUNIR should allow it.**\n\nCorollaries:\n- **No silent meaning changes.** If proceeding requires changing semantics, it must be explicit and attestable.\n- **No silent policy weakening.** If proceeding requires relaxing a policy, that relaxation must be explicit and attestable.\n- **Prefer deterministic tool-driven selection over model-driven search.**\n\n", "chunk_sha256": "a54b2cdc8d4b92535eaaa87ccb0b408421d8789ffe94851f4fc194e4015be368"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0002", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Definitions", "text": "## Definitions\n- **Dead end:** A build step cannot complete under the requested policy/constraints (e.g., tool missing; policy forbids an input feature; representation edge).\n- **Resolution path:** A well-defined alternative that permits progress.\n- **Attestable:** The choice of resolution is recorded in receipts/manifests so that a verifier can confirm what happened.\n- **Semantic class:** Whether the resolution preserves meaning or changes it.\n\n", "chunk_sha256": "49329dbc986eb9cec94d6f85aee12ede731ad6288a1bf4c083d96279daa2b816"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0003", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Resolution ladder (preferred order)", "text": "## Resolution ladder (preferred order)\nWhen a dead end occurs, STUNIR should choose (or require the orchestrator to choose) a resolution from this ladder.\n\n", "chunk_sha256": "f05b94d0aa9487adc2d24717ebc33f4d6cc9f62e527950f4353f4611bc252956"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0004", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R1 \u2014 Same meaning, different representation (preferred)", "text": "### R1 \u2014 Same meaning, different representation (preferred)\nProceed by selecting an alternative representation that preserves the intended meaning.\n\nExamples:\n- Encoding policy change that preserves the same JSON object model (e.g., `dcbor_shortest` \u2192 `float64_fixed`).\n- Switching a canonicalization format that is proven equivalent (e.g., two encodings of the same root attestation).\n\n", "chunk_sha256": "8ba0e864847cc27ae0842c0489daa366d517bcdf0748c812fcd554a0be0ae9b3"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0005", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R2 \u2014 Deterministic auto-selection (tool-driven)", "text": "### R2 \u2014 Deterministic auto-selection (tool-driven)\nProceed by selecting from a set of allowed representations using a deterministic rule derived solely from:\n- the inputs (bytes)\n- the declared build policy\n- the tool version / tool digest\n\nThe decision rule itself must be stable and verifiable.\n\n", "chunk_sha256": "c897348320acea37ae42de996cf3bbe792150a8a917d75055ee259f990cb9372"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0006", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R3 \u2014 Explicit semantic downgrade (allowed, but must be labeled)", "text": "### R3 \u2014 Explicit semantic downgrade (allowed, but must be labeled)\nProceed by switching to a less-structured meaning.\n\nExample:\n- \"Treat this file as opaque bytes\" instead of \"parse JSON and canonicalize\".\n\nThis is **allowed only** when it is:\n- explicitly requested (flag/policy)\n- clearly labeled in the manifest/receipt\n- bound by digest so verifiers can reproduce it\n\n", "chunk_sha256": "3ab8e3f684b7adaecfef09d12dafd3fe6df1148c85056d46d902841a49c6ef96"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0007", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "R4 \u2014 Refuse (hard fail)", "text": "### R4 \u2014 Refuse (hard fail)\nIf no deterministic, attestable resolution exists within policy, the step must fail.\n\n", "chunk_sha256": "bdd1a6b77c58502ce0a0bb05e35d8831ea31f400ef67f7fd0dcfd5fbfca13145"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0008", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "What must be attested", "text": "## What must be attested\nWhenever a resolution is used (R1\u2013R3), emit a **Decision Record** (machine-readable) and bind it in receipts.\n\nA Decision Record MUST capture:\n- **schema/version** of the Decision Record\n- **step** (what operation was being performed)\n- **requested** mode/policy\n- **selected** mode/policy\n- **resolution_class** (`R1 | R2 | R3`)\n- **reason_code** (stable enum)\n- **inputs_digest** (what the decision was based on)\n- **tool_identity** (path + sha256 digest, and optionally version output)\n- **constraints** (e.g., verification profile, determinism toggles)\n\nA Decision Record SHOULD capture:\n- **rejection evidence** for the losing option(s) (e.g., error code/message hash)\n- **deterministic decision rule id** (for R2)\n\n", "chunk_sha256": "a302b9997d6d8b6b433d68a8a57c0646b15acdf2f174b29f72ac8c72570cec34"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0009", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Stable reason codes", "text": "## Stable reason codes\nReason codes should be stable, short, and machine-checkable.\n\nSuggested core codes:\n- `POLICY_FORBIDS_FEATURE`\n- `ENCODING_RANGE_LIMIT`\n- `TOOLCHAIN_MISSING`\n- `TOOLCHAIN_NONDETERMINISTIC`\n- `PROFILE_CONSTRAINT`\n- `INPUT_PARSE_FAILED`\n- `EQUIVALENCE_UNAVAILABLE`\n\n", "chunk_sha256": "2848d8299d6f2b92ead8c45f1c0dde42bc6744e070c18495c41f0ba02a259fb4"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0010", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Verifier expectations", "text": "## Verifier expectations\nA verifier SHOULD be able to:\n- recompute digests of inputs used in the decision\n- check that the selected mode/policy matches the emitted artifacts\n- confirm that the decision is consistent with the declared build policy\n\nIf a verifier cannot validate the equivalence claim (e.g., R1 equivalence not proven in that profile), it must treat the decision as:\n- either **not acceptable** under that verification profile, or\n- acceptable only if an explicit policy allows it\n\n", "chunk_sha256": "ec6b7674b899a5f2b60e9046bd724ac6a33a4d7650502c449adfa9a3ad32196b"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0011", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Guidance for tool authors", "text": "## Guidance for tool authors\n", "chunk_sha256": "f4ab7f59d45f6b49f7860869b1881db3d271de430c83030d6f2e92df7f0dc506"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0012", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Strict-by-default with explicit escape hatches", "text": "### Strict-by-default with explicit escape hatches\nTool behavior should follow this pattern:\n\n1) **Reject on policy violations** (default).\n2) **Provide explicit, attestable alternatives** (flags/policies) for R1\u2013R3.\n3) **Avoid catch-all fallbacks** that turn errors into different semantics.\n\n", "chunk_sha256": "ea57237e8034973d5e4e8f6ccfd994776d831ffc3cb44e020bceece0d05475f3"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0013", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Example: IR emission for JSON specs", "text": "### Example: IR emission for JSON specs\nRecommended behavior for a JSON\u2192IR normalizer:\n- If JSON decoding fails: allow explicit \"opaque bytes\" mode (R3) OR fail.\n- If JSON decoding succeeds but canonicalization/encoding fails: fail by default, or allow a deterministic R1/R2 alternative.\n\n", "chunk_sha256": "64fe235f5e6ab0cd0551e54643d046b54b499a6f02184239a46d989ab1b06bfb"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0014", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Example: float policy in deterministic CBOR", "text": "### Example: float policy in deterministic CBOR\n- `forbid_floats`: hard fail if floats are present.\n- `dcbor_shortest`: if numeric reduction would require an integer outside CBOR int/uint range, do **not** fail; encode as float (R1) and attest the reason (`ENCODING_RANGE_LIMIT`) if you want this surfaced.\n- `float64_fixed`: deterministic baseline.\n\n", "chunk_sha256": "410ad9de4a4ef1558dbc5b3ae700255de3f3bb1b5e8bb7264d6efae2592f73eb"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0015", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Orchestrator guidance (models as planners)", "text": "## Orchestrator guidance (models as planners)\nOrchestrators may attempt multiple plans, but STUNIR prefers that fallback behavior be:\n- tool-defined (deterministic), or\n- explicitly user-policy-defined\n\nIf orchestrators do perform retries, they SHOULD:\n- record failure receipts (optional but recommended)\n- ensure the final successful build is fully receipt-bound\n\n", "chunk_sha256": "004fbe97bb448671a1a891dacb22ec9518e3244675654b0e7331338426001cb0"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0016", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Relationship to packs", "text": "## Relationship to packs\nWhen decisions affect pack contents (e.g., which root attestation encoding is included), the Decision Record MUST be included in the pack inventory so that offline verifiers can explain and validate the path taken.\n\n", "chunk_sha256": "eed74f6962cd8e200f72f817a3bca9be84314234c83a78b5b207ac05f3fab6db"}
{"chunk_id": "docs/policy/dead_end_handling_contract.md::chunk::0017", "path": "docs/policy/dead_end_handling_contract.md", "source_git_sha": "5c8a31fa83f8bb1fb160baf4b855cca58663e383", "heading": "Compatibility and evolution", "text": "## Compatibility and evolution\n- This contract is additive: new reason codes and optional fields may be introduced.\n- Breaking changes require a schema version bump.\n", "chunk_sha256": "e8524d6e1fd053c87c70d1e7f0dbb4489b79d78374dd7328c7545ea3a40018d2"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0000", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "Receipt storage policy (STUNIR)", "text": "# Receipt storage policy (STUNIR)\n\nSTUNIR emits receipts as **build artifacts**.\n\nBy default, receipts are **not committed**; they are generated, verified, and then treated as per-run outputs (e.g., attached to an artifact/release, or retained locally).\n\nIf a user requests a preserved copy, the orchestrator should offer two commit modes:\n\n- **Snapshot**: copy the current run\u2019s `receipts/` (and typically `build/`) into `fixtures/receipts/<TAG>/` so humans can review/diff/audit what happened.\n- **Golden fixture**: like snapshot, but additionally treated as a regression baseline that CI may compare against under a controlled environment.\n\nThis policy does **not** alter STUNIR\u2019s internal \u201cno versions\u201d conventions. STUNIR outputs (artifacts/receipts) are versioned according to the **spec\u2019s** own versioning rules.\n\nImplementation helper:\n\n- Use `scripts/snapshot_receipts.sh` to create snapshots.\n\n", "chunk_sha256": "1b334519f7ee4a7b9d27f13245560e2e859c2f51c9b5b61f31897247940d8349"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0001", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "Verifying a snapshot later", "text": "## Verifying a snapshot later\n\nA snapshot is only meaningful when verified against the **same repo state** (same commit) and outputs rebuilt with the **same epoch**.\n\nA practical workflow:\n\n```bash\n", "chunk_sha256": "479a2674be11cee6089f41048eb2536190280a878449186bcac00d8dca7ee0a2"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0002", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "1) Checkout the commit that produced the snapshot.", "text": "# 1) Checkout the commit that produced the snapshot.\n\n", "chunk_sha256": "921f8cc74b4cc877a1bd0e2e65022162daf252a91fb23095f0798923a6dc35b4"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0003", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "2) Restore the snapshot epoch", "text": "# 2) Restore the snapshot epoch\ncp fixtures/receipts/<TAG>/build/epoch.json build/epoch.json\n\n", "chunk_sha256": "4e26a6de9364916e60428a7c923e06fd6ee635bd3e7a2ce46cda79bd7d96dded"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0004", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "3) Rebuild outputs using that epoch (but don't auto-verify using current receipts/)", "text": "# 3) Rebuild outputs using that epoch (but don't auto-verify using current receipts/)\nSTUNIR_PRESERVE_EPOCH=1 STUNIR_VERIFY_AFTER_BUILD=0 ./scripts/build.sh\n\n", "chunk_sha256": "c9fbf0f2125ddf6ede9d03d5a1c381d3b1e3cc285c95d4fc297445309924d4b6"}
{"chunk_id": "docs/receipt_storage_policy.md::chunk::0005", "path": "docs/receipt_storage_policy.md", "source_git_sha": "b01e6b277bc12b22e04db89b3fc8a239734a2ad1", "heading": "4) Verify the snapshot receipts against the rebuilt outputs", "text": "# 4) Verify the snapshot receipts against the rebuilt outputs\n./scripts/verify.sh --root fixtures/receipts/<TAG>\n```\n", "chunk_sha256": "963b612600d3753bb628060c0dcd28f2f9442ff9fdc37dcb7bba26408e35fbb9"}
{"chunk_id": "docs/relayout_report.md::chunk::0000", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "Repo relayout report (generated)", "text": "# Repo relayout report (generated)\n\nGoal: ensure that visible root-level files are human-facing documentation, while keeping CI paths working.\n\n", "chunk_sha256": "af03d03577d36c2b519845a684050c9dc55e098f191efe316d58f19ecb4d9a22"}
{"chunk_id": "docs/relayout_report.md::chunk::0001", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "Moves performed", "text": "## Moves performed\n- `ENTRYPOINT.md` \u2192 `docs/root/ENTRYPOINT.md`\n- `stunir_pack_archiving_v0.md` \u2192 `docs/root/stunir_pack_archiving_v0.md`\n- `stunir_pack_manifest_v0.md` \u2192 `docs/root/stunir_pack_manifest_v0.md`\n- `stunir_pack_materialization_v0.md` \u2192 `docs/root/stunir_pack_materialization_v0.md`\n- `stunir_pack_root_attestation_text_v0.md` \u2192 `docs/root/stunir_pack_root_attestation_text_v0.md`\n- `stunir_pack_root_attestation_v0.md` \u2192 `docs/root/stunir_pack_root_attestation_v0.md`\n- `stunir_pack_security_v0.md` \u2192 `docs/root/stunir_pack_security_v0.md`\n- `stunir_pack_spec_v0.md` \u2192 `docs/root/stunir_pack_spec_v0.md`\n\n", "chunk_sha256": "776bd37ec39ae70cc0113073646ca08f56404b57e67e1e1c9cff522754e41b35"}
{"chunk_id": "docs/relayout_report.md::chunk::0002", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "Added files", "text": "## Added files\n- `docs/policy/dead_end_handling_contract.md`\n- `schemas/stunir_dead_end_decision_v1.schema.json`\n- `docs/examples/dead_end_decision_example_v1.json`\n\n", "chunk_sha256": "5c834c488f2b765aa7156f6778f5c1bed14f002da32746e255cca320c547df70"}
{"chunk_id": "docs/relayout_report.md::chunk::0003", "path": "docs/relayout_report.md", "source_git_sha": "f4a12f1add88b36a75b190c456935cd39092cbc7", "heading": "References updated (best-effort)", "text": "## References updated (best-effort)\n- No reference updates were necessary.\n", "chunk_sha256": "46d990535171f733931e44a307d7829d8b88665239e48e6e569c1b0612173574"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0000", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "STUNIR Pack Entry Point (v0)", "text": "### STUNIR Pack Entry Point (v0)\nThis file is the **first thing** a tool or model SHOULD read when consuming a STUNIR bundle as a STUNIR pack.\n\n", "chunk_sha256": "eb3360673361f68804737f4804c43de6c47e25166b68649b15a06cb1b745a890"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0001", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "1) What to look for", "text": "#### 1) What to look for\nA STUNIR pack is a **deterministic container + commitment** rooted at a directory that contains:\n- `objects/sha256/` (content-addressed blobs, REQUIRED)\n- one of:\n  - `root_attestation.dcbor` (preferred bootstrap, REQUIRED if available), or\n  - `root_attestation.txt` (fallback bootstrap for minimal environments)\n\nIf these are absent, you are not looking at a conforming STUNIR pack.\n\nBack-compat note:\n- A pack MAY additionally include `pack_manifest.dcbor` as a legacy alias.\n\n", "chunk_sha256": "0cc4f3554313ed21a8ecde3f3d5cf92cf72a3dfd7f6c6af0e1793e4b17e76e9b"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0002", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "2) Authority rule (integrity boundary)", "text": "#### 2) Authority rule (integrity boundary)\n- The **root attestation** is authoritative for pack contents.\n- Only blobs referenced by digest in the root attestation are in the integrity boundary.\n- Any file not referenced by digest MUST be ignored for integrity purposes.\n\nBootstrap selection:\n- If `root_attestation.dcbor` is present, consumers SHOULD treat it as authoritative.\n- Otherwise, consumers MAY use `root_attestation.txt`.\n\nDigest mapping rule:\n- For any `sha256:` referenced by the root attestation, the blob bytes MUST exist at `objects/sha256/<hex>`.\n\n", "chunk_sha256": "954a54b4201104a4c86a03af56935c6fd3a6e147a8b5a0415d6244b7d3682f73"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0003", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "3) What STUNIR is trying to achieve", "text": "#### 3) What STUNIR is trying to achieve\nSTUNIR aims to turn a human-authored spec into a canonical **Intermediate Reference (IR)** and then (optionally) further derived products, while emitting **attestation artifacts** that bind each step to hashes.\n\nIn v0, the portable audit spine is:\n- upstream **inputs** (often the spec),\n- the canonical **IR**,\n- the **attestation artifact bundle** (step receipts and related evidence),\n- a **root attestation** that inventories and commits to the above.\n\nDownstream runtime outputs (code/binaries/test outputs) are typically **materialized to user-chosen paths** and are not assumed to be baked into the pack.\n\n", "chunk_sha256": "fdc493627f2458ea53edf6cb60b7d2d69a437fe48541f3f7336d2ad288f50890"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0004", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "4) Inclusion vs materialization", "text": "#### 4) Inclusion vs materialization\n- **Included** means the exact bytes are stored under `objects/sha256/` and referenced by digest in the root attestation.\n- **Materialized** means bytes are written to some workspace path chosen by the user/model.\n\nPaths are UX; digests define identity.\n\n", "chunk_sha256": "7493e9a2670194c76b237e12463ccde965c5bcb2b068857e062787cce0744c47"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0005", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "5) Minimal verification checklist", "text": "#### 5) Minimal verification checklist\nA verifier MUST:\n1. Decode the root attestation (`root_attestation.dcbor` preferred; else `root_attestation.txt`).\n2. Validate required fields for the chosen encoding.\n3. For every referenced digest, recompute SHA-256 over `objects/sha256/<hex>` and compare.\n4. Confirm there is exactly one IR referenced via `ir.digest`.\n5. Confirm every receipt referenced via `receipts[].digest` exists and matches its digest.\n6. If `inputs` are present, confirm each referenced input exists and matches its digest.\n\n", "chunk_sha256": "c739affeec5f80114da4941442cb6297ba4c376a7f9a5ec21fc1b96df191c8c1"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0006", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "6) Where the detailed rules live", "text": "#### 6) Where the detailed rules live\n- Pack overview: `stunir_pack_spec_v0.md`\n- Root attestation (dCBOR): `stunir_pack_root_attestation_v0.md`\n- Root attestation (text fallback): `stunir_pack_root_attestation_text_v0.md`\n- Materialization: `stunir_pack_materialization_v0.md`\n- Deterministic archiving: `stunir_pack_archiving_v0.md`\n- Security considerations: `stunir_pack_security_v0.md`\n\n", "chunk_sha256": "6e76058938d96634e53a54d7e324c1814df3ae81f7589d71b81d95b3d886d7b4"}
{"chunk_id": "docs/root/ENTRYPOINT.md::chunk::0007", "path": "docs/root/ENTRYPOINT.md", "source_git_sha": "b8b22f21e633e2c684befca656090519e36ac5d7", "heading": "7) Model/agent operating guidance (non-normative)", "text": "#### 7) Model/agent operating guidance (non-normative)\nWhen working interactively:\n- Ask the user what they want to produce (IR only, code, runtime outputs) and where to put materialized files.\n- Treat any requested filesystem destinations as untrusted input.\n- Prefer emitting/retaining attestation artifacts as the portable audit record.\n", "chunk_sha256": "9d4d7a098cf443d9d8848e0ec873fc56e5eabff8f877ec45bcb43c2bf44a9c18"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0000", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "STUNIR Pack v0 \u2014 Deterministic Archiving Guidance", "text": "### STUNIR Pack v0 \u2014 Deterministic Archiving Guidance\nThis document defines recommendations for producing stable archive bytes for a STUNIR pack directory.\n\n", "chunk_sha256": "1ee47f943f7b15aa2137cdadb2e1340d059c929390ccea9e25e888d6f7e0d004"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0001", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "1. General requirements", "text": "#### 1. General requirements\nWhen producing an archive from a pack directory:\n- Archive entries MUST be sorted lexicographically by path.\n- Paths MUST be relative (no leading `/`).\n- Paths MUST NOT contain `..` segments.\n- File bytes MUST be identical to the directory representation.\n\n", "chunk_sha256": "d6403b19bd41a661d62152b4245ad8aaf3668b558cc385b7e16e5a0d0936f663"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0002", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "2. Zip guidance", "text": "#### 2. Zip guidance\nZip is widely supported but has multiple metadata footguns.\n\nRecommendations:\n- Set every entry\u2019s timestamp to the pack `epoch` (or to 0 if unspecified).\n- Normalize permissions (e.g., `0644` for files, `0755` for dirs) unless permissions are explicitly part of the artifact bytes.\n- Exclude extra fields that capture host metadata.\n- Ensure deterministic compression (or use `STORE` / no compression).\n\nIf you must use a command-line zipper, prefer options that strip extra attributes (tool-dependent).\n\n", "chunk_sha256": "ee2a9463f65fdc79d3a72742e7d2787659df091f2208ae1c77b36dc596e266bd"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0003", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "3. Tar guidance (often easier)", "text": "#### 3. Tar guidance (often easier)\nFor deterministic tar:\n- Use a fixed sort order.\n- Set `mtime` to the pack `epoch` for every entry.\n- Set `uid=0`, `gid=0`, `uname=\"\"`, `gname=\"\"`.\n- Avoid PAX headers that leak timestamps.\n- Prefer uncompressed tar for maximal determinism; if compressing, ensure compressor settings are fixed.\n\n", "chunk_sha256": "f1ce32c6fb70362c69b8e86e403685c97a2bf8829d8d9dd86e9943b634334dbe"}
{"chunk_id": "docs/root/stunir_pack_archiving_v0.md::chunk::0004", "path": "docs/root/stunir_pack_archiving_v0.md", "source_git_sha": "8bd86fdd11c00668e4ca12627a93ece13c2eaf05", "heading": "4. Canonical archive recommendation", "text": "#### 4. Canonical archive recommendation\nIf you need a single normative \u201ccanonical archive format\u201d for byte-identical distribution, pick ONE of:\n- uncompressed tar with strict metadata normalization, or\n- zip with STORE and strict metadata normalization.\n\nThen define the canonical archive\u2019s digest as an optional additional artifact in the root attestation (do not replace root-attestation-based verification).\n", "chunk_sha256": "d7f8dd8b4d6749de9c3369b724a95a93bbeb8bc79a2baa4ce1a62bd7d9cbf03e"}
{"chunk_id": "docs/root/stunir_pack_manifest_v0.md::chunk::0000", "path": "docs/root/stunir_pack_manifest_v0.md", "source_git_sha": "4084167d0d4689c2049152af46c72c48beaa64d2", "heading": "STUNIR Pack Manifest v0 \u0014 (Deprecated)", "text": "### STUNIR Pack Manifest v0 \u0014 (Deprecated)\n\nThis document is retained for backwards compatibility with earlier drafts that used `pack_manifest.dcbor` as the bootstrap object.\n\nCurrent v0 direction:\n- The preferred bootstrap object is `root_attestation.dcbor`.\n- A minimal-toolchain fallback is `root_attestation.txt`.\n\nThe canonical schemas are defined in:\n- `stunir_pack_root_attestation_v0.md` (dCBOR)\n- `stunir_pack_root_attestation_text_v0.md` (text)\n\nConsumers SHOULD prefer `root_attestation.dcbor` when present.\n", "chunk_sha256": "20d907795ac1bc2fb31b8ad2b4ec530e110372da64be0348e4797968a379db6d"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0000", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "STUNIR Pack Manifest v1 \u2014 `pack_manifest.tsv`", "text": "### STUNIR Pack Manifest v1 \u2014 `pack_manifest.tsv`\n\n", "chunk_sha256": "b3755d1bed9ad0340dfb6f6d808febf1d8375be93a5dd9af1cea30563dd8f8d2"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0001", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "0. Purpose", "text": "#### 0. Purpose\n\nThis document defines a *shell-friendly* deterministic manifest format for pack-root files.\nIt is designed to strengthen Profile 3 verification without requiring:\n- Python, or\n- a custom verifier binary.\n\nThis manifest is an integrity mechanism, not an authenticity mechanism.\nAuthenticity still requires a signature (see `root_attestation.txt.sig` conventions).\n\n", "chunk_sha256": "31b9884d5ff826cc605d3069e445b0775d26a1eea747118cc4e5483d9aa7fc02"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0002", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "1. File location and encoding", "text": "#### 1. File location and encoding\n\n- File name: `pack_manifest.tsv`\n- Location: pack root\n- Encoding: UTF-8\n- Newlines: LF (`\n`) only\n\n", "chunk_sha256": "ca85a3ae9f1b971145ff67aa2662eed96fec9e290e7257a23d39a13f59566cf5"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0003", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "2. Line format", "text": "#### 2. Line format\n\nEach non-empty, non-comment line MUST be:\n\n- `<sha256_hex64>\t<relative_posix_path>`\n\nWhere:\n- `<sha256_hex64>` is 64 lowercase hex characters.\n- `<relative_posix_path>` is a relative path using forward slashes.\n\nComments:\n- Lines beginning with `#` MUST be ignored.\n\n", "chunk_sha256": "cacc3297d449b89ca6e2e952aa671742166e19dce0ffb29806bb872636c96e71"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0004", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "3. Ordering", "text": "#### 3. Ordering\n\n- The file MUST be sorted lexicographically by `<relative_posix_path>` under `LC_ALL=C`.\n\n", "chunk_sha256": "6bf0592a45da962dcee530032ce2e43494881ccdcb816cdd065cbe5fdc3ea0c2"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0005", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "4. Scope", "text": "#### 4. Scope\n\nThe manifest MUST enumerate regular files under the pack root with the following exclusions:\n- `objects/sha256/**` (the object store is verified via `root_attestation.txt`)\n- `pack_manifest.tsv` itself\n\nRationale:\n- Excluding the object store avoids a fixed-point problem when the manifest itself is stored as an object.\n\n", "chunk_sha256": "611d19ebd9cf78197ccabbbe5652642f7817c922a6c478f58a3a6d79114d3601"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0006", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "5. Path safety policy (mandatory)", "text": "#### 5. Path safety policy (mandatory)\n\nThe verifier MUST reject any path that violates any of the following:\n- Must be relative (no leading `/`)\n- Must not start with `./`\n- Must not contain any `..` segment\n- Must not contain empty path segments\n- Must not contain whitespace characters\n- Must not contain backslashes (`\\`)\n- No path segment may begin with `-`\n- Allowed characters are limited to `[A-Za-z0-9._/-]`\n\n", "chunk_sha256": "7f086014f0afe581f8ae62f2093d1313b6d449c13096c7943b2afc1dc3e47c00"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0007", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "6. Binding the manifest to `root_attestation.txt`", "text": "#### 6. Binding the manifest to `root_attestation.txt`\n\nIf `pack_manifest.tsv` is used, it SHOULD be bound from `root_attestation.txt` as an `artifact` record:\n\n- `artifact sha256:<digest> kind=manifest logical_path=pack_manifest.tsv`\n\nThe object `objects/sha256/<digest>` MUST exist and match the manifest bytes.\n\n", "chunk_sha256": "88e68b006541f1817f7b1a45e6800c6f22ea0e47c8a9073635f94285fb6750a6"}
{"chunk_id": "docs/root/stunir_pack_manifest_v1.md::chunk::0008", "path": "docs/root/stunir_pack_manifest_v1.md", "source_git_sha": "f3b00e7ca262f36c16182ee75c5b4bea1871aad3", "heading": "7. Verifier behavior (Profile 3 strict)", "text": "#### 7. Verifier behavior (Profile 3 strict)\n\nA strict Profile 3 verifier MUST:\n1. Verify `root_attestation.txt` minimal invariants and object-store integrity.\n2. If a manifest binding is present:\n   - Verify `pack_manifest.tsv` exists at the referenced `logical_path`.\n   - Verify `SHA-256(pack_manifest.tsv) == <digest>`.\n   - Verify `pack_manifest.tsv` has LF-only newlines.\n   - Verify `pack_manifest.tsv` is sorted.\n   - For each manifest entry, verify the target file exists and hash-matches.\n", "chunk_sha256": "ad99efc34d3f835a56e0547d6166642d19001b2192b24d1c3ef01eb463a96465"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0000", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "STUNIR Pack v0 \u2014 Materialization (Writing Outputs to User-Chosen Paths)", "text": "### STUNIR Pack v0 \u2014 Materialization (Writing Outputs to User-Chosen Paths)\n\n", "chunk_sha256": "d2614ad8831517cb539a072dfd0749dce25ca17333db926b683412486aec0a6a"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0001", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "0. Purpose", "text": "#### 0. Purpose\nThis document clarifies how STUNIR can \u201cgo all the way to runtime\u201d while keeping the **pack** deterministic.\n\nKey principle:\n- **Digests define identity. Paths are UX.**\n\n", "chunk_sha256": "249625bb7b0f2b4914cc4cd685c675e7d64ae8b9c3ca2db0b07b691d0446c874"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0002", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "1. Definitions", "text": "#### 1. Definitions\n- **Included blob:** present under `objects/sha256/` and referenced by the root attestation.\n- **Materialized file:** written into some workspace path chosen by the user/model.\n\n", "chunk_sha256": "a8299838270ac40008eb490b5c756bf4247032fc64999d056305f15c0019625e"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0003", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "2. Typical STUNIR usage", "text": "#### 2. Typical STUNIR usage\nSTUNIR commonly:\n- commits to **inputs + IR + attestation artifacts** (portable audit evidence), and\n- materializes downstream outputs to user-chosen paths.\n\nIn many workflows, users keep step receipts as the audit record; auditors who care about inputs (e.g., the spec) will naturally examine upstream artifacts.\n\n", "chunk_sha256": "f1bdc3b4fa504636729b4687048d2baf2b7b5597367c67b1e49018a86e0cffcb"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0004", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "3. Materialization as a pure operation", "text": "#### 3. Materialization as a pure operation\nGiven a mapping `(digest -> destination_path)`, materialization is:\n1. locate blob bytes by `digest` in the object store,\n2. write exact bytes to `destination_path`.\n\nThis is a pure copy. Any permissions/exec bits are a policy decision and should be recorded in receipts if it matters.\n\n", "chunk_sha256": "27d3176617d02eef9704298f8a10d5b128cfd5e8d519af8ede696a3347d3a493"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0005", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "4. Recording materialization without contaminating core IDs", "text": "#### 4. Recording materialization without contaminating core IDs\nPaths are often absolute, host-specific, user-specific, or ephemeral.\n\nIf you need auditability, emit a **materialization receipt**:\n- It SHOULD record the list of `(digest, destination_path, mode)`.\n- Its **core identifier** SHOULD be computed from digest lists and normalized policy fields, excluding absolute paths.\n- The full receipt MAY include paths in a non-core section.\n\n", "chunk_sha256": "f2fe8fab67a0825b0f0253608f5bb1a4cbdb9bbb50401a909c2fb90914487f0f"}
{"chunk_id": "docs/root/stunir_pack_materialization_v0.md::chunk::0006", "path": "docs/root/stunir_pack_materialization_v0.md", "source_git_sha": "8aa8ed7134587475fb003b1dc0be3db9409167a9", "heading": "5. Recommended constraints", "text": "#### 5. Recommended constraints\n- Destination paths MUST be treated as untrusted input.\n- Tools MUST prevent path traversal when materializing from an archive.\n- If a pack is used as input to execution, do not implicitly execute included artifacts; require an explicit user/model instruction.\n", "chunk_sha256": "af46ff8f24fbfb18788704bf6521ee53182d09901ffd2d955ffda62bee2d1759"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0000", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "STUNIR Pack Root Attestation Text v0 \u0014 Schema (`root_attestation.txt`)", "text": "### STUNIR Pack Root Attestation Text v0 \u0014 Schema (`root_attestation.txt`)\n\n", "chunk_sha256": "716a6e66087055833389ca9be3501363a98793c4d54f495ee61259a516a19672"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0001", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "0. Purpose", "text": "#### 0. Purpose\nThis document defines a minimal-toolchain encoding of the pack root attestation intended for environments where:\n- Python cannot be used, and\n- custom verifier binaries cannot be installed.\n\nThe format is line-oriented and designed to be parsed with:\n- POSIX shell + awk/sed, and\n- Windows PowerShell.\n\nThis encoding provides **offline integrity** of pack contents via SHA-256 digests.\nAuthenticity requires a signature mechanism (optional) as described below.\n\n", "chunk_sha256": "c45e489f8130bc18e1c1a46a3c8fb36087a81360f36b2b7ae0aacb9a3fff27b2"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0002", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "1. File location and encoding", "text": "#### 1. File location and encoding\n- File name: `root_attestation.txt`\n- Encoding: UTF-8\n- Newlines: `\n` (verifiers SHOULD accept `\r\n`)\n\n", "chunk_sha256": "6b972b7fa09a5c59d8ac7e48880587c395c94f78b21d493e07c0be01f1590640"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0003", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "2. Version line (required)", "text": "#### 2. Version line (required)\nThe first non-empty, non-comment line MUST be exactly:\n- `stunir.pack.root_attestation_text.v0`\n\n", "chunk_sha256": "fc414730ec60e91e74d777bdc4dfe7f2a2b673e468fa4a84411d48b615b187ac"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0004", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "3. Comments and whitespace", "text": "#### 3. Comments and whitespace\n- Lines beginning with `#` are comments and MUST be ignored.\n- Empty lines MUST be ignored.\n- Fields are separated by one or more ASCII spaces.\n\n", "chunk_sha256": "ca1dfe88343aa784e2dc2a6db192121eb1f9a2e50430b7b513a5ca9fe8e2c108"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0005", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4. Record lines", "text": "#### 4. Record lines\nEach non-comment record line begins with a `record_type` token.\n\nSupported `record_type` values:\n- `epoch`\n- `ir`\n- `input`\n- `receipt`\n- `artifact`\n\nTokens after the required positional fields MAY include additional `key=value` tokens.\n\n", "chunk_sha256": "d57f6e98071eb1f4d371ac523b738f5d24a1b478ee0bbf7779b49fdad809450b"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0006", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.1 `epoch` record", "text": "##### 4.1 `epoch` record\nFormat:\n- `epoch <value>`\n\n`<value>` is opaque to the minimal verifier.\n\n", "chunk_sha256": "ac39bdc1ae015db2c53a173f9f05ff3f3e2f8543fa33f1e4b1dafc0688b3d6f9"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0007", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.2 `ir` record (exactly one required)", "text": "##### 4.2 `ir` record (exactly one required)\nFormat:\n- `ir <digest> <media_type> [key=value ...]`\n\nConstraints:\n- There MUST be exactly one `ir` record.\n\n", "chunk_sha256": "dc981b36eec3762a39f44b59bbeb143fbf5309d60a9179de8d616b0672900193"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0008", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.3 `input` record (optional)", "text": "##### 4.3 `input` record (optional)\nFormat:\n- `input <digest> <media_type> kind=<kind> [key=value ...]`\n\n", "chunk_sha256": "89481aeadd8422fa9d0d66af1b645be5cb55e6fcec66b8b630b7e5890bd1d5cd"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0009", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.4 `receipt` record (0+)", "text": "##### 4.4 `receipt` record (0+)\nFormat:\n- `receipt <digest> <media_type> [purpose=<purpose>] [key=value ...]`\n\n", "chunk_sha256": "6521c026fced63894afcd411eb0d5dfbe5b4cae3f769e04a1db761245cfa7c63"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0010", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "4.5 `artifact` record (0+)", "text": "##### 4.5 `artifact` record (0+)\nFormat:\n- `artifact <digest> <media_type> kind=<kind> [logical_path=<relpath>] [key=value ...]`\n\nConstraints:\n- `logical_path` MUST be a relative path with no `..` segments and no leading `/`.\n\n", "chunk_sha256": "f474e3f0467127e2c755f51e6baa445ad393fa394ee09e99963e8ed77272a957"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0011", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "5. Digest format", "text": "#### 5. Digest format\n`<digest>` MUST be:\n- `sha256:<hex>` where `<hex>` is 64 lowercase hex characters.\n\n", "chunk_sha256": "b172910c4fea8f156e18c44ac4c69f44d9be648c11209dab340f0dcbd86be51e"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0012", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "6. Object store mapping", "text": "#### 6. Object store mapping\nFor any `sha256:<hex>` referenced by any record:\n- the corresponding blob bytes MUST exist at `objects/sha256/<hex>`.\n\n", "chunk_sha256": "b59899a3358576016f284acf55a7cacc94a76d6315b4a62b6cd174575a0754ee"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_text_v0.md::chunk::0013", "path": "docs/root/stunir_pack_root_attestation_text_v0.md", "source_git_sha": "c93325fa585f8187e70559665dce55c0f35f1db3", "heading": "7. Optional signature", "text": "#### 7. Optional signature\nA pack MAY include:\n- `root_attestation.txt.sig`\n\nSignature format is deployment-specific.\nRecommended default for minimal environments:\n- OpenSSL-compatible signature over the exact `root_attestation.txt` bytes.\n\nMinimal verifiers MAY verify the signature if a trusted public key is provided.\n", "chunk_sha256": "600ccaf150a7e41e91c5132e499cbd0da99421a6872b2c2b661558462a6f40cc"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0000", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "STUNIR Pack Root Attestation v0 \u0014 Schema (dCBOR)", "text": "### STUNIR Pack Root Attestation v0 \u0014 Schema (dCBOR)\n\n", "chunk_sha256": "34fccbe498cea5077370ee885e3a46efd2d4a063cf63dc3b25c5b2dc49a4b20b"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0001", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "0. Encoding", "text": "#### 0. Encoding\n`root_attestation.dcbor` MUST be canonical dCBOR.\n\nA minimal-toolchain text encoding is specified separately in:\n- `stunir_pack_root_attestation_text_v0.md`\n\n", "chunk_sha256": "575ac66acff19391c6d8797fb3313e2056b854b6cf919384b94077e665eca356"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0002", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "1. Top-level object", "text": "#### 1. Top-level object\nThe root attestation is a CBOR map.\n\nRequired keys:\n- `attestation_version` (text) \u0014 MUST equal `\"stunir.pack.root_attestation.v0\"`\n- `ir` (map) \u0014 IR descriptor\n- `receipts` (array) \u0014 zero or more receipt descriptors\n\nOptional keys:\n- `inputs` (array) \u0014 zero or more input descriptors (recommended for upstream audit)\n- `epoch` (int or text)\n- `policies` (map)\n- `toolchain` (map)\n- `artifacts` (array)\n- `extensions` (map)\n\n", "chunk_sha256": "48b412b09712859131d4f1e617f09b18e0926b0955c5b7ae04a6f2d6a7247c3c"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0003", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "2. Digest string format", "text": "#### 2. Digest string format\nA digest is a text string of the form:\n- `\"sha256:<hex>\"` where `<hex>` is lowercase hex.\n\n", "chunk_sha256": "dad138a946c738c711e3bc364f7849425cf04e72d80d75e671f2266cb5d32afd"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0004", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "3. IR descriptor", "text": "#### 3. IR descriptor\n`ir` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n\n", "chunk_sha256": "f2088f27d698e9f9a88ca8b94408452f6b5949598a2a48fc6cb234f32ac98192"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0005", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "4. Input descriptor", "text": "#### 4. Input descriptor\nEach entry in `inputs` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n- `kind` (text)\n\n", "chunk_sha256": "9ef9c184488beb5bb58a86160acdba96c8a7c3e87432606cfce0b21714e85ca6"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0006", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "5. Receipt descriptor", "text": "#### 5. Receipt descriptor\nEach entry in `receipts` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n\nOptional:\n- `purpose` (text)\n- `signature` (map)\n\n", "chunk_sha256": "65e37d2e2c5856072bdb8eeb633ce5e1a4ca82618f1ab0864b1f3bea4abe0166"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0007", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "6. Artifact descriptor", "text": "#### 6. Artifact descriptor\nEach entry in `artifacts` is a map with required keys:\n- `digest` (text)\n- `media_type` (text)\n- `kind` (text)\n\nOptional:\n- `logical_path` (text)\n- `source_ir` (text)\n\n", "chunk_sha256": "7b441ecba761cc56eb63c1c37a7fb842fff0785d2831517576e76c2b5b8aecba"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0008", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "7. Object store mapping rule", "text": "#### 7. Object store mapping rule\nFor any digest `sha256:<hex>`, the corresponding blob MUST be present at:\n- `objects/sha256/<hex>`\n\n", "chunk_sha256": "175bab656c68855da990dca6f955ec64db2e65e187f9d61db1d5c1e7b911a04e"}
{"chunk_id": "docs/root/stunir_pack_root_attestation_v0.md::chunk::0009", "path": "docs/root/stunir_pack_root_attestation_v0.md", "source_git_sha": "9251e3b949a8afcc539d70a39390b1b67babfb27", "heading": "8. Canonical pack identifier (recommended)", "text": "#### 8. Canonical pack identifier (recommended)\nA consumer MAY define:\n$$\text{pack_id} = \text{SHA256}(\text{bytes}(root_attestation.dcbor))$$\n", "chunk_sha256": "ef28e9f2d05a91251c0ab8f48513030a4c278f6f631b8e1905cb996b75c5e2f1"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0000", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "STUNIR Pack v0 \u0014 Security Considerations", "text": "### STUNIR Pack v0 \u0014 Security Considerations\n\n", "chunk_sha256": "241ead64acaf682a8a69abb82a03685c82948af074e5f3aad4712696060630ae"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0001", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "1. Threats addressed by the pack format", "text": "#### 1. Threats addressed by the pack format\nThe pack format primarily defends against:\n- **Tampering**: modifying IR/attestation artifacts/artifacts without detection.\n- **Substitution**: swapping one artifact for another with a different digest.\n- **Mix-and-match**: combining parts from different packs to confuse provenance.\n- **Archive attacks**: path traversal (`../`), absolute paths, duplicate entries.\n\nThe pack format does not, by itself, defend against:\n- compromised hash functions,\n- malicious tools that intentionally produce \u001cbad but deterministic\u001d outputs,\n- consumers who skip verification.\n\n", "chunk_sha256": "a356f05466cc177c6f8f6e4f6d704abf370fe08b557b51154b1f8067224670f2"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0002", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "2. Mandatory verifier behaviors", "text": "#### 2. Mandatory verifier behaviors\nA verifier MUST:\n- recompute digests for every referenced blob,\n- ignore non-root-attestation files for integrity purposes,\n- reject archive entries with unsafe paths,\n- reject duplicate archive entries that map to the same unpack path,\n- treat missing referenced objects as an error.\n\n", "chunk_sha256": "757353ed8a97c5fcc18e3e0809e479a29a5646a27ae8404a1cdee40e2e5c89c3"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0003", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "3. Root attestation encodings", "text": "#### 3. Root attestation encodings\nA pack may provide its root attestation as:\n- `root_attestation.dcbor` (preferred), and/or\n- `root_attestation.txt` (minimal-toolchain fallback).\n\nIf both are present, they MUST be equivalent.\n\n", "chunk_sha256": "c9c8e8eae1be2730c25c8f7fb37557a58e95fed4748bc6bac505c78419d84684"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0004", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "4. Receipts and signatures", "text": "#### 4. Receipts and signatures\nReceipts MAY be signed.\n- If signatures are present, verifiers SHOULD validate them.\n- If signatures are not present, receipts still provide *tamper evidence* when their digests are bound in the root attestation, but not *authenticity*.\n\nAuthenticity is typically added via:\n- offline signing keys,\n- signatures over the root attestation bytes (dCBOR or text),\n- Sigstore/Cosign signatures over the root attestation digest,\n- or TUF distribution metadata.\n\n", "chunk_sha256": "58eb62d45603f869fe82e5fc374db361a3a409a240c1db77cf2158395e648181"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0005", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "5. Rollback / freeze / update security", "text": "#### 5. Rollback / freeze / update security\nIf packs are distributed via an update system, implement protections against:\n- rollback to older vulnerable packs,\n- freeze attacks (withholding updates),\n- malicious mirrors.\n\nTUF is a common solution for these classes of threats.\n\n", "chunk_sha256": "8aca3a1c2ac307fc5fdf5c3510c25430e879e102a0d30cac7073bc6bcedee494"}
{"chunk_id": "docs/root/stunir_pack_security_v0.md::chunk::0006", "path": "docs/root/stunir_pack_security_v0.md", "source_git_sha": "f86b558dbf593341f3feefccfdb59986ff32cc02", "heading": "6. Privacy", "text": "#### 6. Privacy\nIf receipts embed hostnames, usernames, absolute paths, or environment details, they may leak sensitive information.\n- The pack profile SHOULD prefer receipts that exclude unnecessary host-specific data.\n- If platform/audit details are needed, store them as optional, non-core receipt fields.\n", "chunk_sha256": "46a474b933590a0d4529c611e76097111485a640306c79a7f4d1a8970b43aa2f"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0000", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "STUNIR Pack v0 (Directory or Archive) \u0014 Specification", "text": "### STUNIR Pack v0 (Directory or Archive) \u0014 Specification\n\n", "chunk_sha256": "495587871df195a3f14e2b5ba82ff3213d420afb227c21deb89b9ca2d18207ba"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0001", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "0. Status and scope", "text": "#### 0. Status and scope\nThis document defines the **STUNIR Pack v0** interchange format.\n\nA **STUNIR pack** is the unit a model (or other consumer) ingests as a **deterministic container + commitment** for:\n- a canonical **Intermediate Reference (IR)**,\n- an **attestation bundle** binding pipeline steps to digests,\n- (optionally) the relevant **inputs** (e.g., the spec) needed to audit upstream.\n\nA pack MAY also include other blobs, but **v0 does not assume that downstream runtime outputs are baked into the pack**.\n\nA pack may be represented as:\n- a **directory tree**, or\n- an **archive** of that tree (e.g., a `.zip`).\n\n", "chunk_sha256": "b570166a27e2f8280c82c3fe37148d4cf36f1376f2dbf78ac7a3853687491808"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0002", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "1. Terminology", "text": "#### 1. Terminology\n- **Blob**: a byte string.\n- **Digest**: a cryptographic hash identifier of a blob.\n- **sha256 digest**: `sha256:<hex>` where `<hex>` is lowercase hex of 32-byte SHA-256.\n- **Object store**: directory mapping digests to blobs.\n- **Root attestation**: the canonical bootstrap artifact that inventories pack contents by digest.\n- **Attestation artifact**: any emitted evidence object (e.g., step receipts, root attestation, provenance/SBOM objects, DSSE envelopes).\n- **Receipt**: a step-scoped evidence object emitted by the STUNIR harness.\n\nNormative keywords: **MUST**, **SHOULD**, **MAY**.\n\n", "chunk_sha256": "686d2f2766dc400663a53dcac4b78ae2c30cf269d927670673bd7f2d377ad753"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0003", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "2. High-level invariants", "text": "#### 2. High-level invariants\nA conforming STUNIR pack:\n1. **MUST be self-describing** via its root attestation.\n2. **MUST be locally verifiable** without network access.\n3. **MUST bind all included integrity-boundary content** by digest in the root attestation.\n\n", "chunk_sha256": "c402e121f68a0c94151a409869cd71601bd5345c358f7181ae7ef2c999802dbe"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0004", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "3. Directory layout", "text": "#### 3. Directory layout\nA STUNIR pack directory MUST have:\n- `objects/sha256/` (REQUIRED)\n- one of:\n  - `root_attestation.dcbor` (REQUIRED for the canonical encoding), or\n  - `root_attestation.txt` (REQUIRED for minimal-toolchain environments)\n\nA pack SHOULD include `root_attestation.dcbor`.\nA pack MAY include both encodings.\n\nBack-compat note:\n- `pack_manifest.dcbor` MAY be present as a legacy alias.\n\n", "chunk_sha256": "7650840bab577613a4be627d3b51be8334e1bc3488c6c953b793b2959613eda0"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0005", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "4. Object store", "text": "#### 4. Object store\nAll included integrity-boundary content MUST be stored as digest-addressed blobs:\n- Path form: `objects/sha256/<hex>`\n- File bytes MUST be exactly the blob bytes.\n\nThe root attestation MUST reference blobs by digest (not by path). Paths are not part of the security boundary.\n\n", "chunk_sha256": "fa5afafb66cd3358590a7ada0ae9c1d9a622ff87a52a88b4611fa567daa2644d"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0006", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5. Root attestation encodings", "text": "#### 5. Root attestation encodings\nv0 supports two equivalent encodings of the root attestation:\n\n", "chunk_sha256": "69d0449d590de625509a08a724531f8e49c46344faf29b2a259982327be8da8f"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0007", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5.1 Canonical encoding: dCBOR", "text": "##### 5.1 Canonical encoding: dCBOR\n- File: `root_attestation.dcbor`\n- Spec: `stunir_pack_root_attestation_v0.md`\n\nThis is the preferred encoding for strict determinism and compactness.\n\n", "chunk_sha256": "6905dfc8d7bc42c13ad6ace8166935260a17e91eea262ccb90a45edbfe536fdb"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0008", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5.2 Minimal-toolchain encoding: text", "text": "##### 5.2 Minimal-toolchain encoding: text\n- File: `root_attestation.txt`\n- Spec: `stunir_pack_root_attestation_text_v0.md`\n\nThis encoding exists to support environments that cannot run Python and cannot install custom binaries. It is intentionally parseable with:\n- POSIX shell + awk/sed + `sha256sum`/`shasum`/`openssl`, and\n- Windows PowerShell (`Get-FileHash`) or cmd (`certutil`).\n\n", "chunk_sha256": "2c22b84e623b255324f32eaada099cefeba8af991ca4f5f8e41249fcdf741729"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0009", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "5.3 Equivalence rule", "text": "##### 5.3 Equivalence rule\nIf both `root_attestation.dcbor` and `root_attestation.txt` are present:\n- They MUST describe the same inventory and the same `ir.digest`.\n- Consumers SHOULD treat `root_attestation.dcbor` as authoritative.\n\n", "chunk_sha256": "96dd5e20b3e7a5f15b95acb145528fd92191c51fd96ee486fa01952b82c1e99e"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0010", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "6. Verification requirements", "text": "#### 6. Verification requirements\nA verifier MUST implement:\n1. Decode an available root attestation encoding.\n2. Validate required fields for that encoding.\n3. For every referenced digest, recompute SHA-256 over `objects/sha256/<hex>` and compare.\n4. Confirm there is exactly one canonical IR referenced.\n\nA verifier MAY provide a stronger mode that re-runs the harness and confirms it reproduces the same digests.\n\n", "chunk_sha256": "8cae62d73eb2b04bcbfa2dae84c1d7dbd6364fbe2396031c8c00a124a429e92a"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0011", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "7. Archive representation", "text": "#### 7. Archive representation\nA pack MAY be distributed as an archive of the directory tree.\nDeterministic archiving guidance is defined in `stunir_pack_archiving_v0.md`.\n\n", "chunk_sha256": "69278e41106afaf43855bdc5a0ed1c8faeb681ccf30f72087e462d098cf01a9a"}
{"chunk_id": "docs/root/stunir_pack_spec_v0.md::chunk::0012", "path": "docs/root/stunir_pack_spec_v0.md", "source_git_sha": "e9dd93fbcd500642cb6d7b94a75e7a1576c7f11a", "heading": "8. Security boundary notes", "text": "#### 8. Security boundary notes\n- Only blobs referenced by digest in the root attestation are authoritative.\n- Any file not referenced by digest MUST be ignored for integrity purposes.\n\nSecurity considerations are expanded in `stunir_pack_security_v0.md`.\n", "chunk_sha256": "5f223459d9b65cce932afb1364fd58b7002e4a6c9bab7e0e659b22e4944e6823"}
{"chunk_id": "docs/targets/README.md::chunk::0000", "path": "docs/targets/README.md", "source_git_sha": "dcaa12d77821a65089ead3078e439a328f631e93", "heading": "Target language scaffolding", "text": "# Target language scaffolding\nThis directory collects **per-output-language planning artifacts** used to implement STUNIR output targets.\n\n- Narrative implementation plans live under `docs/targets/`.\n- Machine-readable target matrices live under `spec/targets/`.\n- RFC6902 patch proposals live under `spec/patches/`.\n\nCross-cutting emission interface:\n- `docs/code_emission.md` (IR \u2192 code emission contract)\n\nThese files are intended to be kept in-repo as part of the implementation record.\nThey are not build outputs.\n", "chunk_sha256": "a14a206b50ea60e0bf9835252b626427aaf99bdb754b34612c89de004c8de531"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0000", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "Lisp target implementation plan (STUNIR)", "text": "### Lisp target implementation plan (STUNIR)\n\n", "chunk_sha256": "fab31f1b406412287c14e79e4111287e444c6fba1af8ecf93f3803b02abd9cbc"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0001", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "0) Scope and non-goals", "text": "#### 0) Scope and non-goals\nThis document is a **concrete implementation plan** for adding Lisp output to STUNIR as **two targets**:\n\n1) **Portable Common Lisp baseline** (family-level, standard CL only)\n2) **SBCL-first variant** (implementation-specific where appropriate; SBCL required)\n\nThis plan is written to avoid repo-crawl loops by anchoring all references to the repo index:\n- `AI_START_HERE.md` (navigation index)\n- `ENTRYPOINT.md` (pack entrypoint + navigation)\n\nNon-goals (for this bundle):\n- Implementing the full Lisp backend codegen now.\n- Defining the complete IR\u2192language lowering semantics.\n\nThe intent is to specify **exact targets**, **artifact layout**, **receipt bindings**, and **determinism tests** so implementation can proceed mechanically.\n\n", "chunk_sha256": "594fccee8bf9f0e39c4a2633ff43e3d86b6f28d5b933559cb6342b8f4b8e6409"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0002", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "1) Target names (authoritative)", "text": "#### 1) Target names (authoritative)\nSTUNIR currently uses `STUNIR_OUTPUT_TARGETS` (comma-separated) for dependency resolution/probing.\nWe will add/define the following output targets:\n\n- Target `lisp`  \n  Meaning: **Portable Common Lisp baseline**.\n\n- Target `lisp_sbcl`  \n  Meaning: **SBCL-first variant**.\n\nDesign rule:\n- The baseline target (`lisp`) MUST be **runnable (in principle)** on any conforming Common Lisp, but the build does not require any Lisp runtime.\n- The SBCL variant (`lisp_sbcl`) MAY use SBCL extensions and MAY optionally produce SBCL-facing materialized artifacts.\n\n", "chunk_sha256": "8d9d56b686b99c22d11695ab19df7e67c4f22e505393e9e00247354e4fbe944b"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0003", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "2) Dependency contracts & requirements mapping", "text": "#### 2) Dependency contracts & requirements mapping\nToolchain contracts live in `contracts/*.json` and are mapped by `contracts/target_requirements.json`.\n\n", "chunk_sha256": "5a85f85285b5e6450b54188606c9bbf76ca384da60c3d775533ac379249be17a"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0004", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "2.1 Required contracts per target", "text": "##### 2.1 Required contracts per target\n- `lisp`:\n  - `required_contracts`: `[]`\n  - `optional_contracts`: `[]` (note: the harness currently probes *required only*)\n\n- `lisp_sbcl`:\n  - `required_contracts`: `[\"sbcl\"]`\n  - `optional_contracts`: `[]`\n\nRationale:\n- The portable baseline is **source emission only**; it should not depend on any external runtime.\n- The SBCL variant explicitly chooses a concrete implementation and therefore requires the `sbcl` contract.\n\n", "chunk_sha256": "e2f47be2c9e8f1d1cb57e3e098abaa451cdd72a9636890fdb445434037c19f42"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0005", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "2.2 Aliases", "text": "##### 2.2 Aliases\nKeep existing aliases that map Common Lisp names to the baseline:\n- `cl`, `commonlisp` \u2192 `lisp`\n\nAdd new aliases for explicitly requesting the SBCL variant:\n- `sbcl_lisp`, `lisp_sbcl`, `cl_sbcl` \u2192 `lisp_sbcl`\n\n(Exact alias keys are supplied in the patch file in this bundle.)\n\n", "chunk_sha256": "0c3bded011a5a26131da45a5b4a4e806b8cb052220cc59fccd1b07fe54e5198d"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0006", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "3) Artifact layout (exact paths)", "text": "#### 3) Artifact layout (exact paths)\nSTUNIR already emits canonical IR into `asm/` and uses `receipts/` for manifests/receipts.\nWe will follow the same pattern as the IR file manifest (`receipts/ir_manifest.json` listing bytes under `asm/ir`).\n\n", "chunk_sha256": "fa8f847f34fe830cae904927d06e5942ba1cb1094d5f528e967a927f4bd1b03b"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0007", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "3.1 Baseline target (`lisp`): portable Common Lisp", "text": "##### 3.1 Baseline target (`lisp`): portable Common Lisp\nOutput directory (materialized, deterministic):\n- `asm/lisp/portable/`\n\nMinimum files (v0):\n- `asm/lisp/portable/package.lisp`  (packages, nicknames, exported symbols)\n- `asm/lisp/portable/runtime.lisp`  (small STUNIR runtime helpers, pure CL)\n- `asm/lisp/portable/program.lisp`  (the generated program entry)\n- `asm/lisp/portable/README.md`     (non-normative usage notes; may be omitted)\n\nCanonical output manifest (file list + digests):\n- `receipts/lisp_portable_manifest.json`\n\nBuild receipt (binds tool+argv+inputs to manifest digest):\n- `receipts/lisp_portable.json` with:\n  - `target`: `receipts/lisp_portable_manifest.json`\n  - `status`: `CODEGEN_EMITTED_LISP_PORTABLE` (or `CODEGEN_SKIPPED` when not requested)\n\n", "chunk_sha256": "cf14324c035812eed3522783f745a83e31516177b9714e91de4f99616a8b9a95"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0008", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "3.2 SBCL target (`lisp_sbcl`): implementation-specific variant", "text": "##### 3.2 SBCL target (`lisp_sbcl`): implementation-specific variant\nOutput directory (materialized, deterministic at the *source* level):\n- `asm/lisp/sbcl/`\n\nMinimum files (v0):\n- `asm/lisp/sbcl/package.lisp`\n- `asm/lisp/sbcl/runtime.lisp`  (may include `sb-ext:` features guarded by `#+sbcl`)\n- `asm/lisp/sbcl/program.lisp`\n- `asm/lisp/sbcl/README.md` (non-normative; may be omitted)\n\nOptional additional artifacts (v1+), explicitly scoped:\n- `asm/lisp/sbcl/materialized/` for SBCL-produced artifacts (e.g., FASL/core images) **only when explicitly enabled**.\n  - These are implementation- and platform-sensitive.\n  - If included, they MUST be listed in the corresponding manifest.\n\nCanonical output manifest:\n- `receipts/lisp_sbcl_manifest.json`\n\nBuild receipt:\n- `receipts/lisp_sbcl.json` with:\n  - `target`: `receipts/lisp_sbcl_manifest.json`\n  - `status`: `CODEGEN_EMITTED_LISP_SBCL` (or `TOOLCHAIN_REQUIRED_MISSING` / `CODEGEN_SKIPPED`)\n\n", "chunk_sha256": "213034adb50dfb13e6b3982b73a9b6a1570efef4c928738ef73f7b1a89990759"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0009", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "4) Receipt bindings (what must be included as inputs)", "text": "#### 4) Receipt bindings (what must be included as inputs)\nReceipts are the binding layer; they must make it possible to re-check determinism and tool identity.\n\n", "chunk_sha256": "0525098e2d405a6341929abc8c30def404d5e12f103130a3034600ae23983c69"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0010", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "4.1 Baseline (`lisp`) receipt input closure", "text": "##### 4.1 Baseline (`lisp`) receipt input closure\n`receipts/lisp_portable.json` MUST include (as `inputs` and/or `input-dirs`) at least:\n- `build/epoch.json` (via `--epoch-json`, already captured in the receipt)\n- `build/provenance.json`\n- `receipts/ir_manifest.json` and `receipts/ir_bundle_manifest.json`\n- `asm/ir/` as an input-dir (or the specific IR files the Lisp backend reads)\n- the Lisp codegen tool source(s), e.g.:\n  - `tools/ir_to_lisp_portable.py` (proposed)\n  - shared libraries used by codegen (e.g., `tools/dcbor.py` if it reads dCBOR)\n\nRule:\n- The portable target MUST NOT depend on any dependency acceptance receipt.\n\n", "chunk_sha256": "3eca21729635ca0c2c29d1567a0364c5a3fd0bebf7d94c9c6432a37af7092464"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0011", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "4.2 SBCL (`lisp_sbcl`) receipt input closure", "text": "##### 4.2 SBCL (`lisp_sbcl`) receipt input closure\n`receipts/lisp_sbcl.json` MUST include everything above PLUS:\n- `receipts/requirements.json` (so the target selection and required contracts are bound)\n- `receipts/deps/sbcl.json` (dependency acceptance receipt)\n\nThis creates an explicit binding:\n- **Codegen output digest** is bound to **SBCL acceptance evidence**.\n\n", "chunk_sha256": "7708c69e699343999b495e8cb96fc49ba14c19356aa03522092f23731fde3383"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0012", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "5) Determinism tests", "text": "#### 5) Determinism tests\nDeterminism exists in two layers:\n- (A) Toolchain contract determinism (dependency probing)\n- (B) Backend/codegen determinism (STUNIR\u2019s own emission)\n\n", "chunk_sha256": "ff34e56e476a89e61cbdc7cc9160b727d97f47f592e1a496e9fd4b5b79a4d631"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0013", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "5.1 Toolchain contract determinism (SBCL)", "text": "##### 5.1 Toolchain contract determinism (SBCL)\nThe repo already has:\n- `contracts/sbcl.json` with a deterministic script test (`test_vectors/lisp/hello_sbcl.lisp`).\n\nStrengthening plan (recommended):\n- Add a second SBCL contract test that compiles a fixed input file to a deterministic output file and checks byte equality across repeats.\n- Use a test vector that avoids embedding host paths/time.\n\nNotes:\n- If SBCL\u2019s FASL format embeds non-stabilized metadata, prefer a determinism invariant on a **runtime-produced output file** as the primary test (which is already present), and keep compile determinism as a best-effort capability check.\n\n", "chunk_sha256": "9263c2156d73e6b772ac73c05e86e3bf2b58df57957d5aadd9818122bbc1cee9"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0014", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "5.2 Backend/codegen determinism (portable)", "text": "##### 5.2 Backend/codegen determinism (portable)\nFor `lisp` codegen, determinism is byte-level:\n- Given the same `asm/ir` + epoch manifest, the emitted `asm/lisp/portable/*` MUST be byte-identical.\n\nTest method:\n- Run the Lisp codegen twice into two separate temp output roots.\n- Compare:\n  - file set equality\n  - per-file sha256 equality\n  - manifest bytes equality\n\nEvidence capture (v0):\n- Store only the final output + its manifest, and rely on the verifier to re-run codegen in DSSE mode.\nEvidence capture (v1+):\n- Extend the manifest schema to include `repeat` digests (like dependency probes).\n\n", "chunk_sha256": "fa354861ae47015a5c3164b3e7a4d33b17107163ec6cda288b581e18e806af88"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0015", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "5.3 Backend/codegen determinism (SBCL variant)", "text": "##### 5.3 Backend/codegen determinism (SBCL variant)\nFor `lisp_sbcl` v0, determinism is required at the source-emission layer:\n- `asm/lisp/sbcl/*` MUST be byte-identical.\n\nOptional (v1+), only if materialized SBCL artifacts are enabled:\n- Require determinism of the materialized outputs within a fixed environment.\n- If not feasible, require deterministic *runtime outputs* rather than compiled artifact bytes.\n\n", "chunk_sha256": "94d824661cd682ab8496d879b39627a70f4dd5f170e3e617d1796d7643d9ca50"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0016", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "6) Verifier integrations", "text": "#### 6) Verifier integrations\nLocal verifier (`tools/verify_build.py`) currently checks:\n- `receipts/spec_ir.json`, `receipts/prov_emit.json`\n- `receipts/ir_manifest.json`, `receipts/ir_bundle_manifest.json`\n\nAdditions (non-breaking):\n- If `receipts/lisp_portable_manifest.json` exists, verify it is canonical JSON and that every file listed matches its digest.\n- If `receipts/lisp_sbcl_manifest.json` exists, verify similarly.\n- If `receipts/lisp_portable.json` / `receipts/lisp_sbcl.json` exist, verify they are canonical receipts and their `target` digest binds.\n\nDSSE verifier mode already supports:\n- rebuilding IR via `predicate.ir.rebuildCommand`\n- rebuilding outputs via `predicate.codegen.rebuildCommand`\n- verifying a single output manifest via `predicate.codegen.outputs.manifest`\n\nPlan alignment:\n- When producing a DSSE statement for Lisp outputs, set `predicate.codegen.outputs.manifest.uri` to an **aggregate output manifest** URI (see next section).\n\n", "chunk_sha256": "0fb0e7ca7afbff22e7f912c6d6f9618e25eea880fd02dec649e7609571171d82"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0017", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "7) Aggregate output manifest (recommended shape)", "text": "#### 7) Aggregate output manifest (recommended shape)\nTo fit DSSE mode (single manifest), create an aggregate manifest:\n- `receipts/output_manifest.json`\n\nContaining:\n- entries for each emitted target manifest:\n  - `receipts/lisp_portable_manifest.json`\n  - `receipts/lisp_sbcl_manifest.json`\n- and optionally direct entries for all leaf artifact files.\n\nThen, the DSSE statement\u2019s subject[0] can be:\n- `name`: `receipts/output_manifest.json`\n- `digest`: `{ \"sha256\": \"...\" }`\n\n", "chunk_sha256": "869607684e76f3a7b474ba0a39c56111a1b00335356f0bee457b0e1acc2f7992"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0018", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "8) Implementation checklist (mechanical)", "text": "#### 8) Implementation checklist (mechanical)\n1) Update `contracts/target_requirements.json`:\n   - redefine `lisp` as portable (no required contracts)\n   - add `lisp_sbcl` requiring `sbcl`\n   - add new aliases\n\n2) Add Lisp codegen tools (names are suggestions):\n   - `tools/ir_to_lisp_portable.py`\n   - `tools/ir_to_lisp_sbcl.py` (or a single tool with `--variant portable|sbcl`)\n\n3) Extend `scripts/build.sh`:\n   - parse `STUNIR_OUTPUT_TARGETS`\n   - when it includes `lisp`, run portable codegen into `asm/lisp/portable/`\n   - write `receipts/lisp_portable_manifest.json`\n   - record `receipts/lisp_portable.json`\n   - when it includes `lisp_sbcl`, ensure deps (already gated) and run SBCL variant codegen\n\n4) Extend `tools/verify_build.py` local mode to verify Lisp manifests/receipts if present.\n\n5) (Optional) Strengthen `contracts/sbcl.json` with an additional deterministic capability test.\n\n", "chunk_sha256": "9f15537077d3bfa6df5c79d4db57d014ba17a6ab1d2fe881ab282aa52dc3a7bb"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0019", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "9) Acceptance criteria", "text": "#### 9) Acceptance criteria\nThe implementation is \u201cdone\u201d for v0 when:\n- `STUNIR_OUTPUT_TARGETS=lisp` produces:\n  - `asm/lisp/portable/` deterministic bytes\n  - `receipts/lisp_portable_manifest.json` canonical JSON, correct digests\n  - `receipts/lisp_portable.json` canonical receipt, correct bindings\n  - local verify passes (`scripts/verify.sh`)\n\n- `STUNIR_OUTPUT_TARGETS=lisp_sbcl` produces:\n  - `asm/lisp/sbcl/` deterministic bytes\n  - `receipts/lisp_sbcl_manifest.json` canonical JSON, correct digests\n  - `receipts/lisp_sbcl.json` canonical receipt, correct bindings\n  - `receipts/deps/sbcl.json` accepted (from `scripts/ensure_deps.sh`)\n  - local verify passes (with new optional Lisp checks)\n\n", "chunk_sha256": "b42c147ec108d8ce85703969924b410efad2e5d5914f153786b95697c657bd17"}
{"chunk_id": "docs/targets/lisp/lisp_target_implementation_plan_v0.md::chunk::0020", "path": "docs/targets/lisp/lisp_target_implementation_plan_v0.md", "source_git_sha": "354dbdf5c89c87be514297911f266969ab99b3de", "heading": "10) Files in this bundle", "text": "#### 10) Files in this bundle\n- `lisp_target_implementation_plan_v0.md` (this document)\n- `rfc6902_target_requirements_lisp_split.json` (patch operations)\n- `rfc6902_machine_plan_add_lisp.json` (optional patch operations)\n- `lisp_targets_matrix.json` (machine-readable mapping: targets \u2192 outputs/receipts/contracts)\n- `lisp_plan_bundle_manifest.json` (sha256 of bundle contents)\n", "chunk_sha256": "bce4e10d7741b39d2f70ed693ebfb99b7c2bca7ead0fd80093230617f173a050"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0000", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "Python target implementation plan (STUNIR)", "text": "### Python target implementation plan (STUNIR)\n\n", "chunk_sha256": "3a47daf5ac4b839840872a17956db94c754c9562be19c19f53f9520a21e9a72c"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0001", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "0) Scope and intent", "text": "#### 0) Scope and intent\nThis is a concrete implementation plan for adding/strengthening **Python raw-code emission** in STUNIR.\n\nPrimary purpose: make STUNIR easier to build by enabling sample-input testing using a hosted runtime target.\n\nNon-goals (v0):\n- Fully specifying IR\u2192Python semantics.\n- Implementing a complete sample corpus.\n\n", "chunk_sha256": "f40c5feebbdb44dfdefee5112e53e9311f6435b4d219d25e9574f3caa7ba58fd"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0002", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "1) Targets", "text": "#### 1) Targets\nDefine two Python targets:\n\n- Target `python` (baseline)\n  - Meaning: **Python source emission only**.\n  - No Python runtime required to emit the artifacts.\n\n- Target `python_cpython` (variant)\n  - Meaning: **CPython-backed execution variant**.\n  - Requires the `python_runtime` contract acceptance.\n\nDesign rule:\n- `python` MUST be deterministic byte-for-byte given the same IR.\n- `python_cpython` MAY execute sample inputs (and capture runtime outputs) but emission remains deterministic.\n\n", "chunk_sha256": "eb0b6896d4b7e4e815229c70bd3a81d2ce909cd7489c49a35355ff5f027639ac"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0003", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "2) Artifact layout (exact paths)", "text": "#### 2) Artifact layout (exact paths)\nBaseline (`python`) outputs:\n- Root: `asm/python/portable/`\n- Files (v0):\n  - `asm/python/portable/runtime.py`\n  - `asm/python/portable/program.py`\n  - `asm/python/portable/README.md` (optional, non-normative)\n- Manifest: `receipts/python_portable_manifest.json`\n- Receipt: `receipts/python_portable.json`\n\nVariant (`python_cpython`) outputs:\n- Root: `asm/python/cpython/`\n- Files (v0):\n  - `asm/python/cpython/runtime.py`\n  - `asm/python/cpython/program.py`\n  - `asm/python/cpython/README.md` (optional, non-normative)\n- Manifest: `receipts/python_cpython_manifest.json`\n- Receipt: `receipts/python_cpython.json`\n\n", "chunk_sha256": "35108022ca3ac57dc9d4c902d739309d82792408748c9be9e486412f425ace23"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0004", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "3) Receipt bindings (input closure)", "text": "#### 3) Receipt bindings (input closure)\nPython receipts MUST bind at least:\n- `build/epoch.json`\n- `build/provenance.json`\n- `receipts/ir_manifest.json` and `receipts/ir_bundle_manifest.json`\n- `asm/ir/` (or enumerated IR files actually read)\n- the Python backend tool sources used to emit code\n\nVariant-only:\n- `receipts/requirements.json`\n- `receipts/deps/python_runtime.json`\n\n", "chunk_sha256": "7aae1b52145fe2f8c0538c0496f8fe49d936bb716f321640ced7ecf5d9631315"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0005", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "4) Determinism tests", "text": "#### 4) Determinism tests\nBackend determinism (mandatory for both targets at emission layer):\n- Run codegen twice into two temp roots.\n- Compare file set equality and per-file sha256 equality.\n- Compare manifest bytes equality.\n\nContract determinism (for `python_runtime`):\n- Use the existing Python contract and a fixed test vector that writes a deterministic output file.\n\n", "chunk_sha256": "d5a881d3492d340f9652b4e1ae73b8bec7541842c83bf21e1b3a0c09c5c458d7"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0006", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "5) Verifier integration", "text": "#### 5) Verifier integration\nLocal verifier should optionally verify:\n- `receipts/python_*_manifest.json` digests vs on-disk files.\n- `receipts/python_*.json` receipt bindings.\n\nDSSE mode:\n- Prefer a single aggregate `receipts/output_manifest.json` that references per-target manifests.\n\n", "chunk_sha256": "ece69b03b0f8c7bb2a6760e515220a9a5e41adf8a0279fd14cdb9e31c236b752"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0007", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "6) Implementation checklist", "text": "#### 6) Implementation checklist\n1) Update target requirements (patch provided in `spec/patches/`).\n2) Add backend tool:\n   - `tools/ir_to_python.py` with `--variant portable|cpython`.\n3) Extend `scripts/build.sh` to emit Python targets and write receipts/manifests.\n4) Extend `tools/verify_build.py` to verify Python manifests if present.\n\n", "chunk_sha256": "260401e1eecde6d7b42cafce5e221284769fd91ea44ed3dd805da434fb2c875a"}
{"chunk_id": "docs/targets/python/python_target_implementation_plan_v0.md::chunk::0008", "path": "docs/targets/python/python_target_implementation_plan_v0.md", "source_git_sha": "c77f37d31cb7f464e9c4db1c0f3735e0e7772b46", "heading": "7) Acceptance criteria (v0)", "text": "#### 7) Acceptance criteria (v0)\n- `STUNIR_OUTPUT_TARGETS=python` emits deterministic Python source + receipts, and local verify passes.\n- `STUNIR_OUTPUT_TARGETS=python_cpython` gates on accepted `python_runtime` and binds any runtime outputs deterministically.\n", "chunk_sha256": "f934b614c276d6566a163d9ff43cfdfc8a0030ac0f4304f1a1664dd3a065f410"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0000", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "SMT-LIB (SMT2) target implementation plan (STUNIR)", "text": "### SMT-LIB (SMT2) target implementation plan (STUNIR)\n\n", "chunk_sha256": "5843c2aa305bcaf08e2a1ec865d754297285ff342baf2930bbe88c3e2dbc4317"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0001", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "0) Scope and intent", "text": "#### 0) Scope and intent\nThis is a concrete plan for adding/strengthening **SMT-LIB v2 (SMT2) raw constraint emission** in STUNIR.\n\nPrimary purpose: validate IR lowering and semantics using solver-backed sample-input checks.\n\nNon-goals (v0):\n- Full semantic coverage of the IR.\n- Proof generation and cross-solver equivalence.\n\n", "chunk_sha256": "0e021b3f19e273740ca34e441f1462e1d4d69ed7df6131ba130d4e9a57b6ba0a"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0002", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "1) Targets", "text": "#### 1) Targets\nDefine two SMT targets:\n\n- Target `smt` (baseline)\n  - Meaning: **SMT2 source emission only**.\n  - No solver required to emit artifacts.\n\n- Target `smt_z3` (variant)\n  - Meaning: **Z3-backed execution variant**.\n  - Requires the `z3_solver` contract acceptance.\n\nDesign rule:\n- Emitted `*.smt2` MUST be deterministic byte-for-byte.\n\n", "chunk_sha256": "f7f4cc9583c9a0f68375004680f0ff236e605c49bbb0bac7ea0024240785d37f"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0003", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "2) Artifact layout (exact paths)", "text": "#### 2) Artifact layout (exact paths)\nBaseline (`smt`) outputs:\n- Root: `asm/smt/portable/`\n- Files (v0):\n  - `asm/smt/portable/problem.smt2`\n  - `asm/smt/portable/README.md` (optional, non-normative)\n- Manifest: `receipts/smt_portable_manifest.json`\n- Receipt: `receipts/smt_portable.json`\n\nVariant (`smt_z3`) outputs:\n- Root: `asm/smt/z3/`\n- Files (v0):\n  - `asm/smt/z3/problem.smt2`\n  - `asm/smt/z3/solver_stdout.txt` (captured stdout)\n- Manifest: `receipts/smt_z3_manifest.json`\n- Receipt: `receipts/smt_z3.json`\n\n", "chunk_sha256": "335a81417f367d214e57092f156250aa24bc6adc83bd84f8659f4f952171917d"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0004", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "3) Receipt bindings (input closure)", "text": "#### 3) Receipt bindings (input closure)\nSMT receipts MUST bind at least:\n- `build/epoch.json`\n- `build/provenance.json`\n- `receipts/ir_manifest.json` and `receipts/ir_bundle_manifest.json`\n- `asm/ir/` (or enumerated IR files actually read)\n- the SMT backend tool sources used to emit constraints\n\nVariant-only:\n- `receipts/requirements.json`\n- `receipts/deps/z3_solver.json`\n\n", "chunk_sha256": "ba16aa6d72ebbace73b4ff8835e2558f8f7de77c6105a62293a4bab4e81b1f41"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0005", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "4) Determinism tests", "text": "#### 4) Determinism tests\nBackend determinism (mandatory):\n- Run SMT emission twice; compare file set + sha256 + manifest bytes.\n\nContract determinism (for `z3_solver`):\n- Use the existing Z3 contract and hash solver stdout on a fixed vector.\n\n", "chunk_sha256": "72616730cfc921076000c1a2cf41bb4cafb5828a5235ed084ed45301fcee313c"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0006", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "5) Verifier integration", "text": "#### 5) Verifier integration\nLocal verifier should optionally verify:\n- `receipts/smt_*_manifest.json` digests vs on-disk files.\n- `receipts/smt_*.json` receipt bindings.\n\nDSSE mode:\n- Prefer a single aggregate `receipts/output_manifest.json` that references per-target manifests.\n\n", "chunk_sha256": "9d786e6d76c47352b6fca7eeb9b5a7c0f9ca7ebb872ef733c8da0c5fecf294bd"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0007", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "6) Implementation checklist", "text": "#### 6) Implementation checklist\n1) Update target requirements (patch provided in `spec/patches/`).\n2) Add backend tool:\n   - `tools/ir_to_smt2.py` with `--variant portable|z3`.\n3) Extend `scripts/build.sh` to emit SMT targets and write receipts/manifests.\n4) Extend `tools/verify_build.py` to verify SMT manifests if present.\n\n", "chunk_sha256": "0cbff52fd1cb9604611d6e16234623b52ed431ceb29b7858b52360df11454b53"}
{"chunk_id": "docs/targets/smt/smt_target_implementation_plan_v0.md::chunk::0008", "path": "docs/targets/smt/smt_target_implementation_plan_v0.md", "source_git_sha": "239a5fba7be9ba7730b9c3ba8a87e5f65856d2a6", "heading": "7) Acceptance criteria (v0)", "text": "#### 7) Acceptance criteria (v0)\n- `STUNIR_OUTPUT_TARGETS=smt` emits deterministic SMT2 source + receipts, and local verify passes.\n- `STUNIR_OUTPUT_TARGETS=smt_z3` gates on accepted `z3_solver` and binds solver stdout deterministically.\n", "chunk_sha256": "a5c08115449739f921b26852fae00f7f4a217103276ef285240440a9e8b4485b"}
{"chunk_id": "docs/toolchain_contracts.md::chunk::0000", "path": "docs/toolchain_contracts.md", "source_git_sha": "5914c76cbd049667f7d2188b35d4bb0890361540", "heading": "Toolchain contracts (lifted toolchains)", "text": "# Toolchain contracts (lifted toolchains)\n\nThis directory documents how STUNIR \"lifts\" existing toolchains (runtimes, compilers, engines) into trackable and attestable operations.\n\n", "chunk_sha256": "bb82bb1bceffce6da9c54dde8454575c18d554d40ce842723088dfbe2a7c016a"}
{"chunk_id": "docs/toolchain_contracts.md::chunk::0001", "path": "docs/toolchain_contracts.md", "source_git_sha": "5914c76cbd049667f7d2188b35d4bb0890361540", "heading": "The pattern", "text": "## The pattern\n\n1. Add a contract JSON in `contracts/*.json`.\n2. Map a target name to required contracts in `contracts/target_requirements.json`.\n3. Add one or more deterministic test vectors in `test_vectors/<lang>/`.\n4. Probe tools to produce acceptance receipts:\n\n- `scripts/ensure_deps.sh` emits:\n  - `receipts/requirements.json`\n  - `receipts/deps/<contract>.json`\n\n5. Verify acceptance receipts satisfy requirements:\n\n- `scripts/verify_deps.sh`\n\n", "chunk_sha256": "1625ed83e2e2ca95a4dfc2227e1e9de8f5eca485b0f9eda758244d1f0be3ceb3"}
{"chunk_id": "docs/toolchain_contracts.md::chunk::0002", "path": "docs/toolchain_contracts.md", "source_git_sha": "5914c76cbd049667f7d2188b35d4bb0890361540", "heading": "Notes", "text": "## Notes\n\n- Contracts should prefer **file-producing determinism tests** (same inputs => byte-identical outputs).\n- For ecosystems that risk network access during probe (e.g., `dotnet restore`), start with identity-only contracts and strengthen later with offline test vectors.\n", "chunk_sha256": "e09e8002cfe4ce4cab217077cb5e63fb61c8c5c27626d3ae6e1b42162e5fda34"}
{"chunk_id": "docs/verification.md::chunk::0000", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "STUNIR Verification Contract", "text": "# STUNIR Verification Contract\n\nThis repo supports multiple verification profiles.\n\n", "chunk_sha256": "eee2ebed0d288e18c389362fe67fd2ad6ac9fb9df49ce1a8e41e60d106b13e5b"}
{"chunk_id": "docs/verification.md::chunk::0001", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Profile 1: Local verification (Python)", "text": "## Profile 1: Local verification (Python)\n\n", "chunk_sha256": "d45e7b5f7bf18af4b616a842af3dacc09a81a63a4cd83e447c92a0989242773b"}
{"chunk_id": "docs/verification.md::chunk::0002", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Run", "text": "### Run\n\n- `./scripts/build.sh`\n- `./scripts/verify.sh`\n\nLocal verification checks canonical JSON, receipt integrity, IR manifests, and related invariants.\n\n", "chunk_sha256": "28b446953611fa5a42234b5766adce9bd8e2967558f76a17cd57c653d240cf15"}
{"chunk_id": "docs/verification.md::chunk::0003", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Profile 2: Portable verifier binary (no Python)", "text": "## Profile 2: Portable verifier binary (no Python)\n\nA future/optional `stunir-verify` binary can be used to verify packs in environments where Python is unavailable but a standalone executable is allowed.\n\n", "chunk_sha256": "b1b4e7e8fee6f3bc7038caf925aaa0010131370524d8388656c42777d23e16e7"}
{"chunk_id": "docs/verification.md::chunk::0004", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Profile 3: Minimal verification (no Python, no custom binaries)", "text": "## Profile 3: Minimal verification (no Python, no custom binaries)\n\nThis profile is designed for very constrained environments.\n\nRequirements:\n- The pack MUST include `root_attestation.txt`.\n- The pack MUST include `objects/sha256/`.\n- A hashing tool MUST be available:\n  - Linux/macOS: `sha256sum` or `shasum` or `openssl`\n  - Windows PowerShell: `Get-FileHash`\n  - Windows cmd: `certutil`\n\n", "chunk_sha256": "986c57274abe7a11a245bf6270bacd6da391f68e6cf808e4a2225914ae014c08"}
{"chunk_id": "docs/verification.md::chunk::0005", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "POSIX-like", "text": "### POSIX-like\n\nUse `scripts/verify_minimal.sh`.\n\n", "chunk_sha256": "3054f63954bf8362c5379e37dbd5856e6035438f8e19f200d2734a750a8c9a31"}
{"chunk_id": "docs/verification.md::chunk::0006", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Windows PowerShell", "text": "### Windows PowerShell\n\nUse `scripts/verify_minimal.ps1`.\n\n", "chunk_sha256": "0cb81de175cb04ad13f2eeaa180897d103b4b5a407661696509ee7c1aecaaa22"}
{"chunk_id": "docs/verification.md::chunk::0007", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Windows cmd", "text": "### Windows cmd\n\nUse `scripts/verify_minimal.cmd`.\n\n", "chunk_sha256": "ef71fde1c632198dab1c301f0b60be441bd75ff428c33fec69364b2a80263612"}
{"chunk_id": "docs/verification.md::chunk::0008", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Optional (POSIX-like): strict Profile 3 manifest verification", "text": "### Optional (POSIX-like): strict Profile 3 manifest verification\n\nIf the pack binds a `pack_manifest.tsv` (see `docs/root/stunir_pack_manifest_v1.md`), you can run the stricter verifier:\n\n- `scripts/verify_profile3.sh`\n\nThis performs the minimal object-store checks plus pack-root manifest checking.\n\n", "chunk_sha256": "74a1f40da2fff6056abd89575101149271e58805091d456395f46c699d88ba21"}
{"chunk_id": "docs/verification.md::chunk::0009", "path": "docs/verification.md", "source_git_sha": "473cc854998e21199466b3d6d0c287dd9b2a1ed9", "heading": "Canonical JSON: `stunir-json-c14n-v1`", "text": "## Canonical JSON: `stunir-json-c14n-v1`\n\n(unchanged)\n\nA JSON byte sequence is canonical iff it is exactly the output of:\n- UTF-8 encoding\n- no floats anywhere (integers only)\n- object keys sorted lexicographically by Unicode codepoint\n- no whitespace (minified)\n- JSON string escaping as produced by Python `json.dumps(..., ensure_ascii=False)`\n\nThe verifier enforces this by parsing JSON and re-serializing with the canonical encoder, then requiring byte equality.\n\nFor local files, the verifier accepts an optional trailing newline.\n\n\nProfile 3 (strict): the verifier MUST hard-fail if root_attestation.txt does not bind pack_manifest.tsv via its SHA-256 digest.\n", "chunk_sha256": "5c38c8feef28ab3c151528288cf93764d3ee12cb1a89b94c5b1f8ff74ca0b5d6"}
{"chunk_id": "docs/verification_profiles.md::chunk::0000", "path": "docs/verification_profiles.md", "source_git_sha": "d89bbaeca3f3edcd008eb12076b745692be54877", "heading": "STUNIR Verification Profiles (Toolchain Levels)", "text": "### STUNIR Verification Profiles (Toolchain Levels)\nSTUNIR aims to make verification possible in constrained environments.\nThis document defines three practical verification profiles.\n", "chunk_sha256": "2b50f7e72934ba5e9bfbb5cb5ef6091169a7ef0eff72a1cbe0bc9c8a181f020e"}
{"chunk_id": "docs/verification_profiles.md::chunk::0001", "path": "docs/verification_profiles.md", "source_git_sha": "d89bbaeca3f3edcd008eb12076b745692be54877", "heading": "Profile 1: Full verification (Python)", "text": "#### Profile 1: Full verification (Python)\nIntended for developer machines and richer CI environments.\nCharacteristics:\n- Uses the repo's Python tools.\n- Performs schema checks, canonicalization checks, receipt integrity checks, and may re-run rebuild commands.\nPros:\n- Strongest checks.\nCons:\n- Requires Python.\n", "chunk_sha256": "8d38df3c978d72f80f4d302c43ecc6edb8698d9690e4d328765e6c6f322a59c1"}
{"chunk_id": "docs/verification_profiles.md::chunk::0002", "path": "docs/verification_profiles.md", "source_git_sha": "d89bbaeca3f3edcd008eb12076b745692be54877", "heading": "Profile 2: Portable verifier binary (no Python)", "text": "#### Profile 2: Portable verifier binary (no Python)\nIntended for environments without Python but where running a standalone binary is permitted.\nCharacteristics:\n- A single `stunir-verify` executable that:\n- decodes `root_attestation.dcbor`,\n- recomputes SHA-256 for referenced objects,\n- validates structural rules (exactly one IR, etc.),\n- optionally verifies DSSE/in-toto envelopes.\nSuggested implementation languages:\n- Go or Rust.\nPros:\n- Works in locked-down CI (no interpreter).\n- Keeps canonical dCBOR as the bootstrap.\nCons:\n- Requires distributing a binary.\n", "chunk_sha256": "234d82a5cfd4e4d498c8b38ce3302ac0b6da11e00eae571cc1403ccc48a88b4a"}
{"chunk_id": "docs/verification_profiles.md::chunk::0003", "path": "docs/verification_profiles.md", "source_git_sha": "d89bbaeca3f3edcd008eb12076b745692be54877", "heading": "Profile 3: Minimal verification (no Python, no custom binaries)", "text": "#### Profile 3: Minimal verification (no Python, no custom binaries)\nIntended for very constrained environments where only built-in OS tooling is allowed.\nThis profile relies on:\n- `root_attestation.txt` (the minimal-toolchain root attestation encoding), and\n- OS-provided hashing tools.\nProvided scripts:\n- `scripts/verify_minimal.sh` (POSIX-like)\n- `scripts/verify_minimal.ps1` (Windows PowerShell)\n- `scripts/verify_minimal.cmd` (Windows cmd)\nWhat it verifies:\n- Every digest listed in `root_attestation.txt` corresponds to a blob under `objects/sha256/`.\n- The blob's SHA-256 matches.\n- There is exactly one `ir` record.\nWhat it does NOT verify (typically):\n- Deep schema validation of receipt payloads.\n- Rebuild/replay.\n- Signature verification unless the environment has an allowed crypto tool.\nRecommendation:\n- If authenticity is required in Profile 3, distribute a public key and enable signature verification of `root_attestation.txt` when possible.\n", "chunk_sha256": "2ea1528f2ca85ff3584fcb082da07f6e55a6c493c15730d158f4a22f89e97aee"}
{"chunk_id": "docs/verification_profiles.md::chunk::0004", "path": "docs/verification_profiles.md", "source_git_sha": "d89bbaeca3f3edcd008eb12076b745692be54877", "heading": "Profile 3 (optional tightening): strict pack-manifest verification", "text": "##### Profile 3 (optional tightening): strict pack-manifest verification\nSome deployments want a strictly stronger *integrity* check while still staying within a shell-only toolchain.\nMechanism:\n- Include a `pack_manifest.tsv` file in the pack root.\n- Store its bytes in the object store and bind it from `root_attestation.txt` using an `artifact` record, for example:\n- `artifact sha256: kind=manifest logical_path=pack_manifest.tsv`\nVerifier:\n- Use `scripts/verify_profile3.sh`.\nWhat the strict verifier adds:\n- Verifies `pack_manifest.tsv` is present and hash-matches the attested digest.\n- Verifies `pack_manifest.tsv` is sorted deterministically.\n- Verifies every listed pack-root file hash-matches.\nNormative details:\n- `docs/root/stunir_pack_manifest_v1.md`\n- `contracts/stunir_profile3_contract.json` (normative contract for shell-only strict verification)\nProfile 3 (strict): the verifier MUST hard-fail if root_attestation.txt does not bind pack_manifest.tsv via its SHA-256 digest.\n", "chunk_sha256": "f8436f75c3cb673bfba3c02d9ffe3c00a52d880efebf70a34c61ea7b1aee5445"}
{"chunk_id": "scripts/stunir_build_helpers/README.md::chunk::0000", "path": "scripts/stunir_build_helpers/README.md", "source_git_sha": "3cb4f5d62c7a73d3aa623ad29286f0a66b2076b0", "heading": "STUNIR build helpers (release-layout)", "text": "# STUNIR build helpers (release-layout)\n\nThis bundle is **language-agnostic**: it provides one generic wrapper that sets `STUNIR_OUTPUT_TARGETS` and runs `scripts/build.sh`.\n\nIt is packaged in a **release-like layout** so that extracting at the repository root creates:\n\n- `scripts/stunir_build_helpers/...`\n\nand does **not** drop helper files directly into the repo root.\n\n", "chunk_sha256": "e026d36155248766dbaa1478026b77bcc4af88782f68e050d8e6393778f8df46"}
{"chunk_id": "scripts/stunir_build_helpers/README.md::chunk::0001", "path": "scripts/stunir_build_helpers/README.md", "source_git_sha": "3cb4f5d62c7a73d3aa623ad29286f0a66b2076b0", "heading": "Primary entrypoints", "text": "## Primary entrypoints\n\n- `scripts/stunir_build_helpers/build_targets.sh`\n- `scripts/stunir_build_helpers/build_targets.ps1`\n\nThey:\n\n- verify you are running from the STUNIR repo root (by requiring `scripts/build.sh`)\n- set `STUNIR_OUTPUT_TARGETS` to the targets you request\n- optionally set `STUNIR_REQUIRE_DEPS` to fail-fast when runtime/toolchain dependencies are missing\n\n", "chunk_sha256": "7c427d7237bbc61c87ed7dfaeed41335936c86544a2b8c83573884aed318d635"}
{"chunk_id": "scripts/stunir_build_helpers/README.md::chunk::0002", "path": "scripts/stunir_build_helpers/README.md", "source_git_sha": "3cb4f5d62c7a73d3aa623ad29286f0a66b2076b0", "heading": "Presets", "text": "## Presets\n\nConvenience wrappers live under:\n\n- `scripts/stunir_build_helpers/presets/`\n\nThese call `build_targets.*` with common target sets.\n\n", "chunk_sha256": "ca602646e9b93a848f76e91f098a365c837eb86d0d7f30b888473bfedd888d0a"}
{"chunk_id": "scripts/stunir_build_helpers/README.md::chunk::0003", "path": "scripts/stunir_build_helpers/README.md", "source_git_sha": "3cb4f5d62c7a73d3aa623ad29286f0a66b2076b0", "heading": "Notes", "text": "## Notes\n\n- Target names + aliases and required contracts are defined in `contracts/target_requirements.json`.\n- When `STUNIR_OUTPUT_TARGETS` is set, `scripts/build.sh` will run `scripts/ensure_deps.sh` to resolve requirements and probe dependencies.\n- For runtime-backed targets (e.g. `lisp_sbcl`, `python_cpython`, `smt_z3`), you typically want `--require-deps` so the build fails instead of skipping.\n\n", "chunk_sha256": "00582481edd7734249955ae5fe04b57a2e8d341877e45f1a54a47e40d5ea0667"}
{"chunk_id": "scripts/stunir_build_helpers/README.md::chunk::0004", "path": "scripts/stunir_build_helpers/README.md", "source_git_sha": "3cb4f5d62c7a73d3aa623ad29286f0a66b2076b0", "heading": "Examples (conceptual)", "text": "## Examples (conceptual)\n\nThis README intentionally does not include copy/paste commands; use the presets or call `build_targets` with your target list.\n", "chunk_sha256": "9e688dfa0ee70d9a6efee62250c3bec2381a744409f4ea4d303a1ace8c406585"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0000", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "Tier B (declarative) frontends plan (STUNIR)", "text": "### Tier B (declarative) frontends plan (STUNIR)\n\n", "chunk_sha256": "122ec88e0b3458fbbddd6f151807ad26bdfd37cff3d6241d129bb30b798fbde2"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0001", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "0) Goal", "text": "#### 0) Goal\nAdd *real* (semantic) source\u2192IR frontends **first** for declarative languages:\n- Prolog\n- Datalog\n- ASP\n- MiniZinc\n\nThis is Tier B: parsing + normalization + semantics-lift into canonical STUNIR IR.\n\n", "chunk_sha256": "a484a27f33048df600a162667bd8adab81dd048204754ccad50091c5e0b9df2e"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0002", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "1) Why declarative first", "text": "#### 1) Why declarative first\n- Clearer mapping to canonical meaning objects (rules/relations/constraints).\n- Less entanglement with platform UB, headers, macro systems.\n- Easier to define deterministic normalization (ordering, alpha-renaming, etc.).\n\n", "chunk_sha256": "deac13a4693cc1bc89beb52a9b515fcb260b39a65fd81ab133ed296f498c23fe"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0003", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "2) Compatibility policy", "text": "#### 2) Compatibility policy\nEach frontend MUST define:\n- accepted dialect/version baseline\n- rejected constructs (explicit)\n- deterministic normalization rules\n\nFrontends should begin as **strict subsets** with clear error messages.\n\n", "chunk_sha256": "c7cb3d67ec4bc0fef88919d6191238f9139477ffc7a3a4f75bde19679ac1b915"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0004", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "3) Output: canonical IR bundle", "text": "#### 3) Output: canonical IR bundle\nTier B frontends MUST produce the **byte-exact canonical IR bundle**.\nThis implies:\n- a fully-specified canonical serialization for produced IR\n- no dependence on runtime timestamps, filesystem paths, locale, etc.\n\n", "chunk_sha256": "fbd3b29d6bc4d94c0da8f7f5bf288a8e0df2372307f26beba8d2302049bc1444"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0005", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "4) Proposed phased delivery", "text": "#### 4) Proposed phased delivery\n\n", "chunk_sha256": "f24e96648c782d76371543f07fe20c64dbe3b3713c02a4fe42a4aa8b5927fb23"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0006", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "Phase B1: Surface syntax + canonical normalized AST (still meaningful)", "text": "##### Phase B1: Surface syntax + canonical normalized AST (still meaningful)\n- Parse input into an AST.\n- Normalize deterministically:\n  - stable ordering of declarations\n  - alpha-renaming of variables\n  - normalized literals\n- Emit IR that faithfully captures normalized AST.\n\nThis enables:\n- reproducible ingest\n- subsequent semantics passes without re-parsing\n\n", "chunk_sha256": "d552657099f9787c328d81b5f51d8bc4e51f39ef9df707f793508a7483d8675d"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0007", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "Phase B2: Semantics-lift into STUNIR \u201cmeaning\u201d IR", "text": "##### Phase B2: Semantics-lift into STUNIR \u201cmeaning\u201d IR\nDefine and implement the mapping into STUNIR meaning forms:\n- Prolog: Horn clauses + resolution model subset\n- Datalog: stratified negation subset, fixed-point semantics\n- ASP: stable model semantics subset\n- MiniZinc: constraint model subset\n\n", "chunk_sha256": "5115fdcb19cf066febe17e3a3b6e4eae17f90c3e628172e10e8abd79a87d3255"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0008", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "5) Receipts", "text": "#### 5) Receipts\nEach Tier B frontend run must produce a receipt binding:\n- input program bytes digest\n- frontend tool identity + version + dialect config\n- produced `receipts/ir_bundle_manifest.json` digest\n- normalization parameters\n\nReceipts should explicitly record:\n- language (`prolog|datalog|asp|minizinc`)\n- dialect baseline\n- subset gates enforced\n\n", "chunk_sha256": "35521e7814ac878dbd754cd488d42e68cd3d7a47018e37bc76148863afbaa955"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0009", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "6) Coexistence with Tier A", "text": "#### 6) Coexistence with Tier A\nTier A remains valid for these languages and should be the default path when:\n- the source file is just a transport for an already-chosen IR bundle\n\nTier B is used when:\n- the source program itself is the authoritative meaning input\n\n", "chunk_sha256": "e57e842bd31a828578f5d2ef8cba460ed4df32f27e7356f719791ee312a0cedd"}
{"chunk_id": "spec/frontends/declarative/declarative_frontends_plan_v0.md::chunk::0010", "path": "spec/frontends/declarative/declarative_frontends_plan_v0.md", "source_git_sha": "12c2e9dcb29b8ac89317e7037019adc09b5be89e", "heading": "7) Non-goals", "text": "#### 7) Non-goals\n- Full-language support.\n- Solver/compiler execution as part of determinism.\n- Cross-language equivalence proofs (until semantics are nailed down).\n", "chunk_sha256": "fc86a1c295993469b3dc11046859f32daefbfbad36a7f189d8790af44140d311"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0000", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "Tier A ingest: IR-in-source / Source references IR (STUNIR)", "text": "### Tier A ingest: IR-in-source / Source references IR (STUNIR)\n\n", "chunk_sha256": "2fed77c56adcaeaae47f58e83e3f365fb4437411a3e4218e934a829070b36863"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0001", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "0) Goal", "text": "#### 0) Goal\nMake **source code a valid input** deterministically by allowing the canonical STUNIR IR bundle to be:\n\n- **referenced** from source (preferred)\n- or **embedded** in source (optional)\n\nThis is Tier A: it does **not** require parsing the language or defining language semantics.\n\nKey invariant:\n- The **IR bundle is the byte-exact anchor**.\n- Tier A ingest must reproduce the same `spec/ir_bundle/<name>.machine.json` bytes (or reject).\n\n", "chunk_sha256": "104cc53628b1401b07e39a832fca24641f760e83f4772f70fd1438a0ca695cb8"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0002", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "1) Two ingest forms", "text": "#### 1) Two ingest forms\n\n", "chunk_sha256": "71be46481bfda8a894abf8ac7c894818c40a05cc2341b53dd8b7dbd6e2091df7"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0003", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "1.1 Reference form (recommended)", "text": "##### 1.1 Reference form (recommended)\nA source file contains a reference to an IR bundle path and its sha256.\n\nNormative fields:\n- `uri`: repository-relative path (e.g. `spec/ir_bundle/stunir_ir_bundle_v1.machine.json`)\n- `sha256`: hex digest of the referenced file bytes\n\nExtraction behavior:\n1. Read referenced bytes.\n2. Verify sha256.\n3. Treat the referenced bytes as the canonical IR bundle bytes.\n\nDeterminism note:\n- Determinism reduces to file content + sha256 verification.\n\n", "chunk_sha256": "66597cc93d973af567b9b7c9644358ec3d2779bd09fdde1afcf22a32693231e7"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0004", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "1.2 Embedded form (optional)", "text": "##### 1.2 Embedded form (optional)\nA source file contains the IR bundle bytes embedded as **base64url**.\n\nNormative fields:\n- `sha256`: hex digest of the decoded bytes\n- `b64url`: base64url encoding of the IR bundle bytes\n\nEncoding requirements:\n- base64url alphabet `A-Z a-z 0-9 - _`\n- **no padding** (`=` forbidden)\n- whitespace between base64url chunks is ignored\n\nExtraction behavior:\n1. Collect base64url payload across one or more lines.\n2. Remove ASCII whitespace.\n3. Decode base64url.\n4. Verify sha256.\n5. Treat decoded bytes as the canonical IR bundle bytes.\n\nDeterminism note:\n- The canonical bytes are the decoded bytes; source formatting is irrelevant.\n\n", "chunk_sha256": "04e26d2458d48a69875d04529ba9a270d24bf759afe301f38b4e7aafa9e9405e"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0005", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "2) Marker format", "text": "#### 2) Marker format\nTier A ingest uses comment markers so it works in many languages without parsing.\n\nTwo marker \u201crecords\u201d are defined:\n\n", "chunk_sha256": "e502f641ef3e32ee8d6374e399999203e0b9aea2cf7725b6a45347c9f3449a84"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0006", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "2.1 Reference record", "text": "##### 2.1 Reference record\n- `STUNIR_IR_REF uri=<repo-relative-path>`\n- `STUNIR_IR_SHA256 <hex>`\n\n", "chunk_sha256": "b8732403eaab47daa36b95ed3adf7213b7d5331628df6720ac628a36c752050a"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0007", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "2.2 Embedded record", "text": "##### 2.2 Embedded record\n- `STUNIR_IR_SHA256 <hex>`\n- `STUNIR_IR_B64URL_BEGIN`\n- `<b64url payload lines>`\n- `STUNIR_IR_B64URL_END`\n\n", "chunk_sha256": "642c80bd74630c85851bc1b7bbf961b887b71d8a19aa2679bb3068ce28bd1c44"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0008", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "3) Precedence and error rules", "text": "#### 3) Precedence and error rules\n- If **embedded** record is present, it is authoritative.\n- If **reference** record is also present:\n  - If the referenced bytes\u2019 sha256 matches the embedded sha256, OK.\n  - Otherwise, ingestion MUST FAIL.\n- If neither record is present, ingestion MUST FAIL.\n\n", "chunk_sha256": "f0f47b1bbe054c72ade087aed3a8c0bba39c5906a26d94d7054e0eef2870a3a4"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0009", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "4) Language marker matrix", "text": "#### 4) Language marker matrix\nLanguage-specific comment wrappers are defined in:\n- `spec/ingest/ir_in_source/ir_in_source_markers_matrix_v0.json`\n\nRule:\n- Tier A ingest is specified by **wrapper + marker lines**.\n- No tokenization/parsing beyond comment removal is required.\n\n", "chunk_sha256": "029348e842df57878e964f006ba0295f8df6ec8a9b0e661b3d8da1d188bb5e9e"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0010", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "5) Receipt bindings (required)", "text": "#### 5) Receipt bindings (required)\nAdd a dedicated ingest receipt (schema to be defined in core receipt spec) that binds:\n\n- inputs:\n  - source file digests (one or more)\n  - referenced IR bundle bytes digest OR embedded payload digest\n- tool identity:\n  - ingest tool name/version/hash (even if implemented as shell)\n  - marker-matrix version digest\n- outputs:\n  - `receipts/ir_bundle_manifest.json` digest (the anchor)\n\nThis ensures the claim \u201csource is a valid input\u201d is auditable.\n\n", "chunk_sha256": "f122a8100f6746c8802d01c36af2512f8712eab8964ce710f57137b2706ef154"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0011", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "6) Build-system integration (planning)", "text": "#### 6) Build-system integration (planning)\nAdd a new mode that accepts either:\n- `STUNIR_INPUT_IR_BUNDLE=spec/ir_bundle/...` (direct)\n- `STUNIR_INPUT_SOURCES=...` (Tier A ingest)\n\nProposed build stages:\n1. Resolve IR bundle bytes:\n   - direct path OR Tier A ingest extraction\n2. Verify IR bundle canonicality (existing IR verification)\n3. Proceed with IR\u2192outputs pipeline\n\n", "chunk_sha256": "7a8b8380c1c926fd600ff9c9aeafa65a469524e873558026763addaefc3ee653"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0012", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "7) Security / supply-chain notes", "text": "#### 7) Security / supply-chain notes\n- Reference records must include sha256 and fail if mismatch.\n- Embedded records must include sha256 and fail if mismatch.\n- Tool MUST reject multiple conflicting records.\n\n", "chunk_sha256": "d0ad31a0b0d7ce08c64d12b2247d19066f179a1a2b9b879635d20e7db5cd385e"}
{"chunk_id": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md::chunk::0013", "path": "spec/ingest/ir_in_source/ir_in_source_ingest_plan_v0.md", "source_git_sha": "dcce0057010821982f55c91ee09279eb8c7c1f05", "heading": "8) Non-goals", "text": "#### 8) Non-goals\n- No language parsing.\n- No semantic lifting.\n- No toolchain/compiler contracts.\n", "chunk_sha256": "5e4aef3f785418a32f91e0a12aa740ab05a553c18273a7917715d54f99b6e783"}
{"chunk_id": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md::chunk::0000", "path": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md", "source_git_sha": "3bc734f36bd08196aa9f269fbe9d31d699ffe412", "heading": "Tier A IR-in-source integration notes for polyglot targets", "text": "### Tier A IR-in-source integration notes for polyglot targets\n\nThis note connects:\n- Tier A ingest (`spec/ingest/ir_in_source/*`)\nwith:\n- the polyglot target family plan (`spec/targets/polyglot/*`).\n\n", "chunk_sha256": "b9299341561363872cd87e1e64142eab17c0dabb1cf97bbf9c387963bf714b36"}
{"chunk_id": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md::chunk::0001", "path": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md", "source_git_sha": "3bc734f36bd08196aa9f269fbe9d31d699ffe412", "heading": "Principle", "text": "#### Principle\nAny target language source file MAY carry a Tier A reference/embedded IR record.\nThat makes the source file a valid STUNIR input without needing to parse the language.\n\n", "chunk_sha256": "9834aea69e63f8e85d675136f8078ff03eb6376da077cc6fb56fd6eca10d28cd"}
{"chunk_id": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md::chunk::0002", "path": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md", "source_git_sha": "3bc734f36bd08196aa9f269fbe9d31d699ffe412", "heading": "Suggested usage patterns", "text": "#### Suggested usage patterns\n1) Reference form (preferred):\n- Put `STUNIR_IR_REF` + `STUNIR_IR_SHA256` in a comment at the top of the source.\n- Keep IR bundle stored in `spec/ir_bundle/`.\n\n2) Embedded form:\n- Embed base64url for portability in single-file contexts.\n\n", "chunk_sha256": "af840ed3c3b91d5f83c72177e223df83fc02b8adbaae16eca169e10cab68fc12"}
{"chunk_id": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md::chunk::0003", "path": "spec/targets/polyglot/ir_in_source_integration_notes_v0.md", "source_git_sha": "3bc734f36bd08196aa9f269fbe9d31d699ffe412", "heading": "Determinism", "text": "#### Determinism\nTier A ingest determinism comes from:\n- sha256-verified bytes\n- canonical IR verification\n\nNo language toolchains are needed.\n", "chunk_sha256": "e3b7c0fd5269b5c4f960e9a757ee2abf9149f2769fb80c18595b6cf41ae3bcc6"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md::chunk::0000", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md", "source_git_sha": "94dfe9b19f5c6b797fe9aab463f7729c60dbc293", "heading": "Polyglot target implementation plan (STUNIR)", "text": "### Polyglot target implementation plan (STUNIR)\n\n", "chunk_sha256": "9f6150595cb7f86b4110f519a53a5490eeee654e149c5900c72e0eae53fd4498"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md::chunk::0001", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md", "source_git_sha": "94dfe9b19f5c6b797fe9aab463f7729c60dbc293", "heading": "0) Scope and non-goals", "text": "#### 0) Scope and non-goals\nThis bundle adds **planning artifacts** (not implementations) for the following new STUNIR output target families:\n\n- **C variants**: `c89`, `c99`, `c11`, `c17`, `c23` (with alias `c` \u2192 `c11`)\n- **Rust**: `rust` (edition 2021)\n- **Go**: `go`\n- **Haskell**: `haskell`\n- **BEAM**: `erlang`, `elixir`\n- **Logic / constraints**:\n  - Prolog: `prolog` (portable/ISO-leaning)\n  - Datalog: `datalog` (Souffl\u00e9-flavored baseline)\n  - ASP: `asp` (clingo-flavored baseline)\n  - MiniZinc: `minizinc`\n\nNon-goals for this bundle:\n- Implementing IR\u2192language lowering semantics.\n- Adding compiler/runtime dependency contracts (e.g., `gcc`, `rustc`, `go`, `ghc`, `swipl`, `souffle`, `clingo`, `minizinc`) as required gates.\n- Producing compiled artifacts or solver outputs.\n\nDesign rule (v0): all targets here are **source emission** targets. They should be runnable/compilable in principle, but **the build must not require toolchains**.\n\n", "chunk_sha256": "c966f334c50dd4d70c86a00852a24217b7189a64863debbac916bf2884ad5272"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md::chunk::0002", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md", "source_git_sha": "94dfe9b19f5c6b797fe9aab463f7729c60dbc293", "heading": "1) Target names (authoritative)", "text": "#### 1) Target names (authoritative)\nTarget keys (for `STUNIR_OUTPUT_TARGETS`, comma-separated):\n\n- C family:\n  - `c89`, `c99`, `c11`, `c17`, `c23`\n  - Alias: `c` \u2192 `c11`\n\n- `rust` (Rust 2021 edition)\n- `go`\n- `haskell`\n- `erlang`\n- `elixir`\n- `prolog`\n- `datalog`\n- `asp`\n- `minizinc`\n\nRationale: these names are stable, short, and map directly to output roots under `asm/`.\n\n", "chunk_sha256": "7d75804a829cce0610fec090cd8e07bb54218005026effcbd2193cbc67bae518"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md::chunk::0003", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md", "source_git_sha": "94dfe9b19f5c6b797fe9aab463f7729c60dbc293", "heading": "2) Artifact layout (exact paths)", "text": "#### 2) Artifact layout (exact paths)\nEach target emits deterministic source artifacts under `asm/\u2026` and binds them with:\n\n- per-target manifest: `receipts/<target>_manifest.json`\n- per-target receipt: `receipts/<target>.json`\n\nSuggested minimum file sets (v0):\n\n- `c89` / `c99` / `c11` / `c17` / `c23`:\n  - `asm/c/<variant>/stunir_runtime.h`\n  - `asm/c/<variant>/stunir_runtime.c`\n  - `asm/c/<variant>/main.c`\n  - `asm/c/<variant>/README.md`\n\n- `rust`:\n  - `asm/rust/edition2021/Cargo.toml`\n  - `asm/rust/edition2021/src/runtime.rs`\n  - `asm/rust/edition2021/src/main.rs`\n  - `asm/rust/edition2021/README.md`\n\n- `go`:\n  - `asm/go/module/go.mod`\n  - `asm/go/module/runtime.go`\n  - `asm/go/module/main.go`\n  - `asm/go/module/README.md`\n\n- `haskell`:\n  - `asm/haskell/cabal/stunir.cabal`\n  - `asm/haskell/cabal/src/STUNIR/Runtime.hs`\n  - `asm/haskell/cabal/app/Main.hs`\n  - `asm/haskell/cabal/README.md`\n\n- `erlang`:\n  - `asm/erlang/rebar3/rebar.config`\n  - `asm/erlang/rebar3/src/stunir_runtime.erl`\n  - `asm/erlang/rebar3/src/stunir_program.erl`\n  - `asm/erlang/rebar3/README.md`\n\n- `elixir`:\n  - `asm/elixir/mix/mix.exs`\n  - `asm/elixir/mix/lib/stunir_runtime.ex`\n  - `asm/elixir/mix/lib/stunir_program.ex`\n  - `asm/elixir/mix/README.md`\n\n- `prolog`:\n  - `asm/prolog/iso/runtime.pl`\n  - `asm/prolog/iso/program.pl`\n  - `asm/prolog/iso/README.md`\n\n- `datalog`:\n  - `asm/datalog/souffle/program.dl`\n  - `asm/datalog/souffle/README.md`\n\n- `asp`:\n  - `asm/asp/clingo/program.lp`\n  - `asm/asp/clingo/README.md`\n\n- `minizinc`:\n  - `asm/minizinc/model/program.mzn`\n  - `asm/minizinc/model/README.md`\n\n", "chunk_sha256": "83f7565e71454cc26c5335b2fce83f0c6bfd9bcd7d4d1a1e67ba2f0d52471e6a"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md::chunk::0004", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md", "source_git_sha": "94dfe9b19f5c6b797fe9aab463f7729c60dbc293", "heading": "3) Determinism policy", "text": "#### 3) Determinism policy\n- The IR bundle remains the byte-exact anchor.\n- These targets are required to be **byte-deterministic source emission** given the same canonical IR + epoch/provenance inputs.\n- Runtime/compiled/solver outputs are explicitly out of scope for v0.\n\n", "chunk_sha256": "ad5cf3b57ce8c5c8bed65c61e74954a2bc0308b74867e9c41e61ba8b42eb0b59"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md::chunk::0005", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md", "source_git_sha": "94dfe9b19f5c6b797fe9aab463f7729c60dbc293", "heading": "4) Contracts policy (v0)", "text": "#### 4) Contracts policy (v0)\nAll targets in this plan are defined with:\n\n- `required_contracts`: `[]`\n- `optional_contracts`: `[]`\n\nFuture work (separate bundles): add contracts and define variant targets that require them (e.g., `prolog_swi`, `datalog_souffle`, `asp_clingo`, `minizinc_gecode`, `c_clang`, `rust_rustc`).\n\n", "chunk_sha256": "c99a5ab5584d8bae7c657cce083aba3529a807d4102d992b8ecfdbc996f49127"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md::chunk::0006", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v0.md", "source_git_sha": "94dfe9b19f5c6b797fe9aab463f7729c60dbc293", "heading": "5) Files in this bundle", "text": "#### 5) Files in this bundle\n- `spec/targets/polyglot/polyglot_target_implementation_plan_v0.md`\n- `spec/targets/polyglot/polyglot_targets_matrix.json`\n- `spec/targets/polyglot/patches/rfc6902_target_requirements_polyglot_add.json`\n- `spec/targets/polyglot/patches/rfc6902_machine_plan_add_polyglot.json`\n", "chunk_sha256": "86725996095355b805298331fd0235b96a1c0adb397bee67f7c0cd7c208ac681"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0000", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "Polyglot target implementation plan (STUNIR) \u2014 v1 (with non-Python environment files)", "text": "### Polyglot target implementation plan (STUNIR) \u2014 v1 (with non-Python environment files)\n\n", "chunk_sha256": "2c4cb8cf32a8f24a8e7c89537139888784ecc23f362cd6ac2f5ddf5198a72f4a"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0001", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "0) Scope", "text": "#### 0) Scope\nThis bundle adds **planning artifacts** plus **language-environment skeleton files** needed so the emitted artifacts for non-Python targets can be **built/run in principle** without any Python at runtime.\n\nTargets covered:\n- C variants: `c89`, `c99`, `c11`, `c17`, `c23` (alias `c` \u2192 `c11`)\n- `rust` (edition 2021)\n- `go`\n- `haskell`\n- `erlang`, `elixir`\n- `prolog`, `datalog`, `asp`, `minizinc`\n\nNon-goals:\n- Implementing full IR\u2192language semantics.\n- Adding required toolchain contracts (compilers/solvers) for these targets.\n- Producing compiled artifacts or solver outputs.\n\nDesign rule (v0 semantics): all targets here are **source emission** targets (no required contracts).\n\n", "chunk_sha256": "a4ef937c680262f05a037bee4d53f0500aa8c4f5b3fb78b38dc755ed164a4aee"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0002", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1) Artifact layout (emitted outputs)", "text": "#### 1) Artifact layout (emitted outputs)\nEach target emits deterministic source artifacts under `asm/\u2026` and binds them with:\n- per-target manifest: `receipts/<target>_manifest.json`\n- per-target receipt: `receipts/<target>.json`\n\nMinimum file sets (v0):\n\n", "chunk_sha256": "900cca3793f72183b849f840381f68bedcfa23fed4ae0f7a48d78cc78c443e17"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0003", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.1 C variants", "text": "##### 1.1 C variants\nRoot: `asm/c/<variant>/` where `<variant>` \u2208 {`c89`,`c99`,`c11`,`c17`,`c23`}\n- `stunir_runtime.h`\n- `stunir_runtime.c`\n- `main.c`\n- `README.md`\n- `Makefile` (optional but recommended)\n\n", "chunk_sha256": "dc28213199eb552c8cf3a16573fda02129a89be51978781ce9f9f9ab40417ad8"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0004", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.2 Rust (2021)", "text": "##### 1.2 Rust (2021)\nRoot: `asm/rust/edition2021/`\n- `Cargo.toml`\n- `src/runtime.rs`\n- `src/main.rs`\n- `README.md`\n\n", "chunk_sha256": "6edad85c2a728f67dfedd8f4014f22e064e68841f1e1c43daccb4c19eb15e01c"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0005", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.3 Go", "text": "##### 1.3 Go\nRoot: `asm/go/module/`\n- `go.mod`\n- `runtime.go`\n- `main.go`\n- `README.md`\n\n", "chunk_sha256": "9825fbad97d8bc7f61f946d5992e2e9ffcfbafa0d2417d058f07d448024eb02e"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0006", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.4 Haskell", "text": "##### 1.4 Haskell\nRoot: `asm/haskell/cabal/`\n- `stunir.cabal`\n- `src/STUNIR/Runtime.hs`\n- `app/Main.hs`\n- `README.md`\n\n", "chunk_sha256": "dbfb806bccaf1ed18cf0c2bb6c83512921daedd04d4d784605d7623eb4766485"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0007", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.5 Erlang (rebar3)", "text": "##### 1.5 Erlang (rebar3)\nRoot: `asm/erlang/rebar3/`\n- `rebar.config`\n- `src/stunir_program.app.src`\n- `src/stunir_runtime.erl`\n- `src/stunir_program.erl`\n- `README.md`\n\n", "chunk_sha256": "88db43ba7f450ce493eca2fe8f220d8bf3ab03155eb79903e26f8e81ffe28d83"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0008", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.6 Elixir (mix)", "text": "##### 1.6 Elixir (mix)\nRoot: `asm/elixir/mix/`\n- `mix.exs`\n- `lib/stunir_runtime.ex`\n- `lib/stunir_program.ex`\n- `README.md`\n\n", "chunk_sha256": "055a3a2f6a4f8847fce07d2bbc8d0bc45d918aa5bde4e459e371366c89ca9d95"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0009", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.7 Prolog", "text": "##### 1.7 Prolog\nRoot: `asm/prolog/iso/`\n- `runtime.pl`\n- `program.pl`\n- `README.md`\n\n", "chunk_sha256": "d9ca88c5585fdfc75f8835568f31f4c7b3787e0d5ac8906b10561ff4b544bb1b"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0010", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.8 Datalog (Souffl\u00e9-flavored baseline)", "text": "##### 1.8 Datalog (Souffl\u00e9-flavored baseline)\nRoot: `asm/datalog/souffle/`\n- `program.dl`\n- `README.md`\n\n", "chunk_sha256": "77db07eb20098a6380031c05c37e3555db78561cbe895275c85cb7d5f84361d6"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0011", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.9 ASP (clingo-flavored baseline)", "text": "##### 1.9 ASP (clingo-flavored baseline)\nRoot: `asm/asp/clingo/`\n- `program.lp`\n- `README.md`\n\n", "chunk_sha256": "1279a169a28786e742eed0b89c3f0372fd6c34c7f2fb0dbd4df434460fb0a1ec"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0012", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "1.10 MiniZinc", "text": "##### 1.10 MiniZinc\nRoot: `asm/minizinc/model/`\n- `program.mzn`\n- `README.md`\n\n", "chunk_sha256": "8de34ad5597f013bd8c4b21e30fc81992b5064ed4eb12ff50570f45d9b6cd032"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0013", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "2) Skeletons included in this bundle", "text": "#### 2) Skeletons included in this bundle\nThis bundle includes **static skeleton templates** under:\n- `spec/targets/polyglot/skeletons/...`\n\nThese are:\n- minimal, self-contained project/config files\n- designed to compile/run with the target ecosystem\u2019s usual tooling\n- intentionally contain **stub program bodies**, so codegen can later replace only the relevant sections deterministically.\n\nSkeletons are not emitted outputs; they are **reference templates** that the eventual codegen tools can follow verbatim.\n\n", "chunk_sha256": "e74a66f06ad49d23bc53aa5d8a718ac73a27620242cdef60ac3911a26ada37d4"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0014", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "3) Contracts policy (v0)", "text": "#### 3) Contracts policy (v0)\nAll targets in this plan are defined with:\n- `required_contracts`: `[]`\n- `optional_contracts`: `[]`\n\nFuture work (separate bundles): add contracts and define toolchain-required variants.\n\n", "chunk_sha256": "3e4b55abc423003e630e3b7a5e7c161b970d4f2b8e55608f8dafd47c701daf18"}
{"chunk_id": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md::chunk::0015", "path": "spec/targets/polyglot/polyglot_target_implementation_plan_v1.md", "source_git_sha": "61f9fe8a63e81b39fe5f1ee0106c16984007eb3f", "heading": "4) Files in this bundle", "text": "#### 4) Files in this bundle\n- planning:\n  - `spec/targets/polyglot/polyglot_target_implementation_plan_v1.md`\n  - `spec/targets/polyglot/polyglot_targets_matrix_v1.json`\n  - `spec/targets/polyglot/patches/rfc6902_target_requirements_polyglot_add.json`\n  - `spec/targets/polyglot/patches/rfc6902_machine_plan_add_polyglot.json`\n- skeleton templates:\n  - `spec/targets/polyglot/skeletons/**` (see directory tree)\n", "chunk_sha256": "2df9c4b045854e7f096c74c976d148bc80269d94422694ea9321399e305739cb"}
{"chunk_id": "spec/targets/polyglot/skeletons/asp/clingo/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/asp/clingo/README.md", "source_git_sha": "f90d1fd4c034f835639de9023c33682468200a8d", "heading": "STUNIR ASP skeleton (clingo-flavored)", "text": "# STUNIR ASP skeleton (clingo-flavored)\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "448ef335a46083a5d2a4ceb3fc957ce00750357e6f311b972d548bd46d7c41c6"}
{"chunk_id": "spec/targets/polyglot/skeletons/asp/clingo/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/asp/clingo/README.md", "source_git_sha": "f90d1fd4c034f835639de9023c33682468200a8d", "heading": "Run (if clingo is installed)", "text": "## Run (if clingo is installed)\n- `clingo program.lp`\n\n", "chunk_sha256": "e511ca5c42a4dc1cb472bd31f0bae9ec71b1c6cfc7afeb95de392fe3bf624333"}
{"chunk_id": "spec/targets/polyglot/skeletons/asp/clingo/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/asp/clingo/README.md", "source_git_sha": "f90d1fd4c034f835639de9023c33682468200a8d", "heading": "Notes", "text": "## Notes\n- This is a baseline syntax target.\n", "chunk_sha256": "2eb7949dcbc57a94d72f417be2ec7c77e7b55a9158ba8d58380cefeb8e74220c"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c11/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/c/c11/README.md", "source_git_sha": "d8912970eda0e32ec714d2111a1e929b755cce67", "heading": "STUNIR C C11 skeleton", "text": "# STUNIR C C11 skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "46db2936bc7f93a4a84f3da08e64dd4d6765f8aa6cb94021d06a52576f3f8ae1"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c11/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/c/c11/README.md", "source_git_sha": "d8912970eda0e32ec714d2111a1e929b755cce67", "heading": "Build", "text": "## Build\n\n- Using `make`:\n  - `make`\n  - `./stunir_program`\n\n- Without `make`:\n  - `cc -std=c11 -O2 -Wall -Wextra -pedantic -o stunir_program main.c stunir_runtime.c`\n  - `./stunir_program`\n\n", "chunk_sha256": "181689d869421303311330e98341cf32816a5cdaac4fa2f8c21af510e400039a"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c11/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/c/c11/README.md", "source_git_sha": "d8912970eda0e32ec714d2111a1e929b755cce67", "heading": "Notes", "text": "## Notes\n- This skeleton is intentionally tiny and deterministic.\n- It is **not** a semantic implementation of STUNIR; it is packaging + stub entrypoints.\n", "chunk_sha256": "bbf10cc2dc1f8276fa2b4a3b84cf4aef43ed51a9d153cc0b3009d787575d35db"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c17/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/c/c17/README.md", "source_git_sha": "24a2f9ac2fb8df5263b4d61674c82ecc9ebf9265", "heading": "STUNIR C C17 skeleton", "text": "# STUNIR C C17 skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "d766eb6fe3ba48abf079242731815d5fe93a044ed5887a7f89ae041265f9aedf"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c17/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/c/c17/README.md", "source_git_sha": "24a2f9ac2fb8df5263b4d61674c82ecc9ebf9265", "heading": "Build", "text": "## Build\n\n- Using `make`:\n  - `make`\n  - `./stunir_program`\n\n- Without `make`:\n  - `cc -std=c17 -O2 -Wall -Wextra -pedantic -o stunir_program main.c stunir_runtime.c`\n  - `./stunir_program`\n\n", "chunk_sha256": "5d3d6d6118ea5a8148dcfcf355abb1086ef77b4fa7944b26178f1d24561a98ae"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c17/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/c/c17/README.md", "source_git_sha": "24a2f9ac2fb8df5263b4d61674c82ecc9ebf9265", "heading": "Notes", "text": "## Notes\n- This skeleton is intentionally tiny and deterministic.\n- It is **not** a semantic implementation of STUNIR; it is packaging + stub entrypoints.\n", "chunk_sha256": "bbf10cc2dc1f8276fa2b4a3b84cf4aef43ed51a9d153cc0b3009d787575d35db"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c23/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/c/c23/README.md", "source_git_sha": "a655e36e4a63be884f969dbdd248f1b16975f51b", "heading": "STUNIR C C23 skeleton", "text": "# STUNIR C C23 skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "548159a7eaa1f7d065974b361f09cacd8c1cf9d0011a743492c8cb2cbf8afa35"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c23/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/c/c23/README.md", "source_git_sha": "a655e36e4a63be884f969dbdd248f1b16975f51b", "heading": "Build", "text": "## Build\n\n- Using `make`:\n  - `make`\n  - `./stunir_program`\n\n- Without `make`:\n  - `cc -std=c2x -O2 -Wall -Wextra -pedantic -o stunir_program main.c stunir_runtime.c`\n  - `./stunir_program`\n\n", "chunk_sha256": "c7f3430108b9489ed5f4a541f628dfca36bcbf9b825583be8ba49b7e405b09da"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c23/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/c/c23/README.md", "source_git_sha": "a655e36e4a63be884f969dbdd248f1b16975f51b", "heading": "Notes", "text": "## Notes\n- This skeleton is intentionally tiny and deterministic.\n- It is **not** a semantic implementation of STUNIR; it is packaging + stub entrypoints.\n", "chunk_sha256": "bbf10cc2dc1f8276fa2b4a3b84cf4aef43ed51a9d153cc0b3009d787575d35db"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c89/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/c/c89/README.md", "source_git_sha": "af9b07fd9aed772ae8a02ae075ec65ba3a8a08c2", "heading": "STUNIR C C89 skeleton", "text": "# STUNIR C C89 skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "4e41fb6ce0ea3499c9e730b418219ac3bb4b63cc731b0cce6755975e27bb6e5c"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c89/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/c/c89/README.md", "source_git_sha": "af9b07fd9aed772ae8a02ae075ec65ba3a8a08c2", "heading": "Build", "text": "## Build\n\n- Using `make`:\n  - `make`\n  - `./stunir_program`\n\n- Without `make`:\n  - `cc -std=c89 -O2 -Wall -Wextra -pedantic -o stunir_program main.c stunir_runtime.c`\n  - `./stunir_program`\n\n", "chunk_sha256": "cf5e9c68d9f339a00be56f8fb2ed5226f9927184503f7c1ead7fe959598647aa"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c89/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/c/c89/README.md", "source_git_sha": "af9b07fd9aed772ae8a02ae075ec65ba3a8a08c2", "heading": "Notes", "text": "## Notes\n- This skeleton is intentionally tiny and deterministic.\n- It is **not** a semantic implementation of STUNIR; it is packaging + stub entrypoints.\n", "chunk_sha256": "bbf10cc2dc1f8276fa2b4a3b84cf4aef43ed51a9d153cc0b3009d787575d35db"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c99/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/c/c99/README.md", "source_git_sha": "c1723f4cff9834e63bc9af4ab9899efaf447484c", "heading": "STUNIR C C99 skeleton", "text": "# STUNIR C C99 skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "ca0398d5f81d269ca8ccafbbf53aaa774f27759ffa17df693d648dcaf776a5b7"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c99/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/c/c99/README.md", "source_git_sha": "c1723f4cff9834e63bc9af4ab9899efaf447484c", "heading": "Build", "text": "## Build\n\n- Using `make`:\n  - `make`\n  - `./stunir_program`\n\n- Without `make`:\n  - `cc -std=c99 -O2 -Wall -Wextra -pedantic -o stunir_program main.c stunir_runtime.c`\n  - `./stunir_program`\n\n", "chunk_sha256": "4e282ac7577e081f1db670686e6fe4d1f6942788cfa44046f3bd4ffad35b4130"}
{"chunk_id": "spec/targets/polyglot/skeletons/c/c99/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/c/c99/README.md", "source_git_sha": "c1723f4cff9834e63bc9af4ab9899efaf447484c", "heading": "Notes", "text": "## Notes\n- This skeleton is intentionally tiny and deterministic.\n- It is **not** a semantic implementation of STUNIR; it is packaging + stub entrypoints.\n", "chunk_sha256": "bbf10cc2dc1f8276fa2b4a3b84cf4aef43ed51a9d153cc0b3009d787575d35db"}
{"chunk_id": "spec/targets/polyglot/skeletons/datalog/souffle/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/datalog/souffle/README.md", "source_git_sha": "c63fd26ccabbeb1eefb0b3820b0967f2f02b0839", "heading": "STUNIR Datalog skeleton (Souffl\u00e9-flavored)", "text": "# STUNIR Datalog skeleton (Souffl\u00e9-flavored)\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "889f53fb0fd5cb48b1f370f29b89d4993c8bef4e6d76b4130cda04770778dab0"}
{"chunk_id": "spec/targets/polyglot/skeletons/datalog/souffle/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/datalog/souffle/README.md", "source_git_sha": "c63fd26ccabbeb1eefb0b3820b0967f2f02b0839", "heading": "Run (if Souffl\u00e9 is installed)", "text": "## Run (if Souffl\u00e9 is installed)\n- `souffle program.dl`\n\n", "chunk_sha256": "e92ae9c8e24846e0f9b358ec5b2da549a301a708412547b075de5e4571efd1a0"}
{"chunk_id": "spec/targets/polyglot/skeletons/datalog/souffle/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/datalog/souffle/README.md", "source_git_sha": "c63fd26ccabbeb1eefb0b3820b0967f2f02b0839", "heading": "Notes", "text": "## Notes\n- This is a baseline syntax target, not a commitment to a specific engine.\n", "chunk_sha256": "6a45354ac4f89f8086531d493c0d5b8e9aab35dcb0c1ef6942acdbe2991b8917"}
{"chunk_id": "spec/targets/polyglot/skeletons/elixir/mix/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/elixir/mix/README.md", "source_git_sha": "3c34fbe02f0981f9a71268f0774917f060166ebb", "heading": "STUNIR Elixir skeleton (Mix)", "text": "# STUNIR Elixir skeleton (Mix)\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "187445b5df7b7cc0d0985c115eaef33d7d93f57f90fb3bdb058cd16c04c7f3a2"}
{"chunk_id": "spec/targets/polyglot/skeletons/elixir/mix/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/elixir/mix/README.md", "source_git_sha": "3c34fbe02f0981f9a71268f0774917f060166ebb", "heading": "Run", "text": "## Run\n- `mix run -e 'System.halt(STUNIR.Program.main())'`\n\n", "chunk_sha256": "c660748cc03adb309984b3b2aa38d8e27640502506cd41ebda20685cf21086f3"}
{"chunk_id": "spec/targets/polyglot/skeletons/elixir/mix/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/elixir/mix/README.md", "source_git_sha": "3c34fbe02f0981f9a71268f0774917f060166ebb", "heading": "Notes", "text": "## Notes\n- No deps.\n", "chunk_sha256": "b79f537b5f0a167e0e69ab9631520b72d9dacb520571ebcebd5c465c6bdc2b66"}
{"chunk_id": "spec/targets/polyglot/skeletons/erlang/rebar3/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/erlang/rebar3/README.md", "source_git_sha": "742042dac6b81adb2baad9fd9db7da7725f34530", "heading": "STUNIR Erlang skeleton (rebar3)", "text": "# STUNIR Erlang skeleton (rebar3)\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "fd2640c1e0eb3821ca96585a7caa026645172a40968a58f0fe1eb7971f6aa2fb"}
{"chunk_id": "spec/targets/polyglot/skeletons/erlang/rebar3/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/erlang/rebar3/README.md", "source_git_sha": "742042dac6b81adb2baad9fd9db7da7725f34530", "heading": "Build/run", "text": "## Build/run\n- `rebar3 shell`\n- In the Erlang shell: `stunir_program:main().`\n\n", "chunk_sha256": "294d1ef0d1629f5f31fab49547cc6fa133df6f4b304ec125a5f9118acc542ef5"}
{"chunk_id": "spec/targets/polyglot/skeletons/erlang/rebar3/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/erlang/rebar3/README.md", "source_git_sha": "742042dac6b81adb2baad9fd9db7da7725f34530", "heading": "Notes", "text": "## Notes\n- Minimal OTP application metadata included.\n", "chunk_sha256": "11aaa05fed3f7c7c0800fa2b5ddb025506ae31e52e5d0830e83b70abdad8c8b6"}
{"chunk_id": "spec/targets/polyglot/skeletons/go/module/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/go/module/README.md", "source_git_sha": "6c4b6dc442319f1df6f4bb13d9a05712887d012a", "heading": "STUNIR Go skeleton", "text": "# STUNIR Go skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "cd08db3cf36c4540d7acf02ede3909150ec194db62c1f4a24725a511eaa2c672"}
{"chunk_id": "spec/targets/polyglot/skeletons/go/module/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/go/module/README.md", "source_git_sha": "6c4b6dc442319f1df6f4bb13d9a05712887d012a", "heading": "Run", "text": "## Run\n- `go run .`\n\n", "chunk_sha256": "2306d286f86d8fb67bbc1a3c8593188881c503557d440f8aef7f23685ee9c4ff"}
{"chunk_id": "spec/targets/polyglot/skeletons/go/module/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/go/module/README.md", "source_git_sha": "6c4b6dc442319f1df6f4bb13d9a05712887d012a", "heading": "Notes", "text": "## Notes\n- Single module, no external deps.\n", "chunk_sha256": "d3b3f096b002a2126e7374589b750865b9670b729ba06dfa5f602556d6d115e3"}
{"chunk_id": "spec/targets/polyglot/skeletons/haskell/cabal/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/haskell/cabal/README.md", "source_git_sha": "d0058a95544ab39296048694a1ee5f64aa1de91f", "heading": "STUNIR Haskell skeleton (Cabal)", "text": "# STUNIR Haskell skeleton (Cabal)\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "8cbe751f23ccf3838ffdcc6dc9764dda8f2a3e47afaed383378bbb28434c7c1a"}
{"chunk_id": "spec/targets/polyglot/skeletons/haskell/cabal/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/haskell/cabal/README.md", "source_git_sha": "d0058a95544ab39296048694a1ee5f64aa1de91f", "heading": "Build/run", "text": "## Build/run\n- `cabal run`\n\n", "chunk_sha256": "b9e2d581246bd5875816a02447016f2009c4bb4d27772572d9ed326d9c9aa00b"}
{"chunk_id": "spec/targets/polyglot/skeletons/haskell/cabal/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/haskell/cabal/README.md", "source_git_sha": "d0058a95544ab39296048694a1ee5f64aa1de91f", "heading": "Notes", "text": "## Notes\n- Minimal `base` only.\n", "chunk_sha256": "b1cc91cba610b40a4b2f85630e2532071db9349f84148d7ef62ad7b7bacd8b73"}
{"chunk_id": "spec/targets/polyglot/skeletons/minizinc/model/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/minizinc/model/README.md", "source_git_sha": "8ea6284119d6eeab57d1705ea323b96c8da00e21", "heading": "STUNIR MiniZinc skeleton", "text": "# STUNIR MiniZinc skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "816375794ba78d4c6cb334bc82f0b4d835bdbd06fb73fe65dd4b76a7a82a3a62"}
{"chunk_id": "spec/targets/polyglot/skeletons/minizinc/model/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/minizinc/model/README.md", "source_git_sha": "8ea6284119d6eeab57d1705ea323b96c8da00e21", "heading": "Run (if MiniZinc is installed)", "text": "## Run (if MiniZinc is installed)\n- `minizinc program.mzn`\n\n", "chunk_sha256": "bd1d7d6dd673c653d5a3a272512b63756e00a21ef35853a49cbdc4c951fbb2ef"}
{"chunk_id": "spec/targets/polyglot/skeletons/minizinc/model/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/minizinc/model/README.md", "source_git_sha": "8ea6284119d6eeab57d1705ea323b96c8da00e21", "heading": "Notes", "text": "## Notes\n- Solver selection/parameters are out of scope for v0.\n", "chunk_sha256": "a414f4d0a12b22b7c775a726f3a0cf8af4a170d24915eb29866298c56abfbeac"}
{"chunk_id": "spec/targets/polyglot/skeletons/prolog/iso/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/prolog/iso/README.md", "source_git_sha": "756cbb8d7c9f236a053abe8af23192a065a84b06", "heading": "STUNIR Prolog skeleton (ISO-leaning)", "text": "# STUNIR Prolog skeleton (ISO-leaning)\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "480c9212d241b97c8499c7519ad4dca39a1e23f26568e5cbf07ed122c2811d73"}
{"chunk_id": "spec/targets/polyglot/skeletons/prolog/iso/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/prolog/iso/README.md", "source_git_sha": "756cbb8d7c9f236a053abe8af23192a065a84b06", "heading": "Run (dialect-dependent)", "text": "## Run (dialect-dependent)\nConsult `program.pl` and call `main.`\n\n", "chunk_sha256": "c2174934d33436e3451e908e3d29dbb2403e78ee5df390e9abd5ffeb760206f6"}
{"chunk_id": "spec/targets/polyglot/skeletons/prolog/iso/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/prolog/iso/README.md", "source_git_sha": "756cbb8d7c9f236a053abe8af23192a065a84b06", "heading": "Notes", "text": "## Notes\n- This is a portable baseline; dialect-specific variants can be added later.\n", "chunk_sha256": "83325c96bdb29a675e719cba8947f68f2abe906bf596e5aa03ef5eb8803b298e"}
{"chunk_id": "spec/targets/polyglot/skeletons/rust/edition2021/README.md::chunk::0000", "path": "spec/targets/polyglot/skeletons/rust/edition2021/README.md", "source_git_sha": "f03e01542742424d90ed6f6e8205caf41f148dc3", "heading": "STUNIR Rust (edition 2021) skeleton", "text": "# STUNIR Rust (edition 2021) skeleton\n\nTHIS IS A SKELETON TEMPLATE (STUB). STUNIR CODEGEN SHOULD REPLACE PROGRAM LOGIC SECTIONS.\n\n", "chunk_sha256": "b50fc8188002d8abeca94e889d866edb336d77ff647a195bdaed20269b5c803b"}
{"chunk_id": "spec/targets/polyglot/skeletons/rust/edition2021/README.md::chunk::0001", "path": "spec/targets/polyglot/skeletons/rust/edition2021/README.md", "source_git_sha": "f03e01542742424d90ed6f6e8205caf41f148dc3", "heading": "Build/run", "text": "## Build/run\n- `cargo run`\n\n", "chunk_sha256": "35774dc6ba5158e116f126038c67d8d66bfac10999c4b986dd435068687eeb43"}
{"chunk_id": "spec/targets/polyglot/skeletons/rust/edition2021/README.md::chunk::0002", "path": "spec/targets/polyglot/skeletons/rust/edition2021/README.md", "source_git_sha": "f03e01542742424d90ed6f6e8205caf41f148dc3", "heading": "Notes", "text": "## Notes\n- No external crates; deterministic, minimal.\n", "chunk_sha256": "fc010991527b0210f832444805676006d2259dc12b6a5ad7365eec32f9cc92b5"}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0000", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "STUNIR Anti-Patterns & Forbidden Actions", "text": "# STUNIR Anti-Patterns & Forbidden Actions"}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0001", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "\ud83d\uded1 CRITICAL: READ BEFORE GENERATING CODE", "text": "## \ud83d\uded1 CRITICAL: READ BEFORE GENERATING CODE\n\nSTUNIR is a **deterministic build system**. Standard CI/CD practices often violate its core theorems.\nIf you suggest any of the following, you are breaking the build."}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0002", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "1. The \"PATH\" Trap", "text": "### 1. The \"PATH\" Trap\n- **BAD:** `python3 script.py` or `gcc main.c` (Relying on system PATH)\n- **GOOD:** `$STUNIR_TOOL_PYTHON script.py` or `$STUNIR_TOOL_CC main.c`\n- **WHY:** `PATH` is a determinism leak. We do not know which version of a tool we are getting."}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0003", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "2. The \"Network\" Trap", "text": "### 2. The \"Network\" Trap\n- **BAD:** `pip install requests`, `npm install`, `cargo build` (fetching crates)\n- **GOOD:** All dependencies must be vendored in `inputs/` or `tools/`.\n- **WHY:** The build phase is **OFFLINE**. Network access is only allowed in the explicit \"Discovery/Fetch\" phase, never in `build.sh`."}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0004", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "3. The \"Timestamp\" Trap", "text": "### 3. The \"Timestamp\" Trap\n- **BAD:** `datetime.now()`, `date`, `touch file`\n- **GOOD:** Use `STUNIR_BUILD_EPOCH` or `SOURCE_DATE_EPOCH`.\n- **WHY:** Builds must be bit-for-bit identical whether run today or next year."}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0005", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "4. The \"JSON\" Trap", "text": "### 4. The \"JSON\" Trap\n- **BAD:** `json.dump(data, f)` (Default formatting)\n- **GOOD:** `json.dump(data, f, sort_keys=True, separators=(',', ':'))`\n- **WHY:** JSON serialization is non-deterministic by default (whitespace, key order). We need Canonical JSON for hashing."}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0006", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "5. The \"Python Dependency\" Trap", "text": "### 5. The \"Python Dependency\" Trap\n- **BAD:** Assuming Python is available for orchestration logic.\n- **GOOD:** Write orchestration in POSIX `sh`. Use Python only if `STUNIR_TOOL_PYTHON` is set.\n- **WHY:** STUNIR must run in \"Shell Primary\" mode (Profile 3) on constrained systems."}
{"chunk_id": "STUNIR_ANTI_PATTERNS.md::chunk::0007", "path": "STUNIR_ANTI_PATTERNS.md", "source_git_sha": "1e58f978bb91669f0f1631b398ab5202eb03e1d6", "heading": "6. The \"AbsolutePath\" Trap (in Artifacts)", "text": "### 6. The \"AbsolutePath\" Trap (in Artifacts)\n- **BAD:** Embedding `/home/user/stunir/build/...` in a binary or generated file.\n- **GOOD:** Use relative paths or deterministic placeholders (`/src`, `/build`).\n- **WHY:** The build directory varies per user. Artifacts must be portable."}
{"chunk_id": "STUNIR_ARCHITECTURE.mermaid::chunk::0000", "path": "STUNIR_ARCHITECTURE.mermaid", "source_git_sha": "32e3f0f025fbcc3fe599632e132f754c6a46fafe", "heading": "STUNIR_ARCHITECTURE.mermaid", "text": "graph TD\n    %% Nodes\n    User[User / Model]\n    Spec[Spec Files (JSON)]\n    Disc[Discovery Script]\n    Lock[Toolchain Lock (JSON)]\n    Build[Build Script (sh)]\n    Norm[Normalizer (Py/Native)]\n    IR[Intermediate Ref (dCBOR)]\n    Gen[Generator]\n    Art[Artifacts (Bin/Src)]\n    Receipt[Receipt (KV/JSON)]\n\n    %% Flow\n    User -->|Authors| Spec\n    Disc -->|Scans Host| Lock\n    Lock -->|Injects Tools| Build\n    Spec -->|Input| Build\n    Build -->|Orchestrates| Norm\n    Norm -->|Produces| IR\n    IR -->|Input| Gen\n    Gen -->|Produces| Art\n    Build -->|Records| Receipt\n\n    %% Relationships\n    Receipt -.->|Binds| Spec\n    Receipt -.->|Binds| Lock\n    Receipt -.->|Binds| IR\n    Receipt -.->|Binds| Art\n\n    %% Subgraphs\n    subgraph \"Determinism Boundary\"\n        Build\n        Norm\n        IR\n        Gen\n        Art\n        Receipt\n    end\n\n    subgraph \"Host Environment (Untrusted)\"\n        Disc\n        Lock\n    end\n"}
{"chunk_id": "scripts/lib/receipt.sh::chunk::0000", "path": "scripts/lib/receipt.sh", "source_git_sha": "463817a862adef2bd17fa507ea577fa8f920de89", "heading": "receipt.sh", "text": "#!/usr/bin/env bash\n# scripts/lib/receipt.sh\n# Shell implementation of receipt generation\n\nsource scripts/lib/json_canon.sh\n\n# cmd_gen_receipt <target> <status> <epoch> <tool_name> <tool_path> <tool_hash> <tool_ver>\ncmd_gen_receipt() {\n    local target=\"$1\"\n    local status=\"$2\"\n    local epoch=\"$3\"\n    local t_name=\"$4\"\n    local t_path=\"$5\"\n    local t_hash=\"$6\"\n    local t_ver=\"$7\"\n    shift 7\n    # argv is remaining args\n\n    # 1. Construct Tool Info (Sorted Keys: tool_name, tool_path, tool_sha256, tool_version)\n    # Note: 'tool_name' comes before 'tool_path'? \n    # Alphabetical: tool_name, tool_path, tool_sha256, tool_version\n    # n, p, s, v. Correct.\n\n    # We need to construct the inner object string first\n    local tool_json=\"{\\\"tool_name\\\":\\\"$t_name\\\",\\\"tool_path\\\":\\\"$t_path\\\",\\\"tool_sha256\\\":\\\"$t_hash\\\",\\\"tool_version\\\":\\\"$t_ver\\\"}\"\n\n    # 2. Construct Receipt (Sorted Keys)\n    # receipt_argv\n    # receipt_build_epoch\n    # receipt_epoch_json\n    # receipt_inputs\n    # receipt_schema\n    # receipt_status\n    # receipt_target\n    # receipt_tool\n\n    # Argv array construction\n    local argv_json=\"[\"\n    local first=1\n    for arg in \"$@\"; do\n        if [[ $first -eq 0 ]]; then argv_json+=\",\"; fi\n        argv_json+=\"\\\"$arg\\\"\"\n        first=0\n    done\n    argv_json+=\"]\"\n\n    # Inputs (empty for now)\n    local inputs_json=\"{}\"\n\n    # Assemble final JSON\n    # Note: We manually ensure alphabetical order of keys here.\n    echo -n \"{\"\n    echo -n \"\\\"receipt_argv\\\":$argv_json,\"\n    echo -n \"\\\"receipt_build_epoch\\\":$epoch,\"\n    echo -n \"\\\"receipt_epoch_json\\\":\\\"build/epoch.json\\\",\"\n    echo -n \"\\\"receipt_inputs\\\":$inputs_json,\"\n    echo -n \"\\\"receipt_schema\\\":\\\"stunir.receipt.build.v1\\\",\"\n    echo -n \"\\\"receipt_status\\\":\\\"$status\\\",\"\n    echo -n \"\\\"receipt_target\\\":\\\"$target\\\",\"\n    echo -n \"\\\"receipt_tool\\\":$tool_json\"\n    echo \"}\"\n}\n"}
{"chunk_id": "scripts/build.sh::chunk::0000", "path": "scripts/build.sh", "source_git_sha": "8a04d9d90a1e6c8e1409f9677e7ee1af28066004", "heading": "build.sh", "text": "#!/usr/bin/env bash\n# scripts/build.sh\n# STUNIR Master Build Script (Polyglot Dispatch)\n\n# Source core library\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"\nsource \"$SCRIPT_DIR/lib/stunir_core.sh\"\n\n# --- Configuration ---\nLOCKFILE=\"build/local_toolchain.lock.json\"\n\n# --- 1. Bootstrap / Discovery ---\nif [ ! -f \"$LOCKFILE\" ]; then\n    log_info \"Lockfile not found. Running discovery...\"\n    bash \"$SCRIPT_DIR/discovery.sh\"\nfi\n\n# --- 2. Orchestration ---\nlog_info \"Starting Build Orchestration...\"\n\n# --- 3. Dispatch to Semantic Engine ---\n\nNATIVE_BIN=\"\"\nPYTHON_MINIMAL=\"tools/python/stunir_minimal.py\"\n\n# Priority 1: Compiled Native (Rust)\nif [ -f \"tools/native/rust/target/debug/stunir-rust\" ]; then\n    NATIVE_BIN=\"tools/native/rust/target/debug/stunir-rust\"\nelif [ -f \"tools/native/rust/target/release/stunir-rust\" ]; then\n    NATIVE_BIN=\"tools/native/rust/target/release/stunir-rust\"\nfi\n\n# Priority 2: Minimal Python (if Native missing)\nif [ -z \"$NATIVE_BIN\" ] && [ -f \"$PYTHON_MINIMAL\" ]; then\n    # Check if we have python3\n    PYTHON_PATH=$(grep '\"python\":' \"$LOCKFILE\" | grep -o '\"path\": \"[^\"]*\"' | cut -d'\"' -f4)\n    if [ -n \"$PYTHON_PATH\" ]; then\n        log_info \"Native binary not found. Using Minimal Python Pipeline ($PYTHON_MINIMAL)...\"\n        NATIVE_BIN=\"$PYTHON_PATH $PYTHON_MINIMAL\"\n    fi\nfi\n\n# Execute Generation\nif [ -n \"$NATIVE_BIN\" ]; then\n    log_info \"Semantic Engine: $NATIVE_BIN\"\n\n    mkdir -p build/ir build/prov\n\n    # 1. Spec -> IR\n    log_info \"[Engine] Generating IR...\"\n    if [ -f \"spec/main.stunir\" ]; then\n        $NATIVE_BIN spec-to-ir --in-json \"spec/main.stunir\" --out-ir \"build/ir/main.ir\"\n    fi\n\n    # 2. Gen Provenance\n    log_info \"[Engine] Generating Provenance...\"\n    echo '{\"timestamp\": \"now\"}' > build/epoch.json\n    if [ -f \"build/ir/main.ir\" ]; then\n        $NATIVE_BIN gen-provenance --in-ir \"build/ir/main.ir\" --epoch-json \"build/epoch.json\" --out-prov \"build/prov/main.prov\"\n    fi\n\nelse\n    log_warn \"No Semantic Engine found (Native or Python). Skipping Generation.\"\nfi\n\n# --- 4. Shell-Native Verification ---\nlog_info \"Running Shell-Native Verification...\"\nif [ -f \"build/ir/main.ir\" ] && [ -f \"build/prov/main.prov\" ]; then\n    bash \"$SCRIPT_DIR/verify_shell.sh\" \"build/ir/main.ir\" \"build/prov/main.prov\"\nelse\n    log_warn \"Artifacts missing, skipping verification.\"\nfi\n\n# --- 5. Manifest Generation ---\nmkdir -p dist\nlog_info \"Generating build manifest...\"\ngenerate_manifest \"scripts\" \"dist/manifest_scripts.txt\"\n\nlog_info \"Build Complete.\"\n"}
